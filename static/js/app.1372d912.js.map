{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?0136","webpack:///./src/components/PhraseFilter.vue?f6b3","webpack:///./src/components/InterfaceMovableWheelFixed.vue?11dd","webpack:///./src/App.vue","webpack:///./src/components/InterfaceFixed.vue","webpack:///./src/components/InterfaceFixed.vue?acd7","webpack:///./src/components/InterfaceMovable.vue","webpack:///./src/components/InterfaceMovable.vue?0446","webpack:///./src/components/PhraseFilter.vue","webpack:///./src/components/PhraseFilter.vue?bc19","webpack:///./src/components/PhraseSelect.vue","webpack:///./src/components/PhraseSelect.vue?4b85","webpack:///./src/components/PhraseSelectDemo.vue","webpack:///./src/components/PhraseSelectDemo.vue?439a","webpack:///./src/components/InterfaceMovableWheel.vue","webpack:///./src/components/InterfaceMovableWheel.vue?9108","webpack:///./src/components/InterfaceMovableWheelFixed.vue","webpack:///./src/components/InterfaceMovableWheelFixed.vue?107d","webpack:///./src/components/PhraseFilterWheel.vue","webpack:///./src/components/PhraseFilterWheel.vue?f88b","webpack:///./src/App.vue?dfb6","webpack:///./src/main.js","webpack:///./src/components/InterfaceMovableWheel.vue?be7f","webpack:///./src/components/InterfaceMovable.vue?f4b9","webpack:///./src/components/PhraseSelectDemo.vue?1d00","webpack:///./src/components/PhraseSelect.vue?75ca","webpack:///./src/components/PhraseFilterWheel.vue?d07b","webpack:///./src/components/InterfaceFixed.vue?e144"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","id","data-toggle","aria-haspopup","aria-expanded","disabled","tabindex","role","data-trigger","title","rel","data-content","data-html","height","style","type","aria-labelledby","get_data","keys","songData","song","segment","data-song","data-segment","songID","songname","songkey","noteSequence","original_noteseq","config","cfg","original_noteseq_overlay","cfg_mel","play_prog_original","play_chord","original_chd_str","replay_all","replay_bar","play_prog_altered","hide_vis_input","altered_chd_str","playing","test_add","player_reset","bpm","min","max","follow_tempo","next_bpm","velocity_scale","expressiveness_vel","expressiveness_tempo","checked","root_overlay","root_on_click","chord_overlay","chord_on_click","test_clear","test_chd_strs","test_apply","test_show_answer","test_idx","connect_midi","midi_channel","href","change_midi_channel","show_midi_devices","midi_device_names","phrasebank_loaded","n_loaded","n_songs","demo","line","bar","locked","locked1","input_type","change_input_type","scales_major","change_key","wheel","change_wheel_input_type","loaded","connected","update_current_chord","ref","interface_key","roots","set_filter","noteseqs","next_phrases","update_next_phrase","sound-font","visualizer","mel","mel_on_click","acc","acc_on_click","current_chord_type","current_chord_text","$event","root_on_rightclick","root_on_middleclick","current_chord_root","current_chord_interval","computed","this","methods","root_idx","event","ctrlKey","altKey","shiftKey","undefined","movementX","$emit","keyboard_functions","includes","preventDefault","idx","indexOf","mounted","document","addEventListener","beforeUnmount","removeEventListener","render","__scopeId","d3","Note","Scale","console","log","props","String","Array","major_scale","dial_r_outer","degree_text","alt","ctrl","z","x","interface_key_idx","dial_r_center","dial_r_degrees","scale_roots","notes","outer_text","scale_notes","draw_dial","selectAll","remove","exit","g","select","append","attr","This","arc","innerRadius","outerRadius","startAngle","Math","PI","endAngle","on","outer_on_click","e","classed","cos","sin","text","get_current_chord_text","root","update_center_text","center_text","scale_root_text","charAt","keydown_functions","keyup_functions","reset","y","filter_h","filter_v","x_quant","y_quant","canvas_size","n_bins","line_width","this_","dragHandler","drag","rect","getElementById","getBoundingClientRect","new_x","sourceEvent","clientX","new_y","clientY","svg","raise","phrase_on_click","next_phrase_idx","noteHeight","pixelsPerTimeStep","minPitch","maxPitch","noteSpacing","offset","no_send","update_offest","set_circle","canvas_size_h","canvas_size_v","n_bins_h","n_bins_v","axios","default","mm","_","Tone","WebMidi","Faye","player","SoundFontPlayer","components","InterfaceFixed","InterfaceMovable","PhraseFilter","PhraseSelect","PhraseSelectDemo","InterfaceMovableWheel","InterfaceMovableWheelFixed","PhraseFilterWheel","BACKEND_PATH","DEBUG","STEP_SIZE","prog_step_duration","octave_center","allData","original_noteseq_mixed","original_noteseq_mel","original_noteseq_acc","pitch","start","end","totalTime","empty_noteseq","original_chd_mat","notedic","notedic_mixed","notedic_mel","notedic_acc","sustain","expressiveness_dur","altered_noteseq","altered_noteseqs","fill","altered_chd_mat","chds","test_chds","altered_chd_str_hide","chord_seq","current_chd","current_chd_text","altered_vis","noteRGB","next_phrases_id","edge_weights","midi_device","phrase_seq","lock_passed","tempo_curve","enabled","bpm_type","gas","brake","acc_ratio","clutched","turn_idx","wheel_shift","wheel_shift_offset","list_to_noteseq","notes_in","filter_start","filter_end","notes_out","pit","startTime","endTime","chords_to_noteseq","chords","relative","mod_chords","chord","chroma","prog_notes","cur_chord","cur_dur","JSON","stringify","parseInt","bass","get_songdata","backend_path","then","response","parse","target","dataset","floor","random","update_melacc_toggle","PianoRollCanvasVisualizer","update_overlay","place_barlines_and_player","setTimeout","update_next_phrases_demo","update_next_phrases","get_data_all","data_in","params","val","apply_filter_anchors","get_data_anthem","player_play","$refs","phrase_selector","player_query_step","redraw","dial","KeyboardEvent","window_len","tempo_changes","get_tempo_changes","highlight_cell","high_light_step","time","chord_seq_maxlen","query","join","note_list","new_notes","apply_dynamics","concat","quant_note_seq","notes_to_quant_noteseq","noteseq","sus_start","sus_end","Transport","setValueAtTime","now","isPlaying","stop","new_chd_mat","M3","m3","M7","m7","D7","chm","dial_wheel","sheel_shift","out","tempos","qpm","note","note_start","note_end","quantizedStartStep","quantizedEndStep","round","velocity","canvas_update_note","canvas_note","expressive","quant_startTime","quant_endTime","original_notes","altered_notes","sort","a","b","avg_vel","original_buckets","altered_buckets","altered_bucket","original_bucket","pos","bottom_vel","top_vel","bottom_weight","apply_articulation","dur","dur_rate","bins","sum_velo","avg_velo","sum","reduce","bpm_changes","cur_step","slowed","slice_len","step","lengthened","changes_out","ratio","dense_changes","before_step","before_bpm","after_step","after_bpm","r_before","out_out","cur_t","prev_bpm","chd","draw_overlay_bar","color","clear_overlay","get_color","interpolateSinebow","draw_root_overlay","draw_chord_overlay","draw_barlines_original","top_rect","bottom_rect","l1","left","pageXOffset","documentElement","scrollLeft","l2","right","top","pageYOffset","scrollTop","bottom","draw_barlines_altered","place_player_original","place_melacc_toggle","track","highlight_start","highlight_end","innerHTML","replace","classList","add","len","bypass_check","totalQuantizedSteps","samples","song_idx","weights","mat","next_idx","dist_dic","dists","sample","dist","filter","vds","hds","anchors_v","anchors_h","vd_q","hd_q","vd","hd","enable","outputs","forEach","output","catch","err","alert","output_midi","channels","playNote","duration","attack","apply_velo","apply_wheel_shift","querySelector","loadAllSamples","callbackObject","run","onresize","faye_client","publish","mutationObserver_config","childList","subtree","attributes","original_timer","shadowRoot","original_controls","original_cell_highlight","time_cell","prog_cell","contains","lighted_cells","timeout","temp_cell","cell","pop","original_callback","mutationsList","observer","original_observer","MutationObserver","observe","Client","subscribe","message","phrase_filter_wheel","createApp","App","mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,IAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,+GCvJT,W,+ECAA,W,2HCAA,W,uJCIKyC,MAAM,kD,GACJA,MAAM,4B,GACLA,MAAM,sB,GACAA,MAAM,qB,EACN,eAES,UAFDA,MAAM,sBAAsBC,GAAG,iBAAiBC,cAAY,WAAWC,gBAAc,OAAOC,gBAAc,SAAQ,oBAE1H,G,GACIJ,MAAM,iB,GAGDA,MAAM,iC,GACHA,MAAM,iB,aAcxBA,MAAM,c,GACJA,MAAM,Y,GACAA,MAAM,MAAMK,SAAA,I,EAAsH,eAAI,mB,EAGhJ,eAoDK,MApDDL,MAAM,YAAU,CAClB,eAkDI,KAlDDM,SAAS,IAAIN,MAAM,MAAMO,KAAK,SAASL,cAAY,UAAUM,eAAa,QAAQC,MAAM,OAAOC,IAAI,UACtGC,eAAa,m0DA+CVC,YAAU,QAAO,UAEhB,eAAI,Q,MAOXZ,MAAM,4BAA4BC,GAAG,Y,GAGjCA,GAAG,aAAWD,MAAM,gC,GAClBA,MAAM,e,EAEX,eAAsC,MAAlCA,MAAM,wBAAsB,S,EAG9B,eAA2B,MAAvBA,MAAM,aAAW,S,EAAM,eAA2B,MAAvBA,MAAM,aAAW,S,GAOjDA,MAAM,M,EAEX,eAAuD,OAAlDA,MAAM,yBAAyBa,OAAO,O,YAGtCb,MAAM,M,GAGJC,GAAG,gBAAgBD,MAAM,8C,EAM1B,eAAS,mB,EAAA,eAAS,mB,GAQjBC,GAAG,qBAAmBD,MAAM,gC,GAC1BA,MAAM,e,EAWf,eAAmD,UAA3CC,GAAG,iBAAiBD,MAAM,S,WAClC,eAAuE,OAAlEA,MAAM,wBAAwBC,GAAG,cAAcY,OAAO,O,YAEtDb,MAAM,M,GAEJC,GAAG,aAAWD,MAAM,8C,aAetBA,MAAM,O,GACJA,MAAM,S,EAEX,eAAI,mB,iBAAA,U,GACOC,GAAG,Y,GAAiCD,MAAM,oB,iBAAyI,e,GAC9KC,GAAG,Y,GAAsCD,MAAM,oB,iBAA+G,e,GAC9JC,GAAG,Y,GAA6CD,MAAM,oB,iBAAkI,0B,GAC1IA,MAAM,oB,iBAA+H,wB,GACrIA,MAAM,oB,GAE/DA,MAAM,uB,IACNA,MAAM,mBAAmBc,MAAA,iB,uBAC8E,eAAiC,YAA3B,mBAAoB,G,IAGjId,MAAM,uB,IACJA,MAAM,mBAAmBc,MAAA,iB,uBACiF,eAAkC,YAA5B,oBAAqB,G,GAI5I,eAAI,mB,GAE0H,eAAI,mB,GAClI,eAAI,mB,GACoH,eAAI,mB,GACJ,eAAI,mB,UAInEd,MAAM,yB,qBAMjDA,MAAM,Y,cAQpB,eAAI,mB,IACCA,MAAM,Y,IACDA,MAAM,gCAAgCe,KAAK,SAASd,GAAG,qBAAqBC,cAAY,WAAWC,gBAAc,OAAOC,gBAAc,S,IAGzIJ,MAAM,gBAAgBgB,kBAAgB,sB,GAO7C,eAAI,mB,cAC2D,eAAI,mB,gDAMhEhB,MAAM,S,IACJA,MAAM,a,IACDA,MAAM,gCAAgCe,KAAK,SAASb,cAAY,Y,GACxE,eAA2B,QAArBF,MAAM,SAAO,S,IACfA,MAAM,iB,UAKPA,MAAM,Y,IACDA,MAAM,gCAAgCe,KAAK,SAASb,cAAY,Y,GACxE,eAA2B,QAArBF,MAAM,SAAO,S,IACfA,MAAM,iB,IAMPA,MAAM,a,IACDA,MAAM,gCAAgCe,KAAK,SAASb,cAAY,Y,GACxE,eAA2B,QAArBF,MAAM,SAAO,S,IACfA,MAAM,iB,eAoBTA,MAAM,S,GACT,eAAmB,SAAhB,gBAAY,G,GAcnB,eAAmD,OAA9CC,GAAG,mBAAiBD,MAAM,e,YAAoB,eAAI,mB,GACvD,eAAkD,OAA7CC,GAAG,kBAAgBD,MAAM,e,aAMzBC,GAAG,iB,IACHD,MAAM,uB,IACJA,MAAM,mBAAmBc,MAAA,iB,uBACoE,eAA2B,YAArB,aAAc,G,IAGnHd,MAAM,uB,IACJA,MAAM,mBAAmBc,MAAA,iB,uBACqE,eAAkC,YAA5B,oBAAqB,G,4bAvShI,eA4SM,YAzSN,eAqFM,MArFN,EAqFM,CApFJ,eAmFM,MAnFN,EAmFM,CAlFJ,eAsBO,KAtBP,EAsBO,CArBD,eAoBK,KApBL,EAoBK,CAnBD,EAGA,eAeK,KAfL,EAeK,CAdH,eAA0D,MAAtDb,GAAG,WAAgB,QAAK,8BAAE,GAAAgB,UAAA,GAAAA,SAAA,uBAAU,kB,mBACtC,eAYK,2BAZcrE,OAAOsE,KAAI,KAAMC,WAAQ,SAAjCC,G,wBAAX,eAYK,MAZiD9B,IAAK8B,GAAI,CAC7D,eAAyF,IAAzF,EAAyC,QAAK,eAAEA,GAAM,IAAC,kBAAOD,SAASC,GAAI,WACzE,eASK,KATL,EASK,E,mBARH,eAOM,2BAPiBxE,OAAOsE,KAAI,GAAMC,SAASC,KAAI,SAAzCC,G,wBAAZ,eAOM,OAP0D/B,IAAK+B,GAAO,CACpD,OAAXA,G,iBAAX,eAKM,SAJJ,eAG+D,MAHtD,QAAK,8BAAE,GAAAJ,UAAA,GAAAA,SAAA,uB,CAAU,eAGgC,KAH7BjB,MAAM,6BAC1BsB,YAAWF,EACXG,eAAcF,GAAS,YACtB,eAAEA,GAAS,IAAC,kBAAOF,SAASC,GAAMC,IAAO,qC,oDAQ3E,eA0DK,KA1DL,EA0DK,CAzDH,eAGK,KAHL,EAGK,CAFH,eAA0I,SAA1I,EAA6B,cAAW,oBAAOG,OAAOzB,MAAK,MAAO,KAAE,oBAAO0B,UAAU,IAAC,oBAAOD,OAAOzB,MAAK,IAAK,MAAG,oBAAO2B,SAAO,GAAW,IAG5I,QA0DN,eA0LM,MA1LN,EA0LM,CAvLJ,eAUQ,QAVR,EAUQ,CATN,eAQQ,QARR,EAQQ,CAPR,eAMK,WALH,EACA,eAGM,a,iBAFJ,eAA6H,2BAA3F,IAAE,SAAPjF,G,OAA7B,eAA6H,MAAzHuD,MAAM,YAAmCV,IAAK7C,EAAUwD,GAAE,QAAUxD,EAAC,I,gBAAUA,EAAC,GAAIA,EAAC,cAAmBA,EAAC,sB,KAC7G,EAA2B,UAMjC,eAA0J,IAAzIsE,KAAK,aAAaf,MAAM,QAAQC,GAAG,eAAsB0B,aAAY,KAAOC,iBAAyBC,OAAM,KAAOC,K,kCACnI,eAyKI,MAzKJ,EAyKI,CAxKJ,eAA8K,IAA7Jf,KAAK,aAAaf,MAAM,QAAQC,GAAG,uBAA8B0B,aAAY,KAAOI,yBAAiCF,OAAM,KAAOG,S,kCACnJ,EAGA,eAmKI,MAnKJ,EAmKI,CAhKJ,eAUQ,QAVR,EAUQ,CATN,eAQQ,cAPR,eAMK,WALD,eAAyF,MAArF/B,GAAG,qBAAmBD,MAAM,YAAiB,QAAK,8BAAE,GAAAiC,oBAAA,GAAAA,mBAAA,uBAAoB,YAC5E,eAGM,a,iBAFN,eAAgM,2BAAhL,IAAE,SAAPxF,G,OAAX,eAAgM,MAArK6C,IAAK7C,EAAUwD,GAAE,iBAAmBxD,EAAC,GAAKuD,MAAM,aAAac,MAAA,yBAAiC,QAAK,mBAAE,GAAAoB,WAAU,WAAazF,EAAC,K,eAAU,EAAA0F,iBAAiB1F,EAAC,2B,KACpL,EAAS,UAQf,eAUQ,QAVR,EAUQ,CATN,eAQQ,QARR,EAQQ,CAPR,eAMK,WALD,eAIM,YAHJ,eAAgE,MAA5DuD,MAAQ,uBAA4B,QAAK,8BAAE,GAAAoC,YAAA,GAAAA,WAAA,yB,iBAC/C,eAAkK,2BAAhI,IAAE,SAAP3F,G,OAA7B,eAAkK,MAA9JuD,MAAM,YAAmCV,IAAK7C,EAAUwD,GAAE,gBAAkBxD,EAAC,GAAU,QAAK,mBAAE,GAAA4F,WAAW5F,EAAC,K,gBAAUA,EAAC,GAAIA,EAAC,cAAmBA,EAAC,gC,KAClJ,eAAyD,MAArDuD,MAAM,YAAiB,QAAK,8BAAE,GAAAoC,YAAA,GAAAA,WAAA,uBAAY,UAAW,eAAmD,MAA/CpC,MAAM,YAAiB,QAAK,8BAAE,GAAAoC,YAAA,GAAAA,WAAA,gCAMnG,EACA,EAEA,eAkII,MAlIJ,EAkII,CAhIJ,eAYQ,QAZR,EAYQ,CAXN,eAUQ,cATN,eAQG,WAPD,eAMM,YALN,eAAuF,MAAnFnC,GAAG,qBAAmBD,MAAM,YAAiB,QAAK,8BAAE,GAAAsC,mBAAA,GAAAA,kBAAA,uBAAmB,Y,iBAC3E,eAEK,2BAFW,IAAE,SAAP7F,G,OAAX,eAEK,MAFsB6C,IAAK7C,EAAUwD,GAAE,WAAaxD,EAAC,GAAKuD,MAAM,aAAac,MAAA,yBAAiC,QAAK,mBAAE,GAAAoB,WAAU,UAAWzF,EAAC,K,CAChI,EAAA8F,e,wCAAd,eAA6D,wBAA7B,EAAAC,gBAAgB/F,EAAC,S,4BAEnD,eAAgG,W,KAAhCgG,Q,wCAA5D,eAAuF,Q,MAAjFzC,MAAM,aAAkB,QAAK,8BAAE,GAAA0C,UAAA,GAAAA,SAAA,uBAAgC,0BAO/E,eAgHI,MAhHJ,EAgHI,CA/GF,eA4DI,MA5DJ,EA4DI,CA3DJ,eAAyF,UAAjFzC,GAAG,gBAAgBD,MAAM,gBAAqB,QAAK,8BAAE,GAAA2C,cAAA,GAAAA,aAAA,uBAAc,SAC3E,E,EACK,eAAqC,OAArC,EAAqC,oBAAZC,KAAG,GAAS,eAAoJ,MAApJ,EAAoJ,C,eAAxH,eAAkH,SAA3G7B,KAAK,QAAQf,MAAM,4BAA4B6C,IAAI,KAAGC,IAAI,M,uDAAa,EAAAF,IAAG,IAAO,aAAU,gCAAE,GAAAG,cAAA,GAAAA,aAAA,uB,mBAAtB,EAAAH,S,EAC1I,eAA0C,OAA1C,EAA0C,oBAAjBI,UAAQ,GAAS,eAA0H,MAA1H,EAA0H,C,eAA9F,eAAwF,SAAjFjC,KAAK,QAAQf,MAAM,4BAA4B6C,IAAI,KAAGC,IAAI,M,uDAAa,EAAAE,SAAQ,K,mBAAR,EAAAA,c,EACpJ,eAAiD,OAAjD,EAAiD,oBAAxBC,gBAAgB,IAAC,GAAO,eAA6I,MAA7I,EAA6I,C,eAAjH,eAA2G,SAApGlC,KAAK,QAAQf,MAAM,4BAA4BC,GAAG,aAAW4C,IAAI,IAAEC,IAAI,M,uDAAa,EAAAG,eAAc,K,mBAAd,EAAAA,oB,EAC7J,eAA8K,a,mCAAhKC,oBAAoB,KAAE,kBAAmI,MAAnI,EAAmI,C,eAAvG,eAAiG,SAA1FnC,KAAK,QAAQf,MAAM,4BAA4B6C,IAAI,IAAEC,IAAI,M,uDAAa,EAAAI,mBAAkB,K,mBAAlB,EAAAA,0B,EAC/I,eAAkL,a,mCAApKC,sBAAsB,KAAE,kBAAqI,MAArI,EAAqI,C,eAAzG,eAAmG,SAA5FpC,KAAK,QAAQf,MAAM,4BAA4B6C,IAAI,IAAEC,IAAI,M,uDAAa,EAAAK,qBAAoB,K,mBAApB,EAAAA,4BAElK,eAIM,MAJN,EAIM,CAHN,eAEM,MAFN,GAEM,CADJ,eAAyG,SAAlGpC,KAAK,WAAWd,GAAG,eAAsBmD,QAAS,EAAAC,aAAmB,QAAK,oCAAOC,mB,uBAAkB,OAG5G,eAIM,MAJN,GAIM,CAHJ,eAEM,MAFN,GAEM,CADJ,eAA4G,SAArGvC,KAAK,WAAWd,GAAG,gBAAuBmD,QAAS,EAAAG,cAAoB,QAAK,oCAAOC,oB,uBAAmB,OAIjH,GACA,eAKM,YAJN,eAA8H,UAAtHxD,MAAM,gBAAqB,QAAK,gCAAE,GAAAyD,YAAA,GAAAA,WAAA,sBAAapD,SAAQ,KAAOqD,cAAc/G,OAAM,GAAQ,EAAA8F,SAAS,aAAU,gBAAS,GAC9H,GACA,eAAwH,UAAhHzC,MAAM,gBAAqB,QAAK,gCAAE,GAAA2D,YAAA,GAAAA,WAAA,sBAAatD,SAAQ,KAAOqD,cAAc/G,OAAM,GAAQ,EAAA8F,SAAS,OAAI,gBAAS,GACxH,eAAwH,UAAhHzC,MAAM,gBAAqB,QAAK,gCAAE,GAAA4D,kBAAA,GAAAA,iBAAA,sBAAmBvD,UAAY,EAAAkC,gBAAkB,EAAAE,SAAS,cAAW,gBAAS,M,mBAGxH,eAaM,gCAbgBiB,cAAc/G,QAAM,SAA9BF,G,wBAAZ,eAaM,OAbuC6C,IAAK7C,GAAC,CACtCA,GAAK,GAAKoH,SAAQ,GAAU,EAAAtB,gB,iBAMvC,eAKM,MALN,GAKM,E,iBAJJ,eAGO,2BAHW,GAAC,SAAN5E,G,OAAb,eAGO,QAHe2B,IAAK3B,GAAC,C,iCACnB+F,cAAcjH,EAAC,MAAOkB,EAAC,KAAM,IACpC,GAAYA,EAAC,G,iBAAb,eAAsC,UAArB,S,qDATrB,eAKM,MALN,GAKM,E,iBAJJ,eAGO,2BAHW,GAAC,SAANA,G,OAAb,eAGO,QAHe2B,IAAK3B,GAAC,C,iCACnB+F,cAAcjH,EAAC,MAAOkB,EAAC,KAAM,IACpC,GAAYA,EAAC,G,iBAAb,eAAsC,UAArB,S,8CAWvB,GAAI,eAAyG,UAAjGqC,MAAM,gBAAqB,QAAK,gCAAE,GAAA8D,cAAA,GAAAA,aAAA,uBAAc,4CAC5D,eASM,MATN,GASM,CARJ,eAES,SAFT,GAAsJ,YAC5I,oBAAOC,cAAY,GAE7B,eAIM,MAJN,GAIM,E,iBAHN,eAEM,2BAFW,IAAE,SAAPtH,G,OAAZ,eAEM,OAFgB6C,IAAK7C,GAAC,CAC1B,eAAuF,KAApFuD,MAAM,gBAAgBgE,KAAK,IAAS,QAAK,mBAAE,GAAAC,oBAAoBxH,KAAI,WAAQ,eAAEA,GAAC,oB,SAKrF,G,KACcyH,mB,iBAAd,eAA+D,2BAAvBC,mBAAiB,I,sBAAM,G,KAChDC,kB,wCAAf,eAAuH,OAArF,uBAAoB,eAAE,EAAAC,UAAU,IAAC,eAAE,EAAAC,SAAS,wCAAqC,IAC5F,0B,KAATC,KAAKhG,M,iBAAnB,eAA6M,Q,eAAxJ,uBAAoB,oBAAOgG,KAAKC,MAAM,QAAK,oBAAOD,KAAKE,KAAK,IAAC,G,KAAiBF,KAAKG,Q,iBAAtB,eAA2C,UAAb,W,2BAA8BH,KAAKI,S,iBAAtB,eAA4C,UAAb,W,iDAI9L,eAsCM,MAtCN,GAsCM,CArCJ,eA2BM,MA3BN,GA2BM,CA1BJ,eACoC,SADpC,GACoC,C,kDADqEC,YAAY,IACrH,QACA,eAGK,KAHL,GAGK,CAFH,eAAgG,WAA5F,eAAuF,KAApF5E,MAAM,gBAAgBgE,KAAK,IAAS,QAAK,iCAAE,GAAAa,kBAAiB,cAAa,aAChF,eAA4F,WAAxF,eAAmF,KAAhF7E,MAAM,gBAAgBgE,KAAK,IAAS,QAAK,iCAAE,GAAAa,kBAAiB,YAAW,aAGvC,W,KAAVD,Y,iBAAjC,eAOM,MAPN,GAOM,CANJ,eACoC,SADpC,GACoC,C,2CAD8DtF,IAAG,UAAW,IAChH,QACA,eAGK,KAHL,GAGK,CAFH,eACwG,Y,mBADpG,eAC+F,gCADzEwF,cAAY,SAAxBxF,G,wBAAV,eAC+F,KAA5FA,IAAKA,EAAKU,MAAM,gBAAgBgE,KAAK,IAAS,QAAK,mBAAE,GAAAe,WAAWzF,K,eAAQA,EAAM,UAAH,kB,mCAItF,eAQM,MARN,GAQM,CAPJ,eACoC,SADpC,GACoC,C,6CADgE0F,MAAM9F,MAAM,IAChH,QACA,eAIK,KAJL,GAIK,CAHH,eAAgG,WAA5F,eAAuF,KAApFc,MAAM,gBAAgBgE,KAAK,IAAS,QAAK,iCAAE,GAAAiB,wBAAuB,WAAU,UACnF,eAAwG,WAApG,eAA+F,KAA5FjF,MAAM,gBAAgBgE,KAAK,IAAS,QAAK,iCAAE,GAAAiB,wBAAuB,eAAc,cACvF,eAAkG,WAA9F,eAAyF,KAAtFjF,MAAM,gBAAgBgE,KAAK,IAAS,QAAK,iCAAE,GAAAiB,wBAAuB,YAAW,iB,KAOxEC,SAAM,KAAW3C,gB,iBAAjC,eAKM,UAJ0B,SAAV,EAAAqC,YAAU,KAAsBI,MAAMG,U,wCAA5D,eAAyH,I,MAA7C,uBAAsB,GAAAC,sB,oCACrD,WAAV,EAAAR,YAAU,KAAuBI,MAAMG,U,wCAA1E,eAAmM,I,MAAjLE,IAAI,OAAsEC,cAAa,KAAOhG,IAAYiG,MAAO,EAAAT,aAAmB,uBAAsB,GAAAM,sB,4DAC/G,Y,KAAVJ,MAAM9F,MAAI,KAAuB8F,MAAMG,W,iBAA1F,eAAmN,I,MAA5LE,IAAI,aAAiFC,cAAa,KAAOhG,IAAYiG,MAAO,EAAAT,aAAmB,uBAAsB,GAAAM,sB,kFAC1H,S,KAAVJ,MAAM9F,MAAI,KAAoB8F,MAAMG,W,iBAA5F,eAAqN,I,MAAzLE,IAAI,aAA8EC,cAAa,KAAOhG,IAAYiG,MAAO,EAAAT,aAAmB,uBAAsB,GAAAM,sB,6GAMhM,eAOM,MAPN,GAOM,CANJ,GACkC,Q,KAATb,KAAKhG,MAAI,KAAoByG,MAAMG,U,wCAA5D,eAAqG,I,MAAzB,aAAY,GAAAK,Y,0BACvB,Q,KAATjB,KAAKhG,MAAI,KAAmByG,MAAMG,W,iBAA1F,eAAmI,I,MAAhHE,IAAI,sBAAmF,aAAY,GAAAG,Y,gDAChF,Q,KAATjB,KAAKhG,M,iBAAlC,eAA+J,I,MAA7G8G,IAAI,uBAA8BI,SAAQ,KAAOC,aAAmB,qBAAoB,GAAAC,oB,mEACxG,Q,KAATpB,KAAKhG,MAAI,KAAoByG,MAAMG,U,wCAA5D,eAA+K,I,MAAxGE,IAAI,kBAAyBI,SAAQ,KAAOC,aAAmB,qBAAoB,GAAAC,oB,6CACxH,Q,KAATpB,KAAKhG,MAAI,KAAmByG,MAAMG,W,iBAA3D,eAAuM,I,MAAjIlF,GAAG,sBAAsBoF,IAAI,kBAAyBI,SAAQ,KAAOC,aAAmB,qBAAoB,GAAAC,oB,+EAStL,GAAmD,GACnD,GAGA,eAAkI,IAA9GhE,aAAY,KAAOC,iBAAkBgE,aAAA,GAAWC,WAAW,gBAAgB5F,GAAG,mB,yBAGlG,eAWM,MAXN,GAWM,CAVN,eAIM,MAJN,GAIM,CAHJ,eAEM,MAFN,GAEM,CADJ,eAA+F,SAAxFc,KAAK,WAAWd,GAAG,eAAsBmD,QAAS,EAAA0C,IAAU,QAAK,oCAAOC,kB,uBAAiB,OAGpG,eAIM,MAJN,GAIM,CAHJ,eAEM,MAFN,GAEM,CADJ,eAAgG,SAAzFhF,KAAK,WAAWd,GAAG,gBAAuBmD,QAAS,EAAA4C,IAAU,QAAK,oCAAOC,kB,uBAAiB,W,2MCnSjG,eAAqB,SAAlB,kBAAc,G,IAKVhG,GAAG,aAAaD,MAAM,oC,0EAT/B,eA4BM,YAxBJ,GACA,eAAuL,KAApLC,GAAG,qBAA0BD,MAAK,YAAkC,KAAlB,EAAAkG,mBAAkB,WAAsC,KAAlB,EAAAA,mBAAkB,SAAoC,KAAlB,EAAAA,qB,eAA8B,EAAAC,oBAAkB,GAI/K,eAiBQ,QAjBR,GAiBQ,CAhBN,eAeQ,cAdN,eAaK,Y,iBAZH,eAWK,2BAXW,IAAE,SAAP1J,G,OAAX,eAWK,MAXsB6C,IAAK7C,EAAUwD,GAAE,QAAUxD,EAC/C,QAAK,mBAAE,EAAA6G,cAAc7G,EAAC,EAAI2J,IAC1B,cAAW,mCAAU,EAAAC,mBAAmB5J,EAAC,EAAI2J,KAAM,a,6CACrC,EAAAE,oBAAoB7J,EAAC,EAAI2J,KAAM,YAC3CpG,MAAK,c,wBAA4E,SAAS,EAAC,G,MAA2D,KAAlB,sBAAyB,sBAAoB,EAAC,E,MAA2D,KAAlB,sBAAyB,sBAAoB,EAAC,E,IAAwD,KAAlB,sBAAyB,sBAAoB,EAAC,I,eAMlW,EAAAuF,MAAM9I,EAAC,wD,gBAUN,IACb8B,KAAM,iBAENpC,KAAM,WACJ,MAAM,CAEJoJ,MAAO,CAAC,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,KAGzDgB,mBAAoB,IACpBL,mBAAoB,IACpBM,uBAAwB,IAI5BC,SAAU,CACRN,mBAAoB,WAClB,OAAmC,GAA/BO,KAAKF,uBACwB,KAA3BE,KAAKR,mBACAQ,KAAKnB,MAAMmB,KAAKH,oBAElBG,KAAKnB,MAAMmB,KAAKH,oBAAsBG,KAAKR,mBAErB,KAA3BQ,KAAKR,mBACAQ,KAAKnB,MAAMmB,KAAKH,oBAAsBG,KAAKF,uBAErB,KAA3BE,KAAKR,mBACAQ,KAAKnB,MAAMmB,KAAKH,oBAAsB,MAAQG,KAAKF,uBAErDE,KAAKnB,MAAMmB,KAAKH,oBAAsBG,KAAKR,mBAAqBQ,KAAKF,yBAIhFG,QAAS,CACPrD,cADO,SACOsD,EAAUC,GAClBA,EAAMC,QACRJ,KAAKL,mBAAmBO,EAAUC,IAGpCH,KAAKH,mBAAqBK,EAC1BF,KAAKR,mBAAqB,IACtBW,EAAME,OACRL,KAAKF,uBAAyB,EAEvBK,EAAMG,eAA+BC,GAAnBJ,EAAMK,WAC/BR,KAAKR,mBAAqB,IAC1BQ,KAAKF,uBAAyB,GAG9BE,KAAKF,uBAAyB,EAEhCE,KAAKS,MAAM,uBAAwBT,KAAKH,mBAAqBG,KAAKR,mBAAqBQ,KAAKF,uBAAwBE,KAAKP,sBAE3HE,mBApBO,SAoBYO,EAAUC,GAC3BH,KAAKH,mBAAqBK,EAC1BF,KAAKR,mBAAqB,IAC1BQ,KAAKF,uBAAyB,EAC1BK,EAAME,OACRL,KAAKF,uBAAyB,EAG9BE,KAAKF,uBAAyB,EAEhCE,KAAKS,MAAM,uBAAwBT,KAAKH,mBAAqBG,KAAKR,mBAAqBQ,KAAKF,uBAAwBE,KAAKP,qBAE3HG,oBAhCO,SAgCaM,GAClBF,KAAKH,mBAAqBK,EAC1BF,KAAKR,mBAAqB,IAC1BQ,KAAKF,uBAAyB,EAC9BE,KAAKS,MAAM,uBAAwBT,KAAKH,mBAAqBG,KAAKR,mBAAqBQ,KAAKF,uBAAwBE,KAAKP,qBAE3HiB,mBAtCO,SAsCYP,GACjB,IAAIvH,EAAMuH,EAAMvH,IAEhB,GAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,GAAK,CAChEuH,EAAMS,iBACN,IAAIC,EAAM,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,QAAQlI,GACpEoH,KAAKpD,cAAciE,EAAKV,QAEvB,GAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKQ,SAAS/H,GAAK,CACjEuH,EAAMS,iBACN,IAAI,EAAM,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKE,QAAQlI,GAChEoH,KAAKpD,cAAc,EAAKuD,QAGvB,GAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKQ,SAAS/H,IAAQuH,EAAMC,QAAQ,CACtFD,EAAMS,iBACN,IAAI,EAAM,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKE,QAAQlI,GACpEoH,KAAKL,mBAAmB,EAAKQ,QAG5B,GAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKQ,SAAS/H,IAAQuH,EAAME,OAAO,CACrFF,EAAMS,iBACN,IAAI,EAAM,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKE,QAAQlI,GACpEoH,KAAKJ,oBAAoB,EAAKO,QAE7B,GAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKQ,SAAS/H,GAAK,CACrEuH,EAAMS,iBACN,IAAI,EAAM,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKE,QAAQlI,GACpEoH,KAAKJ,oBAAoB,EAAKO,MAKtCY,QAxGa,WA0GXC,SAASC,iBAAiB,UAAWjB,KAAKU,qBAG5CQ,cA7Ga,WA8GXF,SAASG,oBAAoB,UAAWnB,KAAKU,sB,UC1IjD,GAAOU,OAAS,GAChB,GAAOC,UAAY,kBAEJ,U,GCNX,eAAyB,OAApB9H,GAAG,YAAU,S,iDADpB,eAEM,YADJ,KAKJ,IAAM+H,GAAK,EAAQ,QACnB,GAAwB,EAAQ,QAAxBC,GAAR,GAAQA,KAAMC,GAAd,GAAcA,MACdC,QAAQC,IAAIH,GAAKC,IAEF,QACb3J,KAAM,mBAEN8J,MAAM,CACJ/C,cAAegD,OACf/C,MAAOgD,OAGTpM,KAAM,WACJ,MAAM,CAEJqM,YAAa,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAG1BjC,mBAAoB,IACpBL,mBAAoB,IACpBM,uBAAwB,EAGxBiC,aAAc,IACdC,YAAa,CAAC,IAAI,KAAK,MAAM,KAAK,IAAI,KAAK,QAG3CC,KAAK,EACLC,MAAM,EACNxL,OAAO,EACPW,GAAG,EACH8K,GAAG,EACHC,GAAG,IAIPrC,SAAU,CAERsC,kBAAmB,WACjB,OAAOrC,KAAKnB,MAAMiC,QAAQd,KAAKpB,gBAGjC0D,cAAe,WACb,OAAOtC,KAAK+B,aAAa,GAG3BQ,eAAgB,WACd,OAA2B,IAApBvC,KAAK+B,cAIdS,YAAa,WACX,OAAOhB,GAAMtJ,IAAI8H,KAAKpB,cAAgB,UAAU6D,QAIpDxC,QAAS,CAEPyC,WAAY,SAAS9D,GAGnB,IAFA,IAAI+D,EAAcnB,GAAMtJ,IAAI0G,EAAgB,UAAU6D,MAE7C1M,EAAE,EAAGA,EAAE,EAAGA,IACjB4M,EAAY,CAAC,EAAE,EAAE,GAAG5M,KAAO,IAG7B,OADA4M,EAAY,IAAM,MACXA,GAETC,UAXO,SAWGF,GAAW,WACnBpB,GAAGuB,UAAU,KAAKC,SAASC,OAI3B,IAHA,IAAIC,EAAI1B,GAAG2B,OAAO,aAAaC,OAAO,KAAKC,KAAK,QAAS,KAAKA,KAAK,YAAa,cAAcnD,KAAKuC,eAAe,GAAG,KAAKvC,KAAKuC,eAAe,GAAG,KAC7Ia,EAAOpD,KAHQ,WAKVjK,GACP,IAAIsN,EAAM/B,GAAG+B,MACZC,YAAY,EAAKhB,eACjBiB,YAAY,EAAKxB,cACjByB,WAAW,EAAEzN,EAAE0N,KAAKC,GAAKhB,EAAWzM,QACpC0N,SAAS,GAAG5N,EAAE,GAAG0N,KAAKC,GAAKhB,EAAWzM,QAEvC+M,EAAEE,OAAO,QACJC,KAAK,IAAKE,GACVF,KAAK,KAAM,aAAapN,GACxBoN,KAAK,QAAS,cACdS,GAAG,SAAS,WAAWR,EAAKS,eAAe9N,MAC3C6N,GAAG,eAAe,SAASE,GAC1BA,EAAElD,iBACFwC,EAAKS,eAAe9N,MAErB6N,GAAG,aAAa,WACbtC,GAAG2B,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAE7DH,GAAG,YAAY,WACZtC,GAAG2B,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAGlEf,EAAEE,OAAO,QACRC,KAAK,MAAO,EAAKpB,aAAa,EAAKO,eAAe,EAAEmB,KAAKO,IAAI,EAAEjO,EAAE0N,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,KAC/GP,KAAK,MAAO,EAAKpB,aAAa,EAAKO,eAAe,EAAEmB,KAAKQ,IAAI,EAAElO,EAAE0N,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,KAC/GP,KAAK,QAAS,cACdA,KAAK,KAAM,aAAapN,GACxBmO,KAAKxB,EAAW3M,IAChB6N,GAAG,SAAS,WAAWR,EAAKS,eAAe9N,MAC3C6N,GAAG,eAAe,SAASE,GAC1BA,EAAElD,iBACFwC,EAAKS,eAAe9N,MAErB6N,GAAG,aAAa,WACbtC,GAAG2B,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAE7DH,GAAG,YAAY,WACZtC,GAAG2B,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAG9Df,EAAEE,OAAO,QACRC,KAAK,MAAO,EAAKpB,aAAa,EAAKQ,gBAAgB,EAAEkB,KAAKO,IAAI,EAAEjO,EAAE0N,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,KAChHP,KAAK,MAAO,EAAKpB,aAAa,EAAKQ,gBAAgB,EAAEkB,KAAKQ,IAAI,EAAElO,EAAE0N,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,KAChHP,KAAK,QAAS,cACde,KAAK,EAAKlC,YAAYjM,KA7ChBA,EAAE,EAAGA,EAAI2M,EAAWzM,OAAQF,IAAI,EAAhCA,GAgDXiN,EAAEE,OAAO,UACJC,KAAK,IAAI,GACTA,KAAK,IAAI,GACTA,KAAK,IAAInD,KAAKsC,eACda,KAAK,QAAS,eAGnBH,EAAEE,OAAO,QACJC,KAAK,QAAS,eACdA,KAAK,KAAK,eACVe,KAAK,KAEVC,uBAAwB,SAASC,GAC/B,OAAmC,GAA/BpE,KAAKF,uBACwB,OAA3BE,KAAKR,mBACA4E,EAEsB,OAA3BpE,KAAKR,mBACA4E,EAAO,IAEe,OAA3BpE,KAAKR,mBACA4E,EAEsB,OAA3BpE,KAAKR,mBACA4E,EAAO,IAEe,KAA3BpE,KAAKR,mBACA4E,EAEFA,EAAOpE,KAAKR,mBAEU,KAA3BQ,KAAKR,mBACA4E,EAAOpE,KAAKF,uBAEU,KAA3BE,KAAKR,mBACA4E,EAAO,MAAQpE,KAAKF,uBAEtBsE,EAAOpE,KAAKR,mBAAqBQ,KAAKF,wBAE/CuE,mBAvGO,SAuGYH,GACjB,IAAII,EAAchD,GAAG2B,OAAO,gBAC5BqB,EAAYJ,KAAKA,GAEjBI,EAAYP,QAAQ,cAAc,GAClCO,EAAYP,QAAQ,cAAc,GAClCO,EAAYP,QAAQ,YAAY,GACD,KAA3B/D,KAAKR,oBACP8B,GAAG2B,OAAO,gBAAgBc,QAAQ,cAAc,GAEnB,KAA3B/D,KAAKR,oBACP8E,EAAYP,QAAQ,cAAc,GAEL,KAA3B/D,KAAKR,oBACP8E,EAAYP,QAAQ,YAAY,IAGpCF,eAxHO,SAwHQ9N,GAEbiK,KAAKH,oBAAsBG,KAAK8B,YAAY/L,GAAKiK,KAAKnB,MAAMiC,QAAQd,KAAKpB,gBAAkB,GAC3F,IAAI2F,EAAkBvE,KAAKwC,YAAYzM,GACnCiK,KAAK3I,IACP2I,KAAKH,oBAAsBG,KAAKH,mBAAqB,GAAK,GAC1D0E,EAAkBvE,KAAKwC,aAAazM,EAAE,GAAG,GAChC,GAALA,IAC4B,GAA1BwO,EAAgBtO,QAA4C,KAA7BsO,EAAgBC,OAAO,GACxDD,EAAkBA,EAAgBC,OAAO,GAGzCD,GAAmB,KAGvBvE,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAExBQ,KAAKiC,KACPjC,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,IACtBQ,KAAKtJ,MACPsJ,KAAKR,mBAAqB,IAEnBQ,KAAKkC,OACZT,QAAQC,IAAI,QACZ1B,KAAKR,mBAAqB,MAGrBQ,KAAKtJ,OACZsJ,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAEnBQ,KAAKkC,MACZlC,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAEjBQ,KAAK3I,IAEd2I,KAAKF,uBAAyB,EAC1B,CAAC,EAAE,EAAE,GAAGa,SAAS5K,GACnBiK,KAAKR,mBAAqB,IAG1BQ,KAAKR,mBAAqB,KAG1BQ,KAAKmC,IACPnC,KAAKR,mBAAqB,KAAOQ,KAAKR,oBAEpCQ,KAAKoC,IACPpC,KAAKR,mBAAqB,KAAOQ,KAAKR,oBAExCQ,KAAKqE,mBAAmBrE,KAAKmE,uBAAuBI,IACpDvE,KAAKS,MAAM,uBAAwBT,KAAKH,mBAAqBG,KAAKR,mBAAqBQ,KAAKF,uBAAwBE,KAAKmE,uBAAuBI,IAGhJ,IAAK,IAAI,EAAE,EAAG,EAAE,EAAG,IACjBjD,GAAG2B,OAAO,cAAc,GAAGc,QAAQ,qBAAoB,GAEzDzC,GAAG2B,OAAO,cAAclN,GAAGgO,QAAQ,qBAAoB,IAEzDU,kBAtLO,SAsLWtE,GAChB,IAAIvH,EAAMuH,EAAMvH,IACL,OAAPA,IACFuH,EAAMS,iBACNZ,KAAKiC,KAAM,GAEF,SAAPrJ,IACFuH,EAAMS,iBACNZ,KAAKtJ,OAAQ,GAEJ,WAAPkC,IACFuH,EAAMS,iBACNZ,KAAKkC,MAAO,GAEV,CAAC,IAAI,KAAKvB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAK3I,GAAI,GAEP,CAAC,IAAI,KAAKsJ,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAKmC,GAAI,GAEP,CAAC,IAAI,KAAKxB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAKoC,GAAI,GAEP,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKzB,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,MAG9D8L,gBAjOO,SAiOSvE,GACd,IAAIvH,EAAMuH,EAAMvH,IACL,OAAPA,IACFuH,EAAMS,iBACNZ,KAAKiC,KAAM,GAEF,SAAPrJ,IACFuH,EAAMS,iBACNZ,KAAKtJ,OAAQ,GAEJ,WAAPkC,IACFuH,EAAMS,iBACNZ,KAAKkC,MAAO,GAEV,CAAC,IAAI,KAAKvB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAK3I,GAAI,GAEP,CAAC,IAAI,KAAKsJ,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAKmC,GAAI,GAEP,CAAC,IAAI,KAAKxB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAKoC,GAAI,KAKfrB,QAlTa,WAmTXf,KAAK4C,UAAU5C,KAAK0C,WAAW1C,KAAKpB,gBAGpCoC,SAASC,iBAAiB,UAAWjB,KAAKyE,mBAC1CzD,SAASC,iBAAiB,QAASjB,KAAK0E,kBAG1CxD,cA1Ta,WA2TXF,SAASG,oBAAoB,UAAWnB,KAAKyE,mBAC7CzD,SAASG,oBAAoB,QAASnB,KAAK0E,mB,UClU/C,GAAOtD,OAAS,GAED,U,8mBCDuD,eAAI,mB,sGALtE,GAKA,eAAkE,UAA1D9H,MAAM,mBAAwB,QAAK,8BAAE,EAAAqL,OAAA,EAAAA,MAAA,sBAAO,SAAc,I,OAIhE,GAAK,EAAQ,QAEJ,IACb9M,KAAM,eAENpC,KAAM,WACJ,MAAM,CACJ2M,GAAI,EACJwC,EAAG,IACHC,UAAW,EACXC,UAAW,IAIf/E,SAAU,GAGVE,QAAS,CACP0E,MADO,WAEL3E,KAAKoC,GAAK,EACVpC,KAAK4E,EAAI,IACT,GAAG/B,UAAU,WAAWC,SAASC,OACjC/C,KAAKlB,cAGPA,WARO,WASL,IAAIiG,GAAW/E,KAAKoC,EAAIpC,KAAKoC,EAAI,IAAM,GACnC4C,EAAU,GAAKhF,KAAK4E,EAAI5E,KAAK4E,EAAI,IAAM,GACvC5E,KAAKoC,EAAI,IACX2C,GAAW,GAETA,GAAW/E,KAAK6E,UAAYG,GAAWhF,KAAK8E,WAC9C9E,KAAK6E,SAAWE,EAChB/E,KAAK8E,SAAWE,EAChBhF,KAAKS,MAAM,aAAc,CAACT,KAAK6E,SAAU7E,KAAK8E,cAKpD/D,QArCa,WAsCX,IAAMkE,EAAc,IACdC,EAAS,EACTC,EAAa,EAEfC,EAAQpF,KAENqF,EAAc,GAAGC,OACtB1B,GAAG,QAAQ,SAAUE,GACpB,IAAIyB,EAAOvE,SAASwE,eAAe,cAAcC,wBAC7CC,GAAS5B,EAAE6B,YAAYC,QAAUL,EAAKnD,GAAG,GACzCyD,GAAS/B,EAAE6B,YAAYG,QAAUP,EAAKX,GAAG,GACzCc,EAAQ,MACVA,EAAQ,KAENA,EAAQ,IACVA,EAAQ,GAENG,EAAQ,MACVA,EAAQ,KAENA,EAAQ,IACVA,EAAQ,GAEVT,EAAMhD,EAAIsD,EACVN,EAAMR,EAAIiB,EACV,GAAGhD,UAAU,WACRM,KAAK,KAAMuC,GACXvC,KAAK,KAAM0C,GAChBT,EAAMtG,gBAEJiH,EAAM,GAAG9C,OAAO,eAGpB8C,EAAI7C,OAAO,QACRC,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAAS8B,GACd9B,KAAK,SAAU8B,GACf9B,KAAK,OAAQ,SACbA,KAAK,UAAW,IAEnB4C,EAAI7C,OAAO,QACRC,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAAS8B,GACd9B,KAAK,SAAU8B,GACf9B,KAAK,OAAQ,SACbA,KAAK,UAAW,GAChBY,QAAQ,cAAc,GACtBH,GAAG,aAAa,SAASE,GACxB,IAAIyB,EAAOvE,SAASwE,eAAe,cAAcC,wBAEjD,GAAG5C,UAAU,WAAWC,SAASC,OAEjCgD,EAAI7C,OAAO,UACRC,KAAK,MAAOW,EAAE8B,QAAUL,EAAKnD,GAAG,IAChCe,KAAK,MAAOW,EAAEgC,QAAUP,EAAKX,GAAG,IAChCzB,KAAK,IAAK,IACVA,KAAK,OAAQ,WACbY,QAAQ,UAAU,GAEnBsB,EAAYU,EAAIlD,UAAU,YAC1BuC,EAAMhD,GAAK0B,EAAE8B,QAAUL,EAAKnD,GAAG,GAC/BgD,EAAMR,GAAKd,EAAEgC,QAAUP,EAAKX,GAAG,GAC/BQ,EAAMtG,gBAGZuG,EAAYU,EAAIlD,UAAU,gBAG1B,IAAK,IAAI9M,EAAE,EAAGA,EAAEmP,EAAQnP,IACtBgQ,EAAI7C,OAAO,QACVC,KAAK,IAAKpN,EAAIkP,EAAcC,GAC5B/B,KAAK,IAAK,GACVA,KAAK,QAASgC,GACdhC,KAAK,SAAU8B,GACf9B,KAAK,OAAQ,SACbA,KAAK,UAAW,IAEjB4C,EAAI7C,OAAO,QACVC,KAAK,IAAK,GACVA,KAAK,IAAKpN,EAAIkP,EAAcC,GAC5B/B,KAAK,QAAS8B,GACd9B,KAAK,SAAUgC,GACfhC,KAAK,OAAQ,SACbA,KAAK,UAAW,IAGnB,GAAGN,UAAU,eAAemD,SAK9B9E,cAnIa,c,UCPf,GAAOE,OAAS,GAChB,GAAOC,UAAY,kBAEJ,U,+ECPR/H,MAAM,M,IACDC,GAAG,eAAeD,MAAM,oC,kHADlC,eAeM,MAfN,GAeM,CAdH,eAYO,QAZP,GAYO,CAXN,eAUQ,e,iBATN,eAQK,2BARW,GAAC,SAANvD,G,OAAX,eAQK,MARqB6C,IAAK7C,EAAUwD,GAAE,UAAYxD,EAChD,QAAK,mBAAE,EAAAkQ,gBAAgBlQ,EAAC,IACtBuD,MAAK,gB,SAA8D,EAAC,GAAM,oB,CAGjF,eAEK,WADH,eAA2H,GAA1Ge,KAAK,aAAad,GAAG,WAAkB0B,aAAc,EAAA8D,SAAShJ,EAAC,GAAYoF,OAAQ,EAAAC,K,2EAUjG,IACbvD,KAAM,eAEN8J,MAAM,CACJ5C,SAAU8C,OAGZpM,KAAM,WACJ,MAAM,CACJyQ,iBAAkB,EAElB9K,IAAK,CACH+K,WAAY,EACZC,kBAAmB,GACnBC,SAAU,GACVC,SAAU,GACVC,YAAa,MAKnBxG,SAAU,GAGVE,QAAS,CACP0E,MADO,WAEL3E,KAAKkG,iBAAiB,GAIxBD,gBANO,SAMSlQ,GACdiK,KAAKkG,gBAAkBnQ,EACvBiK,KAAKS,MAAM,qBAAsB1K,IAInC2K,mBAZO,SAYYP,GACjB,IAAIvH,EAAMuH,EAAMvH,IAEhB,OAAOA,IAIXmI,QA3Ca,WA6CXC,SAASC,iBAAiB,UAAWjB,KAAKU,qBAG5CQ,cAhDa,WAiDXF,SAASG,oBAAoB,UAAWnB,KAAKU,sB,UChEjD,GAAOU,OAAS,GAChB,GAAOC,UAAY,kBAEJ,U,+ECPJ9H,GAAG,eAAeD,MAAM,oC,kHAA/B,eAWM,QAXN,GAWM,CAVN,eASQ,e,iBARN,eAOK,2BAPW,GAAC,SAANvD,G,OAAX,eAOK,MAPqB6C,IAAK7C,EAAUwD,GAAE,UAAYxD,EAC9CuD,MAAK,gB,SAA4D,EAAC,GAAM,oB,CAG/E,eAEK,WADH,eAA2H,GAA1Ge,KAAK,aAAad,GAAG,WAAkB0B,aAAc,EAAA8D,SAAShJ,EAAC,GAAYoF,OAAQ,EAAAC,K,+DAS/F,IACbvD,KAAM,mBAEN8J,MAAM,CACJ5C,SAAU8C,OAGZpM,KAAM,WACJ,MAAM,CACJyQ,iBAAkB,EAElB9K,IAAK,CACH+K,WAAY,EACZC,kBAAmB,GACnBC,SAAU,GACVC,SAAU,GACVC,YAAa,MAKnBxG,SAAU,GAGVE,QAAS,CACP0E,MADO,WAEL3E,KAAKkG,iBAAiB,GAIxBD,gBANO,SAMSlQ,GACdiK,KAAKkG,gBAAkBnQ,EACvBiK,KAAKS,MAAM,qBAAsB1K,IAInC2K,mBAZO,SAYYP,GACjB,IAAIvH,EAAMuH,EAAMvH,IAEhB,OAAOA,IAIXmI,QA3Ca,WA6CXC,SAASC,iBAAiB,UAAWjB,KAAKU,qBAG5CQ,cAhDa,WAiDXF,SAASG,oBAAoB,UAAWnB,KAAKU,sB,UC7DjD,GAAOU,OAAS,GAChB,GAAOC,UAAY,kBAEJ,U,GCNX,eAAyB,OAApB9H,GAAG,YAAU,S,iDADpB,eAEM,YADJ,KAKJ,IAAM,GAAK,EAAQ,QACnB,GAAwB,EAAQ,QAAxB,GAAR,GAAQgI,KAAM,GAAd,GAAcC,MACdC,QAAQC,IAAI,GAAK,IAEF,QACb7J,KAAM,wBAEN8J,MAAM,CACJ/C,cAAegD,OACf/C,MAAOgD,OAGTpM,KAAM,WACJ,MAAM,CAEJqM,YAAa,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAG1BjC,mBAAoB,IACpBL,mBAAoB,IACpBM,uBAAwB,EAGxBiC,aAAc,IACdC,YAAa,CAAC,IAAI,KAAK,MAAM,KAAK,IAAI,KAAK,QAG3CC,KAAK,EACLC,MAAM,EACNxL,OAAO,EACPW,GAAG,EAGHmP,OAAQ,IAIZzG,SAAU,CAERsC,kBAAmB,WACjB,OAAOrC,KAAKnB,MAAMiC,QAAQd,KAAKpB,gBAGjC0D,cAAe,WACb,OAAOtC,KAAK+B,aAAa,GAG3BQ,eAAgB,WACd,OAA2B,IAApBvC,KAAK+B,cAIdS,YAAa,WACX,OAAO,GAAMtK,IAAI8H,KAAKpB,cAAgB,UAAU6D,QAIpDxC,QAAS,CAEPyC,WAAY,SAAS9D,GAGnB,IAFA,IAAI+D,EAAc,GAAMzK,IAAI0G,EAAgB,UAAU6D,MAE7C1M,EAAE,EAAGA,EAAE,EAAGA,IACjB4M,EAAY,CAAC,EAAE,EAAE,GAAG5M,KAAO,IAG7B,OADA4M,EAAY,IAAM,MACXA,GAETC,UAXO,SAWGF,GAAqB,WAAT8D,EAAS,uDAAF,EAC3BxG,KAAKwG,QAAUxG,KAAKwG,OAASA,GAAU,EACvCA,EAASxG,KAAKwG,OACd,GAAG3D,UAAU,KAAKC,SAASC,OAI3B,IAHA,IAAIC,EAAI,GAAGC,OAAO,aAAaC,OAAO,KAAKC,KAAK,QAAS,KAAKA,KAAK,YAAa,cAAcnD,KAAKuC,eAAe,GAAG,KAAKvC,KAAKuC,eAAe,GAAG,KAC7Ia,EAAOpD,KALkB,WAOpBjK,GACP,IAAIsN,EAAM,GAAGA,MACZC,YAAY,EAAKhB,eACjBiB,YAAY,EAAKxB,cACjByB,YAAiBzN,EAAIyQ,EAAS,GAAK,EAAxB,EAA4B/C,KAAKC,GAAKhB,EAAWzM,OAASwN,KAAKC,GAAKhB,EAAWzM,QAC1F0N,SAAS,IAAO5N,EAAIyQ,EAAS,GAAK,EAAG,GAAG/C,KAAKC,GAAKhB,EAAWzM,OAASwN,KAAKC,GAAKhB,EAAWzM,QAE5F+M,EAAEE,OAAO,QACJC,KAAK,IAAKE,GACVF,KAAK,KAAM,aAAapN,GACxBoN,KAAK,QAAS,cACdS,GAAG,SAAS,WAAWR,EAAKS,eAAe9N,MAC3C6N,GAAG,eAAe,SAASE,GAC1BA,EAAElD,iBACFwC,EAAKS,eAAe9N,MAErB6N,GAAG,aAAa,WACb,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAE7DH,GAAG,YAAY,WACZ,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAGlEf,EAAEE,OAAO,QACRC,KAAK,MAAO,EAAKpB,aAAa,EAAKO,eAAe,EAAEmB,KAAKO,KAAQjO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC9JkN,KAAK,MAAO,EAAKpB,aAAa,EAAKO,eAAe,EAAEmB,KAAKQ,KAAQlO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC9JkN,KAAK,QAAS,cACdA,KAAK,KAAM,aAAapN,GACxBmO,KAAKxB,EAAW3M,IAChB6N,GAAG,SAAS,WAAWR,EAAKS,eAAe9N,MAC3C6N,GAAG,eAAe,SAASE,GAC1BA,EAAElD,iBACFwC,EAAKS,eAAe9N,MAErB6N,GAAG,aAAa,WACb,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAE7DH,GAAG,YAAY,WACZ,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAG9Df,EAAEE,OAAO,QACRC,KAAK,MAAO,EAAKpB,aAAa,EAAKQ,gBAAgB,EAAEkB,KAAKO,KAAQjO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC/JkN,KAAK,MAAO,EAAKpB,aAAa,EAAKQ,gBAAgB,EAAEkB,KAAKQ,KAAQlO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC/JkN,KAAK,QAAS,cACde,KAAK,EAAKlC,YAAYjM,KA7ChBA,EAAE,EAAGA,EAAI2M,EAAWzM,OAAQF,IAAI,EAAhCA,GAgDXiN,EAAEE,OAAO,UACJC,KAAK,IAAI,GACTA,KAAK,IAAI,GACTA,KAAK,IAAInD,KAAKsC,eACda,KAAK,QAAS,eAGnBH,EAAEE,OAAO,QACJC,KAAK,QAAS,eACdA,KAAK,KAAK,eACVe,KAAK,KAEVC,uBAAwB,SAASC,GAC/B,OAAmC,GAA/BpE,KAAKF,uBACwB,KAA3BE,KAAKR,mBACA4E,EAEFA,EAAOpE,KAAKR,mBAEU,KAA3BQ,KAAKR,mBACA4E,EAAOpE,KAAKF,uBAEU,KAA3BE,KAAKR,mBACA4E,EAAO,MAAQpE,KAAKF,uBAEtBsE,EAAOpE,KAAKR,mBAAqBQ,KAAKF,wBAE/CuE,mBA7FO,SA6FYH,GACjB,IAAII,EAAc,GAAGrB,OAAO,gBAC5BqB,EAAYJ,KAAKA,GAEjBI,EAAYP,QAAQ,cAAc,GAClCO,EAAYP,QAAQ,cAAc,GAClCO,EAAYP,QAAQ,YAAY,GACD,KAA3B/D,KAAKR,oBACP,GAAGyD,OAAO,gBAAgBc,QAAQ,cAAc,GAEnB,KAA3B/D,KAAKR,oBACP8E,EAAYP,QAAQ,cAAc,GAEL,KAA3B/D,KAAKR,oBACP8E,EAAYP,QAAQ,YAAY,IAGpCF,eA9GO,SA8GQ9N,EAAG0Q,GAChB1Q,GAAMA,EAAIiK,KAAKwG,OAAS,GAAK,EAC7B/E,QAAQC,IAAI3L,GAEZiK,KAAKH,oBAAsBG,KAAK8B,YAAY/L,GAAKiK,KAAKnB,MAAMiC,QAAQd,KAAKpB,gBAAkB,GAC3F,IAAI2F,EAAkBvE,KAAKwC,YAAYzM,GACnCiK,KAAK3I,IACP2I,KAAKH,oBAAsBG,KAAKH,mBAAqB,GAAK,GAC1D0E,EAAkBvE,KAAKwC,aAAazM,EAAE,GAAG,GAChC,GAALA,IAC4B,GAA1BwO,EAAgBtO,QAA4C,KAA7BsO,EAAgBC,OAAO,GACxDD,EAAkBA,EAAgBC,OAAO,GAGzCD,GAAmB,KAGvBvE,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAExBQ,KAAKiC,KACPjC,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,IACtBQ,KAAKtJ,MACPsJ,KAAKR,mBAAqB,IAEnBQ,KAAKkC,OACZlC,KAAKR,mBAAqB,MAGrBQ,KAAKtJ,OACZsJ,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAEnBQ,KAAKkC,MACZlC,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAEjBQ,KAAK3I,IAEd2I,KAAKF,uBAAyB,EAC1B,CAAC,EAAE,EAAE,GAAGa,SAAS5K,GACnBiK,KAAKR,mBAAqB,IAG1BQ,KAAKR,mBAAqB,KAG9BQ,KAAKqE,mBAAmBrE,KAAKmE,uBAAuBI,IAE/CkC,GACHzG,KAAKS,MAAM,uBAAwBT,KAAKH,mBAAqBG,KAAKR,mBAAqBQ,KAAKF,uBAAwBE,KAAKmE,uBAAuBI,IAIlJ,IAAK,IAAI,EAAE,EAAG,EAAE,EAAG,IACjB,GAAGtB,OAAO,cAAc,GAAGc,QAAQ,qBAAoB,GAEzD,GAAGd,OAAO,cAAclN,GAAGgO,QAAQ,qBAAoB,IAEzDU,kBA1KO,SA0KWtE,GAChB,IAAIvH,EAAMuH,EAAMvH,IACL,OAAPA,IACFuH,EAAMS,iBACNZ,KAAKiC,KAAM,GAEF,SAAPrJ,IACFuH,EAAMS,iBACNZ,KAAKtJ,OAAQ,GAEJ,WAAPkC,IACFuH,EAAMS,iBACNZ,KAAKkC,MAAO,GAEV,CAAC,IAAI,KAAKvB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAK3I,GAAI,GAEP,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKsJ,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,MAG9D8L,gBA7MO,SA6MSvE,GACd,IAAIvH,EAAMuH,EAAMvH,IACL,OAAPA,IACFuH,EAAMS,iBACNZ,KAAKiC,KAAM,GAEF,SAAPrJ,IACFuH,EAAMS,iBACNZ,KAAKtJ,OAAQ,GAEJ,WAAPkC,IACFuH,EAAMS,iBACNZ,KAAKkC,MAAO,GAEV,CAAC,IAAI,KAAKvB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAK3I,GAAI,IAKbqP,cAlOO,SAkOO7F,GACZb,KAAK4C,UAAU5C,KAAK0C,WAAW1C,KAAKpB,eAAgBiC,GACpDb,KAAK6D,eAAehD,GAAK,KAI7BE,QA7Ra,WA8RXf,KAAK4C,UAAU5C,KAAK0C,WAAW1C,KAAKpB,gBAGpCoC,SAASC,iBAAiB,UAAWjB,KAAKyE,mBAC1CzD,SAASC,iBAAiB,QAASjB,KAAK0E,kBAG1CxD,cArSa,WAsSXF,SAASG,oBAAoB,UAAWnB,KAAKyE,mBAC7CzD,SAASG,oBAAoB,QAASnB,KAAK0E,mB,UC7S/C,GAAOtD,OAAS,GAED,U,GCLX,eAAyB,OAApB7H,GAAG,YAAU,S,iDADpB,eAEM,YADJ,KAKJ,IAAM,GAAK,EAAQ,QACnB,GAAwB,EAAQ,QAAxB,GAAR,GAAQgI,KAAM,GAAd,GAAcC,MACdC,QAAQC,IAAI,GAAK,IAEF,QACb7J,KAAM,6BAEN8J,MAAM,CACJ/C,cAAegD,OACf/C,MAAOgD,OAGTpM,KAAM,WACJ,MAAM,CAEJqM,YAAa,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAG1BjC,mBAAoB,IACpBL,mBAAoB,IACpBM,uBAAwB,EAGxBiC,aAAc,IACdC,YAAa,CAAC,IAAI,KAAK,MAAM,KAAK,IAAI,KAAK,QAG3CC,KAAK,EACLC,MAAM,EACNxL,OAAO,EACPW,GAAG,EAGHmP,OAAQ,IAIZzG,SAAU,CAERsC,kBAAmB,WACjB,OAAOrC,KAAKnB,MAAMiC,QAAQd,KAAKpB,gBAGjC0D,cAAe,WACb,OAAOtC,KAAK+B,aAAa,GAG3BQ,eAAgB,WACd,OAA2B,IAApBvC,KAAK+B,cAIdS,YAAa,WACX,OAAO,GAAMtK,IAAI8H,KAAKpB,cAAgB,UAAU6D,QAIpDxC,QAAS,CAEPyC,WAAY,SAAS9D,GAGnB,IAFA,IAAI+D,EAAc,GAAMzK,IAAI0G,EAAgB,UAAU6D,MAE7C1M,EAAE,EAAGA,EAAE,EAAGA,IACjB4M,EAAY,CAAC,EAAE,EAAE,GAAG5M,KAAO,IAG7B,OADA4M,EAAY,IAAM,MACXA,GAETC,UAXO,SAWGF,GAAqB,WAAT8D,EAAS,uDAAF,EAC3BxG,KAAKwG,QAAUxG,KAAKwG,OAASA,GAAU,EACvCA,EAASxG,KAAKwG,OACd,GAAG3D,UAAU,KAAKC,SAASC,OAI3B,IAHA,IAAIC,EAAI,GAAGC,OAAO,aAAaC,OAAO,KAAKC,KAAK,QAAS,KAAKA,KAAK,YAAa,cAAcnD,KAAKuC,eAAe,GAAG,KAAKvC,KAAKuC,eAAe,GAAG,KAC7Ia,EAAOpD,KALkB,WAOpBjK,GACP,IAAIsN,EAAM,GAAGA,MACZC,YAAY,EAAKhB,eACjBiB,YAAY,EAAKxB,cACjByB,YAAiBzN,EAAIyQ,EAAS,GAAK,EAAxB,EAA4B/C,KAAKC,GAAKhB,EAAWzM,OAASwN,KAAKC,GAAKhB,EAAWzM,QAC1F0N,SAAS,IAAO5N,EAAIyQ,EAAS,GAAK,EAAG,GAAG/C,KAAKC,GAAKhB,EAAWzM,OAASwN,KAAKC,GAAKhB,EAAWzM,QAE5F+M,EAAEE,OAAO,QACJC,KAAK,IAAKE,GACVF,KAAK,KAAM,aAAapN,GACxBoN,KAAK,QAAS,cACdS,GAAG,SAAS,WAAWR,EAAKS,eAAe9N,MAC3C6N,GAAG,eAAe,SAASE,GAC1BA,EAAElD,iBACFwC,EAAKS,eAAe9N,MAErB6N,GAAG,aAAa,WACb,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAE7DH,GAAG,YAAY,WACZ,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAGlEf,EAAEE,OAAO,QACRC,KAAK,MAAO,EAAKpB,aAAa,EAAKO,eAAe,EAAEmB,KAAKO,KAAQjO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC9JkN,KAAK,MAAO,EAAKpB,aAAa,EAAKO,eAAe,EAAEmB,KAAKQ,KAAQlO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC9JkN,KAAK,QAAS,cACdA,KAAK,KAAM,aAAapN,GACxBmO,KAAKxB,EAAW3M,IAChB6N,GAAG,SAAS,WAAWR,EAAKS,eAAe9N,MAC3C6N,GAAG,eAAe,SAASE,GAC1BA,EAAElD,iBACFwC,EAAKS,eAAe9N,MAErB6N,GAAG,aAAa,WACb,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAE7DH,GAAG,YAAY,WACZ,GAAGX,OAAO,cAAclN,GAAGgO,QAAQ,wBAAuB,MAG9Df,EAAEE,OAAO,QACRC,KAAK,MAAO,EAAKpB,aAAa,EAAKQ,gBAAgB,EAAEkB,KAAKO,KAAQjO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC/JkN,KAAK,MAAO,EAAKpB,aAAa,EAAKQ,gBAAgB,EAAEkB,KAAKQ,KAAQlO,EAAIyQ,EAAS,GAAK,EAAtB,EAAyB/C,KAAKC,GAAKhB,EAAWzM,QAAe,EAAE,EAAN,IAASwN,KAAKC,GAAKD,KAAKC,GAAKhB,EAAWzM,SAC/JkN,KAAK,QAAS,cACde,KAAK,EAAKlC,YAAYjM,KA7ChBA,EAAE,EAAGA,EAAI2M,EAAWzM,OAAQF,IAAI,EAAhCA,GAgDXiN,EAAEE,OAAO,UACJC,KAAK,IAAI,GACTA,KAAK,IAAI,GACTA,KAAK,IAAInD,KAAKsC,eACda,KAAK,QAAS,eAGnBH,EAAEE,OAAO,QACJC,KAAK,QAAS,eACdA,KAAK,KAAK,eACVe,KAAK,KAEVC,uBAAwB,SAASC,GAC/B,OAAmC,GAA/BpE,KAAKF,uBACwB,KAA3BE,KAAKR,mBACA4E,EAEFA,EAAOpE,KAAKR,mBAEU,KAA3BQ,KAAKR,mBACA4E,EAAOpE,KAAKF,uBAEU,KAA3BE,KAAKR,mBACA4E,EAAO,MAAQpE,KAAKF,uBAEtBsE,EAAOpE,KAAKR,mBAAqBQ,KAAKF,wBAE/CuE,mBA7FO,SA6FYH,GACjB,IAAII,EAAc,GAAGrB,OAAO,gBAC5BqB,EAAYJ,KAAKA,GAEjBI,EAAYP,QAAQ,cAAc,GAClCO,EAAYP,QAAQ,cAAc,GAClCO,EAAYP,QAAQ,YAAY,GACD,KAA3B/D,KAAKR,oBACP,GAAGyD,OAAO,gBAAgBc,QAAQ,cAAc,GAEnB,KAA3B/D,KAAKR,oBACP8E,EAAYP,QAAQ,cAAc,GAEL,KAA3B/D,KAAKR,oBACP8E,EAAYP,QAAQ,YAAY,IAGpCF,eA9GO,SA8GQ9N,EAAG0Q,GAChB1Q,GAAMA,EAAIiK,KAAKwG,OAAS,GAAK,EAC7B/E,QAAQC,IAAI3L,GAEZiK,KAAKH,oBAAsBG,KAAK8B,YAAY/L,GAAKiK,KAAKnB,MAAMiC,QAAQd,KAAKpB,gBAAkB,GAC3F,IAAI2F,EAAkBvE,KAAKwC,YAAYzM,GACnCiK,KAAK3I,IACP2I,KAAKH,oBAAsBG,KAAKH,mBAAqB,GAAK,GAC1D0E,EAAkBvE,KAAKwC,aAAazM,EAAE,GAAG,GAChC,GAALA,IAC4B,GAA1BwO,EAAgBtO,QAA4C,KAA7BsO,EAAgBC,OAAO,GACxDD,EAAkBA,EAAgBC,OAAO,GAGzCD,GAAmB,KAGvBvE,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAExBQ,KAAKiC,KACPjC,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,IACtBQ,KAAKtJ,MACPsJ,KAAKR,mBAAqB,IAEnBQ,KAAKkC,OACZlC,KAAKR,mBAAqB,MAGrBQ,KAAKtJ,OACZsJ,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAEnBQ,KAAKkC,MACZlC,KAAKF,uBAAyB,EAC9BE,KAAKR,mBAAqB,KAEjBQ,KAAK3I,IAEd2I,KAAKF,uBAAyB,EAC1B,CAAC,EAAE,EAAE,GAAGa,SAAS5K,GACnBiK,KAAKR,mBAAqB,IAG1BQ,KAAKR,mBAAqB,KAG9BQ,KAAKqE,mBAAmBrE,KAAKmE,uBAAuBI,IAE/CkC,GACHzG,KAAKS,MAAM,uBAAwBT,KAAKH,mBAAqBG,KAAKR,mBAAqBQ,KAAKF,uBAAwBE,KAAKmE,uBAAuBI,IAIlJ,IAAK,IAAI,EAAE,EAAG,EAAE,EAAG,IACjB,GAAGtB,OAAO,cAAc,GAAGc,QAAQ,qBAAoB,GAEzD,GAAGd,OAAO,cAAclN,GAAGgO,QAAQ,qBAAoB,IAEzDU,kBA1KO,SA0KWtE,GAChB,IAAIvH,EAAMuH,EAAMvH,IACL,OAAPA,IACFuH,EAAMS,iBACNZ,KAAKiC,KAAM,GAEF,SAAPrJ,IACFuH,EAAMS,iBACNZ,KAAKtJ,OAAQ,GAEJ,WAAPkC,IACFuH,EAAMS,iBACNZ,KAAKkC,MAAO,GAEV,CAAC,IAAI,KAAKvB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAK3I,GAAI,GAEP,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKsJ,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,KAExD,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK+H,SAAS/H,KACzCuH,EAAMS,iBACNZ,KAAK6D,eAAe,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK/C,QAAQlI,MAG9D8L,gBA7MO,SA6MSvE,GACd,IAAIvH,EAAMuH,EAAMvH,IACL,OAAPA,IACFuH,EAAMS,iBACNZ,KAAKiC,KAAM,GAEF,SAAPrJ,IACFuH,EAAMS,iBACNZ,KAAKtJ,OAAQ,GAEJ,WAAPkC,IACFuH,EAAMS,iBACNZ,KAAKkC,MAAO,GAEV,CAAC,IAAI,KAAKvB,SAAS/H,KACrBuH,EAAMS,iBACNZ,KAAK3I,GAAI,IAKbqP,cAlOO,SAkOO7F,GACZb,KAAK4C,UAAU5C,KAAK0C,WAAW1C,KAAKpB,eAAgBiC,GACpDb,KAAK6D,eAAehD,GAAK,KAI7BE,QA7Ra,WA8RXf,KAAK4C,UAAU5C,KAAK0C,WAAW1C,KAAKpB,gBAGpCoC,SAASC,iBAAiB,UAAWjB,KAAKyE,mBAC1CzD,SAASC,iBAAiB,QAASjB,KAAK0E,kBAG1CxD,cArSa,WAsSXF,SAASG,oBAAoB,UAAWnB,KAAKyE,mBAC7CzD,SAASG,oBAAoB,QAASnB,KAAK0E,mB,UC7S/C,GAAOtD,OAAS,GAED,U,qrBCNb,eAOM,YANJ,GAKA,eAAkE,UAA1D9H,MAAM,mBAAwB,QAAK,8BAAE,EAAAqL,OAAA,EAAAA,MAAA,sBAAO,cAKlD,GAAK,EAAQ,QAEJ,IACb9M,KAAM,oBAENpC,KAAM,WACJ,MAAM,CACJ2M,GAAI,EACJwC,EAAG,IACHC,UAAW,EACXC,UAAW,IAIf/E,SAAU,GAGVE,QAAS,CACP0E,MADO,WAEL3E,KAAKoC,GAAK,EACVpC,KAAK4E,EAAI,IACT,GAAG/B,UAAU,WAAWC,SAASC,OACjC/C,KAAKlB,cAGPA,WARO,WASL,IAAIiG,GAAW/E,KAAKoC,EAAIpC,KAAKoC,EAAI,KAAO,IACpC4C,EAAU,GAAKhF,KAAK4E,EAAI5E,KAAK4E,EAAI,KAAO,IACxC5E,KAAKoC,EAAI,IACX2C,GAAW,GAETA,GAAW/E,KAAK6E,UAAYG,GAAWhF,KAAK8E,WAC9C9E,KAAK6E,SAAWE,EAChB/E,KAAK8E,SAAWE,EAChBhF,KAAKS,MAAM,aAAc,CAAe,EAAdT,KAAK6E,SAA0B,EAAd7E,KAAK8E,aAIpD6B,WArBO,SAqBIjB,EAAOG,GAChB,GAAGhD,UAAU,WAAWC,SAASC,OAEjC,GAAGE,OAAO,eAAeC,OAAO,UAC7BC,KAAK,KAAMuC,GACXvC,KAAK,KAAM0C,GACX1C,KAAK,IAAK,IACVA,KAAK,OAAQ,WACbY,QAAQ,UAAU,GAErB/D,KAAKoC,EAAIsD,EACT1F,KAAK4E,EAAIiB,EACT7F,KAAKlB,eAITiC,QApDa,WAqDX,IAAM6F,EAAgB,IAChBC,EAAgB,IAChBC,EAAW,EACXC,EAAW,EACX5B,EAAa,EAEfC,EAAQpF,KAENqF,EAAc,GAAGC,OACtB1B,GAAG,QAAQ,SAAUE,GACpB,IAAIyB,EAAOvE,SAASwE,eAAe,cAAcC,wBAC7CC,GAAS5B,EAAE6B,YAAYC,QAAUL,EAAKnD,GAAG,GACzCyD,GAAS/B,EAAE6B,YAAYG,QAAUP,EAAKX,GAAG,GACzCc,EAAQkB,IACVlB,EAAQkB,EAAgB,GAEtBlB,EAAQ,IACVA,EAAQ,GAENG,EAAQgB,IACVhB,EAAQgB,EAAgB,GAEtBhB,EAAQ,IACVA,EAAQ,GAEVT,EAAMhD,EAAIsD,EACVN,EAAMR,EAAIiB,EACV,GAAGhD,UAAU,WACRM,KAAK,KAAMuC,GACXvC,KAAK,KAAM0C,GAChBT,EAAMtG,gBAEJiH,EAAM,GAAG9C,OAAO,eAGpB8C,EAAI7C,OAAO,QACRC,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAASyD,GACdzD,KAAK,SAAU0D,GACf1D,KAAK,OAAQ,SACbA,KAAK,UAAW,IAEnB4C,EAAI7C,OAAO,QACRC,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAASyD,GACdzD,KAAK,SAAU0D,GACf1D,KAAK,OAAQ,SACbA,KAAK,UAAW,GAChBY,QAAQ,cAAc,GACtBH,GAAG,aAAa,SAASE,GACxB,IAAIyB,EAAOvE,SAASwE,eAAe,cAAcC,wBAEjD,GAAG5C,UAAU,WAAWC,SAASC,OAEjCgD,EAAI7C,OAAO,UACRC,KAAK,MAAOW,EAAE8B,QAAUL,EAAKnD,GAAG,IAChCe,KAAK,MAAOW,EAAEgC,QAAUP,EAAKX,GAAG,IAChCzB,KAAK,IAAK,IACVA,KAAK,OAAQ,WACbY,QAAQ,UAAU,GAEnBsB,EAAYU,EAAIlD,UAAU,YAC1BuC,EAAMhD,GAAK0B,EAAE8B,QAAUL,EAAKnD,GAAG,GAC/BgD,EAAMR,GAAKd,EAAEgC,QAAUP,EAAKX,GAAG,GAC/BQ,EAAMtG,gBAGZuG,EAAYU,EAAIlD,UAAU,gBAG1B,IAAK,IAAI9M,EAAE,EAAGA,EAAE+Q,EAAU/Q,IACxBgQ,EAAI7C,OAAO,QACVC,KAAK,IAAKpN,EAAI6Q,EAAgBE,GAC9B3D,KAAK,IAAK,GACVA,KAAK,QAASgC,GACdhC,KAAK,SAAU0D,GACf1D,KAAK,OAAQ,SACbA,KAAK,UAAW,IAGnB,IAAK,IAAI,EAAE,EAAG,EAAE4D,EAAU,IACxBhB,EAAI7C,OAAO,QACVC,KAAK,IAAK,GACVA,KAAK,IAAK,EAAI0D,EAAgBE,GAC9B5D,KAAK,QAASyD,GACdzD,KAAK,SAAUgC,GACfhC,KAAK,OAAQ,SACbA,KAAK,UAAW,IAGnB,GAAGN,UAAU,eAAemD,SAK9B9E,cAtJa,c,UCTf,GAAOE,OAAS,GAChB,GAAOC,UAAY,kBAEJ,UhBmTT2F,GAAQ,EAAQ,QAASC,QACzB,GAAK,EAAQ,QACbC,GAAK,EAAQ,QACbC,GAAI,EAAQ,QACZC,GAAO,EAAQ,QACrB,GAAkB,EAAQ,QAAnBC,GAAP,GAAOA,QACDC,GAAO,EAAQ,QACrB7F,QAAQC,IAAIyF,IACZ,IAAII,GAAS,IAAIL,GAAGM,gBAAgB,qEAGrB,IACb3P,KAAM,MACN4P,WAAY,CACVC,kBACAC,oBACAC,gBACAC,gBACAC,oBACAC,yBACAC,8BACAC,sBAEFxS,KAAM,WACJ,MAAM,CAEJyS,aAAc,GACdC,OAAO,EACPC,UAAW,EACXhK,aAAc,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAE3EiK,mBAAoB,GACpBC,cAAe,GAGfC,QAAS,GAET3K,QAAS,EACTD,SAAU,EAEV7C,OAAQ,MACRC,SAAU,GACVC,QAAS,GACTP,SAAU,GAEVS,iBAAkB,EAClBsN,uBAAwB,EACxBC,qBAAsB,EACtBC,qBAAsB,EACtBrN,yBAA0B,CAACoH,MAAM,CAAC,CAACkG,MAAM,GAAIC,MAAM,EAAGC,IAAI,KAAMC,UAAW,IAC3EC,cAAe,CAACtG,MAAM,CAAC,CAACkG,MAAM,GAAIC,MAAM,EAAGC,IAAI,KAAMC,UAAW,IAEhErN,iBAAkB,EAClBuN,iBAAkB,EAElBC,QAAS,EACTC,cAAe,EACfC,YAAa,EACbC,YAAa,EAEbC,QAAS,GAGT7M,mBAAoB,IACpBC,qBAAsB,IACtB6M,mBAAoB,IAGpBC,gBAAiB,CAAC9G,MAAM,GAAIqG,UAAW,IACvCU,iBAAkB,CAAC,EAAE,EAAE,EAAE,GACzB1N,gBAAiB+F,MAAM,IAAI4H,KAAK,IAChCC,gBAAiB7H,MAAM,IAAI4H,KAAK5H,MAAM,IAAI4H,KAAK,IAG/CE,KAAM,GACN3M,cAAe,GACf4M,UAAW,GACXC,qBAAsB,GACtB1M,UAAW,EAGXjB,IAAK,GACLI,SAAU,GACVC,eAAgB,GAChBR,SAAS,EACTyC,QAAQ,EACRd,mBAAmB,EACnB7B,gBAAgB,EAChBqC,WAAY,QACZtF,IAAK,IAELwG,KAAK,EACLE,KAAK,EAGL/G,EAAG,EACHuR,UAAW,GACXC,YAAa,GACbC,iBAAkB,GAGlBC,YAAa,EAGb7O,IAAK,CACH+K,WAAY,EACZC,kBAAmB,IACnBC,SAAU,GACVC,SAAU,GACVC,YAAa,GAEfjL,QAAS,CACP6K,WAAY,EACZC,kBAAmB,IACnBC,SAAU,GACVC,SAAU,GACVC,YAAa,EACb2D,QAAS,WAIXvN,cAAc,EACdE,eAAe,EAGfsN,gBAAiB,CAAC,EAAE,EAAE,GACtBnL,aAAc,CAAC,EAAE,EAAE,GACnBkH,iBAAkB,EAClBkE,aAAc,GAGdvF,UAAW,EACXC,UAAW,EAGXtH,mBAAmB,EACnBC,kBAAmB,GACnB4M,YAAa,EACbhN,aAAc,EAGdQ,KAAM,CACJhG,KAAM,OACNkG,KAAM,EACND,KAAM,EACNgM,UAAW,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,KACnIQ,WAAY,CAAC,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,SACrFtM,QAAQ,EACRuM,aAAa,EACbtM,SAAS,EACTuM,YAAa,CAAC,CAAC,MAAa,aAC7B,CAAC,MAAa,IACd,CAAC,KAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,KAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,KAAa,aACd,CAAC,MAAa,aACd,CAAC,KAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,GAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,KAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,IACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,KAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,IACd,CAAC,MAAa,IACd,CAAC,MAAa,aACd,CAAC,MAAa,aACd,CAAC,MAAa,cAEbnB,QACE,CAAC,CAAC,mBAAqB,GACvB,CAAC,kBAAmB,GACpB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,IACpB,CAAC,mBAAoB,IACrB,CAAC,mBAAoB,oBACrB,CAAC,mBAAoB,IACrB,CAAC,mBAAoB,IACrB,CAAC,mBAAoB,IACrB,CAAC,mBAAoB,IACrB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,mBACpB,CAAC,mBAAoB,IACrB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,IACpB,CAAC,kBAAmB,IACpB,CAAC,iBAAkB,IACnB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,IACpB,CAAC,iBAAkB,IACnB,CAAC,kBAAmB,mBACpB,CAAC,kBAAmB,MAGxB/K,MAAM,CAEJmM,SAAS,EACTjS,KAAM,OACNkS,SAAU,WAGVC,IAAK,EACLC,MAAO,EACPC,UAAW,GACXC,UAAU,EAGVC,SAAU,EAGVC,YAAa,EACbC,mBAAoB,KAI1BlL,SAAU,GAEVE,QAAS,CAEPiL,gBAFO,SAESC,GAEd,IAFsD,IAA9BC,EAA8B,uDAAjB,EAAGC,EAAc,uDAAH,GAC/CC,EAAY,GACPvV,EAAE,EAAGA,EAAEoV,EAASlV,OAAQF,IAAI,CACjC,IAAI6S,EAAQuC,EAASpV,GAAG,GACpB8S,EAAMsC,EAASpV,GAAG,GAClBwV,EAAMJ,EAASpV,GAAG,GAClBqV,GAAgB,IAChBxC,GAAS,EACTC,GAAO,GAEHD,GAAOwC,GAAgBxC,EAAMyC,GAC7BC,EAAU/U,KAAK,CAACoS,MAAM4C,EAAKC,UAAU5C,EAAO6C,QAAQ5C,IAGhE,OAAOyC,GAGTI,kBAnBO,SAmBWC,GAGhB,IAHsC,IAAdC,IAAc,yDAElCC,EAAa,GACR9V,EAAE,EAAGA,EAAE4V,EAAO1V,OAAQF,IAAI,CAGjC,IAFA,IAAI+V,EAAQH,EAAO5V,GACfgW,EAAS,GACJ9U,EAAE,EAAGA,EAAE,GAAIA,IACC,GAAf6U,EAAM,GAAG7U,IACX8U,EAAOxV,KAAKU,GAGhB,IAAqC,GAAjC6U,EAAMzS,MAAM,EAAE,IAAIyH,QAAQ,GAC5B,MAEE8K,EACFC,EAAWtV,KAAK,CAACuV,EAAMzS,MAAM,EAAE,IAAIyH,QAAQ,GAAGiL,EAAO,IAGrDF,EAAWtV,KAAK,CAACuV,EAAMzS,MAAM,EAAE,IAAIyH,QAAQ,GAAGiL,EAAOD,EAAMzS,MAAM,GAAG,IAAIyH,QAAQ,KAGpF6K,EAASE,EAGT,IAAIG,EAAa,GAEjB,GAAIL,EAAO1V,OAAS,EAAE,CAIpB,IAHA,IAAIgW,EAAYN,EAAO,GACnBO,EAAUlM,KAAKqI,mBAEV,EAAE,EAAG,EAAEsD,EAAO1V,OAAQ,IAC3B,GAAIkW,KAAKC,UAAUT,EAAO,KAAKQ,KAAKC,UAAUH,GAC1CC,GAAWlM,KAAKqI,uBAEf,CAID,IAHA,IAAI,EAAOgE,SAASJ,EAAU,IAC1B,EAASA,EAAU,GACnB,EAAOI,SAASJ,EAAU,IACrB,EAAE,EAAG,EAAE,EAAOhW,OAAQ,IACzB2V,EACFI,EAAWzV,KAAK,CAACoS,MAAO0D,SAAS,EAAO,IAAI,EAAKrM,KAAKsI,cAAekD,UAAWxL,KAAKqI,mBAAmB,EAAE6D,EAAST,QAASzL,KAAKqI,mBAAmB,IAGpJ2D,EAAWzV,KAAK,CAACoS,MAAO0D,SAAS,EAAO,IAAIrM,KAAKsI,cAAekD,UAAWxL,KAAKqI,mBAAmB,EAAE6D,EAAST,QAASzL,KAAKqI,mBAAmB,IAGnJ2D,EAAWzV,KAAK,CAACoS,MAAM,EAAK,EAAK3I,KAAKsI,cAAc,GAAIkD,UAAWxL,KAAKqI,mBAAmB,EAAE6D,EAAST,QAASzL,KAAKqI,mBAAmB,IACvI4D,EAAYN,EAAO,GACnBO,EAAUlM,KAAKqI,mBAMvB,IAHA,IAAIjE,EAAOiI,SAASJ,EAAU,IAC1B,EAASA,EAAU,GACnBK,EAAOD,SAASJ,EAAU,IACrB,EAAE,EAAG,EAAE,EAAOhW,OAAQ,IACzB2V,EACFI,EAAWzV,KAAK,CAACoS,MAAO0D,SAAS,EAAO,IAAIjI,EAAKpE,KAAKsI,cAAekD,UAAWxL,KAAKqI,mBAAmBsD,EAAO1V,OAAOiW,EAAST,QAASzL,KAAKqI,mBAAmBsD,EAAO1V,SAGvK+V,EAAWzV,KAAK,CAACoS,MAAO0D,SAAS,EAAO,IAAIrM,KAAKsI,cAAekD,UAAWxL,KAAKqI,mBAAmBsD,EAAO1V,OAAOiW,EAAST,QAASzL,KAAKqI,mBAAmBsD,EAAO1V,SAKtK,OAFA+V,EAAWzV,KAAK,CAACoS,MAAM2D,EAAKlI,EAAKpE,KAAKsI,cAAc,GAAIkD,UAAWxL,KAAKqI,mBAAmBsD,EAAO1V,OAAOiW,EAAST,QAASzL,KAAKqI,mBAAmBsD,EAAO1V,SAEnJ,CAACwM,MAAOuJ,EAAYlD,UAAW9I,KAAKqI,mBAAmBsD,EAAO1V,UAKzEsW,aAxFO,WAwFO,WACRC,EAAexM,KAAKkI,aACpBlI,KAAKmI,QACPqE,EAAe,yBAEjBxF,GAAM9O,IAAIsU,EAAe,iBACtBC,MAAK,SAAAC,GACA,IAAIjX,EAAOiX,EAASjX,KACdA,EAAKgF,WACThF,EAAO0W,KAAKQ,MAAMD,EAASjX,OAE7B,EAAKgF,SAAWhF,EAAKgF,aAI/BF,SAvGO,WAuGuB,WAArBhB,EAAqB,uDAAlB,MAAOoL,IAAW,yDAS5B,GARiB,iBAAPpL,IAENA,OAD4BgH,GAA1BhH,EAAGqT,OAAOC,QAAQnS,KACfnB,EAAGqT,OAAOC,QAAQnS,KAAKrB,MAAM,EAAE,GAAK,IAAME,EAAGqT,OAAOC,QAAQlS,QAG5D,OAGC,OAANpB,EAAY,CACd,IAAIiB,EAAOtE,OAAOsE,KAAKwF,KAAKuI,SAASlP,MAAM,GAC3CE,EAAKiB,EAAKiJ,KAAKqJ,MAAMrJ,KAAKsJ,SAAWvS,EAAKvE,SAEtB,QAAlB+J,KAAKnC,KAAKhG,OACZ0B,EAAKyG,KAAKnC,KAAKyM,WAAWtK,KAAKnC,KAAKC,OAEtC,IAAIrI,EAAOuK,KAAKuI,QAAQhP,GACxByG,KAAKlF,OAASrF,EAAKqF,OACnBkF,KAAKwI,uBAAyB/S,EAAK+S,uBACnCxI,KAAKyI,qBAAuBhT,EAAKgT,qBACjCzI,KAAK0I,qBAAuBjT,EAAKiT,qBACjC1I,KAAKvE,iBAAmBhG,EAAKgG,iBAC7BuE,KAAKgJ,iBAAmBvT,EAAKuT,iBAC7BhJ,KAAKkJ,cAAgBzT,EAAKyT,cAC1BlJ,KAAKmJ,YAAc1T,EAAK0T,YACxBnJ,KAAKoJ,YAAc3T,EAAK2T,YACxBpJ,KAAKqJ,QAAU5T,EAAK4T,QACpBrJ,KAAKjF,SAAWtF,EAAKoC,KACrBmI,KAAKhF,QAAUvF,EAAKmD,IAEpBoH,KAAKgN,uBAEL,IAAK,IAAIjP,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,IAAIhI,EAAE,EAAGA,EAAEiK,KAAKqJ,QAAQpT,OAAQF,IAAI,CACvC,IAAI6S,EAAQ5I,KAAKqJ,QAAQtT,GAAG,GACxB8S,EAAM7I,KAAKqJ,QAAQtT,GAAG,GAC1B,GAAI6S,EAAY,EAAJ7K,GAAS8K,EAAU,EAAJ9K,EACzB,MAEF,GAAI6K,EAAY,EAAJ7K,EAAM,CACZhI,EAAI,EACNiK,KAAKqJ,QAAQtT,EAAE,GAAG,GAAS,EAAJgI,EAAQ,EAGjCiC,KAAKqJ,QAAQ9S,KAAK,CAAK,EAAJwH,EAAQ,EAAO,EAAJA,EAAQ,IAEtC,OAQNiC,KAAKiK,YAAc,IAAI/C,GAAG+F,0BAA0B,CAACxK,MAAO,CAAC,CAACkG,MAAO,GAAIC,MAAM,EAAGC,IAAI,IAAKC,UAAU,IAAK9H,SAASwE,eAAe,kBAAmBxF,KAAK5E,KAC1J4E,KAAKkN,iBAELlN,KAAK9C,mBACDyH,GACF3E,KAAK/D,eAEP+D,KAAKmN,4BACLC,YAAW,WAAS,EAAKD,8BAAgC,KACzDC,YAAW,WAAS,EAAKD,8BAAgC,KAGnC,0BAAlBnN,KAAKnC,KAAKhG,KACZmI,KAAKqN,2BAGLrN,KAAKsN,uBAITC,aAjLO,WAiLO,WACR3P,EAAU,EACV4O,EAAexM,KAAKkI,aACpBlI,KAAKmI,QACPqE,EAAe,yBAEjBxF,GAAM9O,IAAIsU,EAAe,iBACtBC,MAAK,SAAAC,GACA,IAAIc,EAAUd,EAASjX,KACjB+X,EAAQ,GAAK,IACjBA,EAAUrB,KAAKQ,MAAMD,EAASjX,OAEhC,EAAK8S,QAAU,CAAC,aAAgBiF,EAAQ,GAAG,IAC3C,EAAKpD,aAAeoD,EAAQ,GAAG,GAC/B5P,EAAU4P,EAAQ,GACd,EAAKrF,QACPvK,EAAU,GAEZ,EAAKA,QAAUA,EAEf,IAAK,IAAI7H,EAAE,EAAGA,EAAE6H,EAAS7H,IACnB,EAAKoS,MACPnB,GAAM9O,IAAIsU,EAAe,oBAAqB,CAACiB,OAAQ,CAAC5M,IAAK,KAC5D4L,MAAK,SAAAC,GACJ,EAAK/O,WACL,IAAI6P,EAAUd,EAASjX,KACL,GAAd+X,EAAQ,KACVA,EAAUrB,KAAKQ,MAAMD,EAASjX,OAEhC,IAAImD,EAAM4U,EAAQ,GAAG,GACjBE,EAAMF,EAAQ,GAAG,GACrB,EAAKjF,QAAQ3P,GAAO8U,EAChBxX,OAAOsE,KAAK,EAAK+N,SAAStS,QAAU2H,EAAQ,IAC9C,EAAKrD,WACL,EAAKmD,mBAAoB,EACzB,EAAKiQ,2BAKX3G,GAAM9O,IAAIsU,EAAe,oBAAqB,CAACiB,OAAQ,CAAC5M,IAAK9K,KAC1D0W,MAAK,SAAAC,GACJ,EAAK/O,WACL,IAAI6P,EAAUd,EAASjX,KACL,GAAd+X,EAAQ,KACVA,EAAUrB,KAAKQ,MAAMD,EAASjX,OAEhC,IAAImD,EAAM4U,EAAQ,GAAG,GACjBE,EAAMF,EAAQ,GAAG,GACrB,EAAKjF,QAAQ3P,GAAO8U,EAChBxX,OAAOsE,KAAK,EAAK+N,SAAStS,QAAU2H,EAAQ,IAC9C,EAAKrD,WACL,EAAKmD,mBAAoB,EACzB,EAAKiQ,+BAOvBC,gBA7OO,WA6OU,WACXhQ,EAAU,EACV4O,EAAexM,KAAKkI,aACxBlB,GAAM9O,IAAIsU,EAAe,oBACtBC,MAAK,SAAAC,GACA,IAAIc,EAAUd,EAASjX,KACjB+X,EAAQ,GAAK,IACjBA,EAAUrB,KAAKQ,MAAMD,EAASjX,OAEhC,EAAK8S,QAAU,CAAC,aAAgBiF,EAAQ,GAAG,IAC3C,EAAKpD,aAAeoD,EAAQ,GAAG,GAC/B5P,EAAU4P,EAAQ,GAClB,EAAK5P,QAAUA,EAEf,IAAK,IAAI7H,EAAE,EAAGA,EAAE6H,EAAS7H,IACvBiR,GAAM9O,IAAIsU,EAAe,uBAAwB,CAACiB,OAAQ,CAAC5M,IAAK9K,KAC7D0W,MAAK,SAAAC,GACJ,EAAK/O,WACL,IAAI6P,EAAUd,EAASjX,KACL,GAAd+X,EAAQ,KACVA,EAAUrB,KAAKQ,MAAMD,EAASjX,OAEhC,IAAImD,EAAM4U,EAAQ,GAAG,GACjBE,EAAMF,EAAQ,GAAG,GACrB,EAAKjF,QAAQ3P,GAAO8U,EAChBxX,OAAOsE,KAAK,EAAK+N,SAAStS,QAAU2H,EAAQ,IAC9C,EAAKrD,WACL,EAAKmD,mBAAoB,UAQ3CmQ,YAhRO,WAiRL,GAAI7N,KAAKxB,QACHwB,KAAKjE,QAAQ,CAoBf,GAnBIiE,KAAKzH,EAAIyH,KAAKoI,WAAa,IAEf,GAAVpI,KAAKzH,IAGsB,GAAzByH,KAAKkG,kBACPlG,KAAKzF,SAASyF,KAAKmK,gBAAgBnK,KAAKkG,kBAAkB,GAC1DlG,KAAKkG,iBAAmB,EACF,0BAAlBlG,KAAKnC,KAAKhG,KACZmI,KAAKqN,4BAGLrN,KAAKsN,sBACLtN,KAAK8N,MAAMC,gBAAgBpJ,UAIjC3E,KAAKgO,sBAEFhO,KAAKjE,QACR,OAIFiE,KAAKzH,GAAK,EACI,IAAVyH,KAAKzH,IACLyH,KAAKzH,EAAI,GAEJyH,KAAKnC,KAAKG,SAAWgC,KAAKnC,KAAKI,SAAW+B,KAAKnC,KAAKC,KAAOkC,KAAKnC,KAAKyM,WAAWrU,OAAS,IAC5F+J,KAAKnC,KAAKC,OACVkC,KAAKkG,gBAAkB,GAEpBlG,KAAKnC,KAAKG,SAAUgC,KAAKnC,KAAKI,SAAY+B,KAAKnC,KAAK0M,cACvDvK,KAAKnC,KAAK0M,aAAc,EACxBvK,KAAKnC,KAAKC,OACVkC,KAAKkG,gBAAkB,MAQnCjK,aA9TO,WA+TL+D,KAAKjE,SAAU,EACfiE,KAAKxB,QAAS,EACdwB,KAAKzH,EAAI,EACTyH,KAAKuJ,gBAAgB9G,MAAQ,GAC7BzC,KAAKwJ,iBAAmB,CAAC,EAAE,EAAE,EAAE,GAC/BxJ,KAAK8J,UAAY,GACjB9J,KAAKlE,gBAAkB+F,MAAM,IAAI4H,KAAK,IACtCzJ,KAAK0J,gBAAmB7H,MAAM,IAAI4H,KAAK5H,MAAM,IAAI4H,KAAK,IACtDzJ,KAAKiK,YAAYgE,SACjBjO,KAAKkN,kBAGPc,kBA3UO,WA2UY,WAGjB,GAAsB,QAAlBhO,KAAKnC,KAAKhG,MAAkBmI,KAAKnC,KAAKC,KAAO,EAAE,CACjD,GAAIkC,KAAKnC,KAAKE,KAAOiC,KAAKnC,KAAKiM,UAAU7T,OAEvC,YADA+J,KAAKjE,SAAU,GAGjBiE,KAAKnC,KAAKE,MACc,IAApBiC,KAAK+J,cACH/J,KAAKnC,KAAKiM,UAAU9J,KAAKnC,KAAKE,KAAK4C,SAAS,MAC5CX,KAAK8N,MAAMI,KAAKzJ,kBAChB,IAAI0J,cAAc,UAAW,CAC3B,IAAO,OAGXnO,KAAK8N,MAAMI,KAAKzJ,kBACd,IAAI0J,cAAc,UAAW,CAC3B,IAAOnO,KAAKnC,KAAKiM,UAAU9J,KAAKnC,KAAKE,KAAK1E,MAAM,MAGpD2G,KAAK8N,MAAMI,KAAKxJ,gBACd,IAAIyJ,cAAc,UAAW,CAC3B,IAAO,QAIJnO,KAAKnC,KAAKiM,UAAU9J,KAAKnC,KAAKE,KAAK4C,SAAS,MACjDX,KAAK8N,MAAMI,KAAKzJ,kBAChB,IAAI0J,cAAc,UAAW,CAC3B,IAAO,OAGXnO,KAAK8N,MAAMI,KAAKzJ,kBACd,IAAI0J,cAAc,UAAW,CAC3B,IAAOnO,KAAKnC,KAAKiM,UAAU9J,KAAKnC,KAAKE,KAAK1E,MAAM,MAGpD2G,KAAK8N,MAAMI,KAAKxJ,gBACd,IAAIyJ,cAAc,UAAW,CAC3B,IAAO,QAKXnO,KAAK8N,MAAMI,KAAKzJ,kBACd,IAAI0J,cAAc,UAAW,CAC3B,IAAOnO,KAAKnC,KAAKiM,UAAU9J,KAAKnC,KAAKE,SAM/C,GAAwB,IAApBiC,KAAK+J,YAAT,CAIA/J,KAAKjE,SAAU,EAGf,IACIqS,EADAC,EAAgB,GAEpB,GAAIrO,KAAKnC,KAAKE,KAAO,EAAE,CACrB,IAAI1E,EAAQ2G,KAAKnC,KAAK2M,YAAYnR,MAAsB,EAAhB2G,KAAKnC,KAAKE,IAAyB,EAAhBiC,KAAKnC,KAAKE,IAAU,GAC/EqQ,EAAa/U,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAK,GAAKA,EAAM,GAAG,GACvD,IAAK,IAAItD,EAAE,EAAGA,EAAE,EAAGA,IACjBsY,EAActY,GAAK,CAACsD,EAAMtD,GAAG,GAAKsD,EAAM,GAAG,GAAK,KAAOA,EAAMtD,GAAG,QAGhE,OAC4BiK,KAAKsO,oBADjC,uBACDD,EADC,KACcD,EADd,KAGJhB,YAAW,WAAS,EAAKS,gBAA+B,IAAbO,GAE3C,IAAK,IAAI,EAAEpO,KAAKzH,EAAG,EAAEyH,KAAKzH,EAAE,EAAG,IAC7ByH,KAAKuO,eAAe,UAAU,EAAGH,GAEnC,IAAMI,EAAkB,SAAlBA,EAAmBC,GACvB,EAAKF,eAAe,eAAeE,EAAML,EAAa,GAClDK,EAAO,GAAK,GAGhBrB,YAAW,WACToB,EAAgBC,EAAK,KACP,IAAbL,IAELI,EAAgBxO,KAAKzH,GAErByH,KAAK9D,IAAM8D,KAAK1D,SAGF,GAAV0D,KAAKzH,IACPyH,KAAKlE,gBAAkB+F,MAAM,IAAI4H,KAAK,IACtCzJ,KAAK0J,gBAAmB7H,MAAM,IAAI4H,KAAK5H,MAAM,IAAI4H,KAAK,IACtDzJ,KAAKuJ,gBAAgB9G,MAAQ,GAC7BzC,KAAKwJ,iBAAmB,CAAC,EAAE,EAAE,EAAE,GAC/BxJ,KAAK2J,KAAO,IAIV3J,KAAKzH,EAAIyH,KAAKoI,WAAa,IAC7BpI,KAAK8J,UAAY,IAEnB9J,KAAK2J,KAAKpT,KAAKyJ,KAAK+J,aACpB/J,KAAK8J,UAAUvT,KAAKyJ,KAAK+J,aACzB,IAAI3F,EAAOiI,SAASrM,KAAK+J,YAAY1Q,MAAM,GAAG,IAC1C0S,EAAS/L,KAAK+J,YAAY1Q,OAAO,GACrC2G,KAAKlE,gBAAgBkE,KAAKzH,GAAKyH,KAAKgK,iBAE/BhK,KAAK1B,MAAMwM,UAAa9K,KAAK1B,MAAMG,YAEtCuB,KAAK+J,YAAc,GACnB/J,KAAKgK,iBAAmB,IAM1B,IAFA,IAAI0E,EAAmB,EAAI1O,KAAKoI,UAC5BuG,EAAQ,GACH,EAAE,EAAG,EAAE3O,KAAK8J,UAAU7T,OAAQ,IACrC0Y,EAAMpY,KAAKyJ,KAAK8J,UAAU,IAE5B,MAAO6E,EAAM1Y,OAASyY,EACpBC,EAAMpY,KAAKoY,EAAMA,EAAM1Y,OAAO,IAEhC0Y,EAAQA,EAAMC,KAAK,KACnB,IAAIC,EAAY7O,KAAKiJ,SAASjJ,KAAKzH,EAAIyH,KAAKzH,EAAE,GAAG,GAAGoW,GAChDG,EAAY9O,KAAKkL,gBAAgB2D,EAAW7O,KAAKzH,EAAGyH,KAAKzH,EAAEyH,KAAKoI,WAAW,GAC/E0G,EAAY9O,KAAK+O,eAAeD,GAChC9O,KAAKuJ,gBAAgB9G,MAAQzC,KAAKuJ,gBAAgB9G,MAAMuM,OAAOF,GAC/D,IAAIG,EAAiBjP,KAAKkP,uBAAuBJ,GAC7CK,EAAU,iCAAmBF,GAG7B7L,EAAOpD,KAEX,GAAIoD,EAAKvF,KAAKE,KAAO,EACnB,IAAK,IAAI,EAAE,EAAG,EAAEoR,EAAQ1M,MAAMxM,OAAQ,IACpC,IAAK,IAAIgB,EAAE,EAAGA,EAAEmM,EAAKvF,KAAKwL,QAAQpT,OAAQgB,IAAI,CAC5C,IAAImY,EAAYhM,EAAKvF,KAAKwL,QAAQpS,GAAG,GAAK,IAAMmM,EAAKvF,KAAKC,KAAO,GAC7DuR,EAAUjM,EAAKvF,KAAKwL,QAAQpS,GAAG,GAAK,IAAMmM,EAAKvF,KAAKC,KAAO,GAC/D,GAAIqR,EAAQ1M,MAAM,GAAGgJ,QAAU2D,GAAaD,EAAQ1M,MAAM,GAAGgJ,QAAU4D,EAAQ,CAC7EF,EAAQ1M,MAAM,GAAGgJ,QAAU4D,EAC3B,MAEF,GAAIF,EAAQ1M,MAAM,GAAGgJ,QAAU2D,EAC7B,MAOR,IAAK,IAAI,EAAE,EAAG,EAAED,EAAQ1M,MAAMxM,OAAQ,IAAI,CACxC,IAAK,IAAI,EAAE,EAAG,EAAEkZ,EAAQ1M,MAAMxM,OAAQ,IAChCkZ,EAAQ1M,MAAM,GAAG+I,UAAY2D,EAAQ1M,MAAM,GAAG+I,WAAa2D,EAAQ1M,MAAM,GAAGgJ,SAAW0D,EAAQ1M,MAAM,GAAG+I,WAAa2D,EAAQ1M,MAAM,GAAGkG,OAASwG,EAAQ1M,MAAM,GAAGkG,QAClKwG,EAAQ1M,MAAM,GAAGgJ,QAAU0D,EAAQ1M,MAAM,GAAG+I,UAAY,KAGxD2D,EAAQ1M,MAAM,GAAGgJ,SAAW,MAC9B0D,EAAQ1M,MAAM,GAAGgJ,QAAU,GAK/BrE,GAAKkI,UAAUpT,IAAIqT,eAAe,GAAInI,GAAKkI,UAAUE,OACrD,IAAK,IAAI,EAAE,EAAG,EAAEnB,EAAcpY,OAAQ,IACpCmR,GAAKkI,UAAUpT,IAAIqT,eAAelB,EAAc,GAAG,GAAIjH,GAAKkI,UAAUE,MAAQnB,EAAc,GAAG,IAK7F9G,GAAOkI,aACTlI,GAAOmI,OAETP,EAAQrG,UAAY,EACpBvB,GAAOqB,MAAMuG,GACbnP,KAAKwJ,kBAAkBxJ,KAAKzH,EAAEyH,KAAKzH,EAAE,GAAG,GAAKyH,KAAKuJ,gBAI5CvJ,KAAKnE,iBACTmE,KAAKiK,YAAYhP,aAAe+E,KAAKuJ,gBACrCvJ,KAAKiK,YAAYgE,WAIfjO,KAAK+J,YAAYpJ,SAAS,OAASX,KAAK+J,YAAYpJ,SAAS,SAC/DyD,EAAOiI,SAASrM,KAAK+J,YAAY1Q,MAAM,GAAG,IAC1C0S,EAAS/L,KAAK+J,YAAY1Q,OAAO,IAEnC,IAAIsW,EAAc9N,MAAM,IAAI4H,KAAK,GACjCkG,EAAYvL,GAAQ,EACpBuL,EAAY,IAAM,EAElB,IAAIC,EAAK,CAAC,EAAE,EAAE,GACVC,EAAK,CAAC,EAAE,EAAE,GACVC,EAAK,CAAC,EAAE,EAAE,EAAE,IACZC,EAAK,CAAC,EAAE,EAAE,EAAE,IACZC,EAAK,CAAC,EAAE,EAAE,EAAE,IACZC,EAAM,EAEI,MAAVlE,IACFkE,EAAML,GAEM,MAAV7D,IACFkE,EAAMJ,GAEM,MAAV9D,IACFkE,EAAMH,GAEM,MAAV/D,IACFkE,EAAMF,GAEM,MAAVhE,IACFkE,EAAMD,GAIR,IADA,IAAI3Y,EAAI,EACC,EAAE,EAAG,EAAE,GAAI,IAClBA,GAAQsY,EAAY,GAEb,GAALtY,IACFsY,EAAY,GAAK,GAGnB,IAAK,IAAI,EAAE,EAAG,EAAEM,EAAIha,OAAQ,IAC1B0Z,GAAavL,EAAK6L,EAAI,IAAI,GAAK,IAAM,EAEvC,IAAK,IAAI,EAAEjQ,KAAKzH,EAAG,EAAEyH,KAAKzH,EAAEyH,KAAKoI,UAAW,IAC1CpI,KAAK0J,gBAAgB,GAAKiG,EAE5B3P,KAAKkN,iBAGDlN,KAAK1B,MAAMG,YACU,YAAnBuB,KAAK1B,MAAM9F,MACbwH,KAAK8N,MAAMoC,WAAWxJ,cAAc1G,KAAK1B,MAAMyM,UAEjD/K,KAAK1D,SAAW0D,KAAK9D,KAAO8D,KAAK1B,MAAMqM,IAAM3K,KAAK1B,MAAMsM,OAAS5K,KAAK1B,MAAMuM,UAC5E7K,KAAK1B,MAAM2M,mBAAqB,EAAIjL,KAAK1B,MAAM6R,YAC/CnQ,KAAK1B,MAAM6R,YAAc,QA1LzBnQ,KAAKjE,SAAU,GA8LnBmT,uBA/jBO,SA+jBgBzM,GACrB,IAAI2N,EAAM,0CAA4B,EAAG,IACzCA,EAAIC,OAAS,CAAC,CAAC5B,KAAM,EAAG6B,IAAK,KAE7B,IADA,IAAIlN,EAAOpD,KACFjK,EAAE,EAAGA,EAAE0M,EAAMxM,OAAQF,IAAI,CAChC,IAAIwa,EAAO9N,EAAM1M,GACbya,EAAaD,EAAK/E,UAClBiF,EAAWF,EAAK9E,QACpB,GAAIrI,EAAKvF,KAAKE,KAAO,EACnB,IAAK,IAAI9G,EAAE,EAAGA,EAAEmM,EAAKvF,KAAKwL,QAAQpT,OAAQgB,IAAI,CAC5C,IAAImY,EAAYhM,EAAKvF,KAAKwL,QAAQpS,GAAG,GAAK,IAAMmM,EAAKvF,KAAKC,KAAO,GAC7DuR,EAAUjM,EAAKvF,KAAKwL,QAAQpS,GAAG,GAAK,IAAMmM,EAAKvF,KAAKC,KAAO,GAC/D,GAAIyS,EAAK9E,QAAU2D,GAAamB,EAAK9E,QAAU4D,EAAQ,CACrDoB,EAAWpB,EACX,MAEF,GAAIkB,EAAK9E,QAAU2D,EACjB,WAKF,IAAK,IAAI,EAAE,EAAG,EAAEhM,EAAKiG,QAAQpT,OAAQ,IAAI,CACzC,IAAI,EAAYmN,EAAKiG,QAAQ,GAAG,GAC5B,EAAUjG,EAAKiG,QAAQ,GAAG,GAC9B,GAAIkH,EAAK9E,QAAU,GAAa8E,EAAK9E,QAAU,EAAQ,CACrDgF,EAAW,EACX,MAEF,GAAIF,EAAK9E,QAAU,EACjB,MAKN2E,EAAI3N,MAAMlM,KAAK,CAACoS,MAAM4H,EAAK5H,MAAO+H,mBAAuC,GAAnBF,EAAWxQ,KAAKzH,GAAMoY,iBAAiBlN,KAAKmN,MAAwB,GAAjBH,EAASzQ,KAAKzH,IAAOsY,SAAUN,EAAKM,WAG/I,IAAK,IAAI,EAAE,EAAG,EAAET,EAAI3N,MAAMxM,OAAQ,IAChC,IAAK,IAAI,EAAE,EAAG,EAAEma,EAAI3N,MAAMxM,OAAQ,IAC5Bma,EAAI3N,MAAM,GAAGiO,mBAAqBN,EAAI3N,MAAM,GAAGiO,oBAAsBN,EAAI3N,MAAM,GAAGkO,iBAAmBP,EAAI3N,MAAM,GAAGiO,qBACpHN,EAAI3N,MAAM,GAAGkO,iBAAmBP,EAAI3N,MAAM,GAAGiO,oBAInD,OAAON,GAGTU,mBA/mBO,SA+mBYP,GACjB,IAAIhY,EAAIyH,KAAKzH,EACJ,GAALA,IACFA,EAAI,IAEN,IAAIwY,EAAc,CAACpI,MAAO4H,EAAK5H,MAAO6C,UAAW+E,EAAK/E,UAAYjT,EAAI,EAAGkT,QAAS8E,EAAK9E,QAAUlT,EAAI,GACjGgY,EAAKS,aACPD,EAAc,CAACpI,MAAO4H,EAAK5H,MAAO6C,UAAW+E,EAAKU,gBAAgBjR,KAAK9D,IAAI,GAAG,EAAE3D,EAAE,EAAGkT,QAAS8E,EAAKW,cAAclR,KAAK9D,IAAI,GAAG,EAAE3D,EAAE,IAEnIyH,KAAKiK,YAAYgE,OAAO8C,IAI1BhC,eA5nBO,SA4nBQI,GACb,IAAIgC,EAAiBnR,KAAK9E,iBAAiBuH,MACvC2O,EAAgBjC,EAGpBgC,EAAeE,MAAK,SAAUC,EAAEC,GAAG,OAAOD,EAAE9F,UAAY+F,EAAE/F,aAC1D4F,EAAcC,MAAK,SAAUC,EAAEC,GAAG,OAAOD,EAAE9F,UAAY+F,EAAE/F,aAIzD,IADA,IAAIgG,EAAU,EACLzb,EAAE,EAAGA,EAAEob,EAAelb,OAAQF,IACrCyb,GAAoBL,EAAepb,GAAG8a,SAExCW,EAAU/N,KAAKqJ,MAAM0E,EAAUL,EAAelb,QAK9C,IAFA,IAAIwb,EAAmB,GACnBC,EAAkB,GACb,EAAE,EAAG,EAAE,GAAI,IAClBD,EAAiBlb,KAAK,IACtBmb,EAAgBnb,KAAK,IAEvB,IAAK,IAAI,EAAE,EAAG,EAAE4a,EAAelb,OAAQ,IAAI,CACzC,IAAIsa,EAAOY,EAAe,GACtBZ,EAAK/E,UAAYxL,KAAKzH,GAAKgY,EAAK/E,WAAaxL,KAAKzH,EAAI,GAG1DkZ,EAAiBhO,KAAKmN,MAAML,EAAK/E,UAAY,KAAQ,IAAIjV,KAAKga,EAAKM,UAGrE,IAAK,IAAI,EAAE,EAAG,EAAEO,EAAcnb,OAAQ,IAAI,CACxC,IAAI,EAAOmb,EAAc,GACzBM,EAAgB,EAAKlG,UAAY,IAAO,IAAIjV,KAAK,GAGnD,IAAK,IAAI,EAAE,EAAG,EAAE,GAAI,IAGlB,IAFA,IAAIob,EAAiBD,EAAgB,GACjCE,EAAkBH,EAAiB,GAC9Bxa,EAAE,EAAGA,EAAE0a,EAAe1b,OAAQgB,IAAI,CACzC,IAAI4J,EAAM8Q,EAAe1a,GACzB,GAA8B,GAA1B2a,EAAgB3b,OACP,GAAP4K,EACFuQ,EAAc,GAAGP,SAAW,EAG5BO,EAAcvQ,GAAKgQ,SAAWO,EAAcvQ,EAAM,GAAGgQ,cAGpD,GAAIc,EAAe1b,QAAU2b,EAAgB3b,OAChDmb,EAAcvQ,GAAKgQ,SAAWe,EAAgB3a,QAE3C,GAAIA,GAAK0a,EAAe1b,OAAS,EACpCmb,EAAcvQ,GAAKgQ,SAAWe,EAAgBA,EAAgB3b,OAAS,OAErE,CAEF,IAAI4b,EAAM5a,EAAI0a,EAAe1b,OAAS2b,EAAgB3b,OAClD6b,EAAaF,EAAgBnO,KAAKqJ,MAAM+E,IACxCE,EAAUH,EAAgBnO,KAAKqJ,MAAM+E,GAAO,GAC5CG,EAAgBH,EAAM,EAC1BT,EAAcvQ,GAAKgQ,SAAWiB,EAAaE,EAAgBD,GAAW,EAAIC,IAMhF,IAAK,IAAI,EAAE,EAAG,EAAEZ,EAAcnb,OAAQ,IACpCmb,EAAc,GAAGP,SAAWpN,KAAKqJ,MAAwF,MAAhFsE,EAAc,GAAGP,SAAWW,EAAU,GAAIxR,KAAKxD,mBAAqB,IAAM,GAAYwD,KAAKzD,eAAe,KAC/I6U,EAAc,GAAGP,SAAW,MAC9BO,EAAc,GAAGP,SAAW,KAE1BO,EAAc,GAAGP,SAAW,KAC9BO,EAAc,GAAGP,SAAW,IAGhC,OAAO1B,GAGT8C,mBA1sBO,SA0sBY9C,GACjB,IAAIgC,EAAiBnR,KAAK9E,iBAAiBuH,MACvC2O,EAAgBjC,EAAQ1M,MAG5B0O,EAAeE,MAAK,SAAUC,EAAEC,GAAG,OAAOD,EAAE9F,UAAY+F,EAAE/F,aAC1D4F,EAAcC,MAAK,SAAUC,EAAEC,GAAG,OAAOD,EAAE9F,UAAY+F,EAAE/F,aAKzD,IAFA,IAAIiG,EAAmB,GACnBC,EAAkB,GACb3b,EAAE,EAAGA,EAAE,GAAIA,IAClB0b,EAAiBlb,KAAK,IACtBmb,EAAgBnb,KAAK,IAEvB,IAAK,IAAI,EAAE,EAAG,EAAE4a,EAAelb,OAAQ,IAAI,CACzC,IAAIsa,EAAOY,EAAe,GACtBZ,EAAK/E,UAAYxL,KAAKzH,GAAKgY,EAAK/E,WAAaxL,KAAKzH,EAAI,GAG1DkZ,EAAiBhO,KAAKmN,MAAML,EAAK/E,UAAY,KAAQ,IAAIjV,KAAKga,EAAK9E,QAAU8E,EAAK/E,WAGpF,IAAK,IAAI,EAAE,EAAG,EAAE4F,EAAcnb,OAAQ,IAAI,CACxC,IAAI,EAAOmb,EAAc,GACzBM,EAAgB,EAAKlG,UAAY,IAAO,IAAIjV,KAAK,GAGnD,IAAK,IAAI,EAAE,EAAG,EAAE,GAAI,IAGlB,IAFA,IAAIob,EAAiBD,EAAgB,GACjCE,EAAkBH,EAAiB,GAC9Bxa,EAAE,EAAGA,EAAE0a,EAAe1b,OAAQgB,IAAI,CACzC,IAAI4J,EAAM8Q,EAAe1a,GACzB,GAA8B,GAA1B2a,EAAgB3b,OAAY,CAC9B,IAAIic,EAAMd,EAAcvQ,GAAK4K,QAAU2F,EAAcvQ,GAAK2K,UAC1D,GAAImG,EAAe1b,QAAU2b,EAAgB3b,OAC3Cmb,EAAcvQ,GAAK4K,UAAYmG,EAAgB3a,GAAGib,EAAM,GAAKlS,KAAKsJ,mBAAqB,IAAM,GAAK4I,EAAMd,EAAcvQ,GAAK2K,eAExH,GAAIvU,GAAK0a,EAAe1b,OAAS,EACpCmb,EAAcvQ,GAAK4K,UAAYmG,EAAgBA,EAAgB3b,OAAS,GAAGic,EAAM,GAAKlS,KAAKsJ,mBAAqB,IAAM,GAAK4I,EAAMd,EAAcvQ,GAAK2K,cAElJ,CAEF,IAAIqG,EAAM5a,EAAI0a,EAAe1b,OAAS2b,EAAgB3b,OAClD6b,EAAaF,EAAgBnO,KAAKqJ,MAAM+E,IACxCE,EAAUH,EAAgBnO,KAAKqJ,MAAM+E,GAAO,GAC5CG,EAAgBH,EAAM,EACtBM,EAAWL,EAAaE,EAAgBD,GAAW,EAAIC,GAC3DZ,EAAcvQ,GAAK4K,UAAY0G,EAASD,EAAM,GAAKlS,KAAKsJ,mBAAqB,IAAM,GAAK4I,EAAMd,EAAcvQ,GAAK2K,YAOzH,IAAK,IAAI,EAAE,EAAG,EAAE4F,EAAcnb,OAAQ,IACJ,GAA5Bmb,EAAc,GAAG3F,UACnB2F,EAAc,GAAG3F,QAAU,GAG/B,OAAO0D,GAGTb,kBAzwBO,WAyyBL,IAAI7L,EAAQzC,KAAK9E,iBAAiBuH,MAClCA,EAAM4O,MAAK,SAAUC,EAAEC,GAAG,OAAOD,EAAE9F,UAAY+F,EAAE/F,aAKjD,IAHA,IAAI4E,EAAM,GACNgC,EAAO,GACPC,EAAW,EACNtc,EAAE,EAAGA,EAAE,GAAIA,IAClBqc,EAAK7b,KAAK,IAEZ,IAAK,IAAI,EAAE,EAAG,EAAEkM,EAAMxM,OAAQ,IAAI,CAChC,IAAIsa,EAAO9N,EAAM,GACjB4P,GAAsB9B,EAAKM,SAC3BuB,EAAK3O,KAAKmN,MAAML,EAAK/E,UAAU,MAAOjV,KAAKga,EAAKM,UAIlD,IAFA,IAAIyB,EAAWD,EAAW5P,EAAMxM,OAEvB,EAAE,EAAG,EAAE,GAAI,IAAI,CACtB,IAAIsc,EAAMH,EAAK,GAAGI,QAAO,SAAClB,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,GACtCgB,EAAMD,EAAWF,EAAK,GAAGnc,OAC3Bma,EAAI7Z,KAAK,CAAC,GAAG,IAEP6b,EAAK,GAAGnc,OAAS,GACvBma,EAAI7Z,KAAK,CAAC,GAAG,IAYjB,IAPA,IAAIkc,EAAc,CAAC,CAAC,KAAOzS,KAAK9D,MAC5B3D,EAAI,EACJma,EAAW,EACXC,EAAS,EACTzW,EAAM8D,KAAK9D,IACX0W,EAAY,EAAE,GAAI,GAAI,GAAI,GAErB,EAAE,EAAG,EAAExC,EAAIna,OAAQ,IAAI,CAI9B,IAHA,IAAI4c,EAAOzC,EAAI,GAAG,GACd0C,EAAa1C,EAAI,GAAG,GAEfnZ,EAAE,EAAGA,EAAE,EAAGA,KACI,GAAjB2b,EAAU3b,IAAY4b,EAAO,GAAK,GAAK5b,IACzC2b,EAAU3b,GAAKsB,EAA+B,IAA1B,GAAK,GAAKtB,EAAIyb,GAAiBxW,GAIvD3D,GAAyB,IAAnBsa,EAAOH,GAAiBxW,EAAM,EAEhC,GAAKkU,EAAIna,OAAS,IACpB2c,EAAU,GAAKra,EAAI,GAAK2D,GAAO,GAAK2W,IAGlCC,GAEF5W,GAAQ,KAAQ8D,KAAKvD,qBAAuB,IAAO,EACnDkW,GAAU,EACVF,EAAYlc,KAAK,CAACgC,EAAG2D,EAAK2W,MAEnBC,GAAcH,EAAS,IAE9BzW,GAAE,SAAO,KAAQ8D,KAAKvD,qBAAuB,IAAO,EAAMkW,GAC1DA,EAAS,EACTF,EAAYlc,KAAK,CAACgC,EAAG2D,EAAK2W,KAE5BH,EAAWG,EAGb,IAAK,IAAI,EAAE,EAAG,EAAE,EAAG,KACI,GAAjBD,EAAU,KACZA,EAAU,GAAKA,EAAU,EAAE,GAAK,IAAM1W,GAK1C,IADA,IAAI6W,EAAc,CAAC,CAAC,KAAO/S,KAAK9D,IAAK,IAC5B,EAAE,EAAG,EAAEuW,EAAYxc,OAAQ,IAAI,CACtC,sBAAqBwc,EAAY,GAAjC,GAAK,EAAL,KAAQ,EAAR,KAAa,EAAb,KAEc,GAAVzS,KAAKzH,EACH,EAAIqa,EAAU,IAAW,MAAL,GACtBG,EAAYxc,KAAK,CAAC,EAAG,EAAK,EAAO,MAI/B,GAAKqc,EAAU5S,KAAKzH,EAAI,EAAI,KAC9Bwa,EAAY,GAAG,GAAK,GAElB,EAAIH,EAAU5S,KAAKzH,EAAI,EAAI,IAAM,EAAIqa,EAAU5S,KAAKzH,EAAI,KAC1D,GAAKqa,EAAU5S,KAAKzH,EAAI,EAAI,GAC5Bwa,EAAYxc,KAAK,CAAC,EAAG,EAAK,EAAO,OAKvC,IAAK,IAAI,EAAE,EAAG,EAAI,EAAG,IACnBqc,EAAU,IAAMA,EAAU,EAAE,GAG9BG,EAAYxc,KAAK,CAAC,EAAGyJ,KAAK1D,SAAU,KAEpC,IAAK,IAAI,EAAE,EAAG,EAAEyW,EAAY9c,OAAQ,IAAI,CACtC,IAAI,EAAO8c,EAAY,GAAG,GACtBC,GAAUhT,KAAK1D,SAAW0D,KAAK9D,KAAO8D,KAAK9D,KAAQ,EAAO,IAAM,EACpE6W,EAAY,GAAG,IAAMC,EAIvB,IAFA,IAAIC,EAAgB,GAEX,EAAE,EAAG,EAAI,GAAI,IAAI,CAKxB,IAJA,IAAIC,EAAc,EACdC,EAAa,EACbC,EAAa,EACbC,EAAY,EACP,EAAE,EAAG,EAAIN,EAAY9c,OAAQ,IAAI,CACxC,IAAI,EAAO8c,EAAY,GAAG,GACtB,EAAMA,EAAY,GAAG,GAMzB,GAJI,GAAQ,IACVG,EAAc,EACdC,EAAa,GAEX,GAAQ,EAAE,CACZC,EAAa,EACbC,EAAY,EACZ,OAGJ,GAAIH,GAAeE,EACjBH,EAAc1c,KAAK4c,OAEjB,CACF,IAAIG,GAAY,EAAIJ,IAAgBE,EAAaF,GACjDD,EAAc1c,KAAK4c,EAAaG,GAAY,EAAIA,GAAYD,IAOhE,IAHA,IAAIE,EAAU,CAAC,CAAC,KAAOvT,KAAK9D,MAExBsX,EAAQ,EACH,EAAI,EAAG,EAAI,GAAI,IAAK,CAC3B,IAAIC,EAAWF,EAAQ,EAAE,GAAG,GAC5BC,GAAS,GAAKC,EACdF,EAAQhd,KAAK,CAACid,EAAOP,EAAc,KAIrC,OAFAO,GAAS,GAAKP,EAAc,IAErB,CAACM,EAASC,IAInBrV,kBA37BO,SA27BW9D,GAChB2F,KAAK9B,WAAa7D,GAEpBgE,WA97BO,SA87BIzF,GACToH,KAAKpH,IAAMA,EACXoH,KAAK8N,MAAMI,KAAKtL,UAAU5C,KAAK8N,MAAMI,KAAKxL,WAAW9J,KAEvD8F,qBAl8BO,SAk8BcgV,EAAKxP,GAGxB,GAFAlE,KAAK+J,YAAc2J,EACnB1T,KAAKgK,iBAAmB9F,EACnBlE,KAAKjE,QAIN,CAGF,IAAIqI,EACA2H,EACA/L,KAAK+J,YAAYpJ,SAAS,OAASX,KAAK+J,YAAYpJ,SAAS,OAC/DyD,EAAOiI,SAASrM,KAAK+J,YAAY1Q,MAAM,GAAG,IAC1C0S,EAAS/L,KAAK+J,YAAY1Q,OAAO,KAGjC+K,EAAOiI,SAASrM,KAAK+J,YAAY1Q,MAAM,GAAG,IAC1C0S,EAAS/L,KAAK+J,YAAY1Q,OAAO,IAEnC,IAAIsW,EAAc9N,MAAM,IAAI4H,KAAK,GAC7BlR,EAAIyH,KAAKzH,EACboX,EAAYvL,GAAQ,EACpBuL,EAAYvL,EAAK,IAAM,EAEvB,IAAIwL,EAAK,CAAC,EAAE,EAAE,GACVC,EAAK,CAAC,EAAE,EAAE,GACVC,EAAK,CAAC,EAAE,EAAE,EAAE,IACZC,EAAK,CAAC,EAAE,EAAE,EAAE,IACZC,EAAK,CAAC,EAAE,EAAE,EAAE,IACZC,EAAM,EAEI,MAAVlE,IACFkE,EAAML,GAEM,MAAV7D,IACFkE,EAAMJ,GAEM,MAAV9D,IACFkE,EAAMH,GAEM,MAAV/D,IACFkE,EAAMF,GAEM,MAAVhE,IACFkE,EAAMD,GAGR,IAAK,IAAIja,EAAE,EAAGA,EAAEka,EAAIha,OAAQF,IAC1B4Z,GAAavL,EAAK6L,EAAIla,IAAI,GAAK,IAAM,EAEvC,IAAK,IAAI,EAAEwC,EAAG,EAAEA,EAAEyH,KAAKoI,UAAW,IAChCpI,KAAK0J,gBAAgB,GAAKiG,EAE5B3P,KAAKkN,iBAGLlN,KAAKlE,gBAAgBvD,GAAKyH,KAAKgK,sBArD/BhK,KAAKjE,SAAU,EACfiE,KAAK6N,eAyDT8F,iBAhgCO,SAggCU5N,EAAK3D,EAAGuG,EAAOiL,GAC9BxR,GAAK,IACL,MAAOuG,GAAS,GACRA,GAAS,IACT5C,EAAI7C,OAAO,QACVC,KAAK,OAAQyQ,GACbzQ,KAAK,UAAW,IAChBA,KAAK,IAAKf,GACVe,KAAK,IAAKnD,KAAK5E,IAAI+K,YAAcnG,KAAK5E,IAAIkL,SAAWqC,IACrDxF,KAAK,QAAS,KACdA,KAAK,SAAU,GACfA,KAAK,QAAS,WAEnBwF,GAAS,IAGfkL,cAhhCO,WAihCL,GAAGhR,UAAU,YAAYC,SAASC,QAEpC+Q,UAnhCO,SAmhCGnL,GACR,OAAO,GAAGoL,oBAAoBpL,EAAM,GAAG,IAAK,IAE9CqL,kBAthCO,WAuhCL,IAAK,IAAIje,EAAE,EAAGA,EAAEiK,KAAKgJ,iBAAiB/S,OAAQF,IAAI,CAChD,IAAI2d,EAAM1T,KAAKgJ,iBAAiBjT,GAC5BqO,EAAOsP,EAAIra,MAAM,EAAE,IAAIyH,QAAQ,GACnCd,KAAK2T,iBAAiB,GAAG1Q,OAAO,iBAAkBlN,EAAGqO,EAAMpE,KAAK8T,UAAU,IACtE9T,KAAK0J,gBAAgB3T,GAAGsD,MAAM,EAAE,IAAIyH,QAAQ,IAAM,IAAOd,KAAKnE,gBAC9DmE,KAAK2T,iBAAiB,GAAG1Q,OAAO,gBAAiBlN,EAAGiK,KAAK0J,gBAAgB3T,GAAGsD,MAAM,EAAE,IAAIyH,QAAQ,GAAId,KAAK8T,UAAU,MAI3HG,mBAhiCO,WAiiCL,IAAK,IAAIle,EAAE,EAAGA,EAAEiK,KAAKgJ,iBAAiB/S,OAAQF,IAG5C,IAFA,IAAI2d,EAAM1T,KAAKgJ,iBAAiBjT,GAC5BqO,EAAOsP,EAAIra,MAAM,EAAE,IAAIyH,QAAQ,GAC1B7J,EAAE,EAAGA,EAAE,GAAIA,IACD,GAAbyc,EAAI,GAAGzc,IACP+I,KAAK2T,iBAAiB,GAAG1Q,OAAO,iBAAkBlN,EAAGkB,EAAG+I,KAAK8T,WAAW7c,EAAEmN,GAAM,KAE/C,GAAjCpE,KAAK0J,gBAAgB3T,GAAG,GAAGkB,IAAc+I,KAAKnE,gBAC9CmE,KAAK2T,iBAAiB,GAAG1Q,OAAO,gBAAiBlN,EAAGkB,EAAG+I,KAAK8T,WAAW7c,EAAE+I,KAAK0J,gBAAgB3T,GAAGsD,MAAM,EAAE,IAAIyH,QAAQ,IAAI,MAKnIoM,eA9iCO,WA+iCLlN,KAAK6T,gBACD7T,KAAKnD,cACPmD,KAAKiU,qBAEEjU,KAAKrD,cACZqD,KAAKgU,qBAGTpX,cAvjCO,WAwjCDoD,KAAKrD,aACPqD,KAAKrD,cAAe,EAGpBqD,KAAKrD,cAAe,EAEtBqD,KAAKkN,kBAEPpQ,eAhkCO,WAikCDkD,KAAKnD,cACPmD,KAAKnD,eAAgB,EAGrBmD,KAAKnD,eAAgB,EAEvBmD,KAAKkN,kBAIPgH,uBA3kCO,WA4kCL,GAAGrR,UAAU,qBAAqBC,SAASC,OAS3C,IARA,IAAIoR,EAAWnT,SAASwE,eAAe,SAASC,wBAC5C2O,EAAcpT,SAASwE,eAAe,kBAAkBC,wBAExD4O,EAAKF,EAASG,KAAOnb,OAAOob,aAAevT,SAASwT,gBAAgBC,WACpEC,EAAKP,EAASQ,MAAQxb,OAAOob,aAAevT,SAASwT,gBAAgBC,WACrElc,EAAI4b,EAASS,IAAMzb,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAClEvD,EAAI6C,EAAYW,OAAS5b,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAEnE/e,EAAE,EAAGA,EAAE,EAAGA,IACf,GAAG8M,UAAU,qBACZK,OAAO,QACPC,KAAK,IAAKkR,EAAO,EAAFte,GAAK2e,EAAGL,IACvBlR,KAAK,IAAK5K,GACV4K,KAAK,QAAS,GACdA,KAAK,SAAUoO,EAAEhZ,GACjB4K,KAAK,QAAS,6BAGrB6R,sBA/lCO,WAgmCL,GAAGnS,UAAU,oBAAoBC,SAASC,OAU1C,IARA,IAAIoR,EAAWnT,SAASwE,eAAe,iBAAiBC,wBACpD2O,EAAcpT,SAASwE,eAAe,aAAaC,wBAEnD4O,EAAKF,EAASG,KAAOnb,OAAOob,aAAevT,SAASwT,gBAAgBC,WACpEC,EAAKP,EAASQ,MAAQxb,OAAOob,aAAevT,SAASwT,gBAAgBC,WACrElc,EAAI4b,EAASS,IAAMzb,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAClEvD,EAAI6C,EAAYW,OAAS5b,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAEnE/e,EAAE,EAAGA,EAAE,EAAGA,IACf,GAAG8M,UAAU,oBACZK,OAAO,QACPC,KAAK,IAAKkR,EAAO,EAAFte,GAAK2e,EAAGL,IACvBlR,KAAK,IAAK5K,GACV4K,KAAK,QAAS,GACdA,KAAK,SAAUoO,EAAEhZ,GACjB4K,KAAK,QAAS,4BAGrB8R,sBApnCO,WAqnCL,IAAId,EAAWnT,SAASwE,eAAe,UAAUC,wBAC7C2O,EAAcpT,SAASwE,eAAe,mBAAmBC,wBAEzDiP,EAAKP,EAASQ,MAAQxb,OAAOob,aAAevT,SAASwT,gBAAgBC,WACrElc,EAAI4b,EAASS,IAAMzb,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAClEvD,EAAI6C,EAAYQ,IAAMzb,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAEzE,GAAG7R,OAAO,oBACT7I,MAAM,WAAW,YACjBA,MAAM,OAAOsa,EAAG,MAChBta,MAAM,OAAQ7B,EAAE,IAAIgZ,GAAG,IAAI,MAC3BnX,MAAM,oBAAoB,eAC1B4L,SAEHmH,0BAnoCO,WAooCLnN,KAAKkU,yBACLlU,KAAKgV,wBACLhV,KAAKiV,wBACLjV,KAAKkV,uBAIP7V,aA3oCO,WA4oCLW,KAAKZ,KAAQY,KAAKZ,IACZY,KAAKZ,KAASY,KAAKV,MACvBU,KAAKV,KAAM,GAEbU,KAAKgN,wBAEPzN,aAlpCO,WAmpCLS,KAAKV,KAAQU,KAAKV,IACZU,KAAKV,KAASU,KAAKZ,MACvBY,KAAKZ,KAAM,GAEbY,KAAKgN,wBAEPA,qBAzpCO,WA0pCDhN,KAAKZ,KAAOY,KAAKV,KACnBU,KAAKiJ,QAAUjJ,KAAKkJ,cACpBlJ,KAAK9E,iBAAmB8E,KAAKwI,uBAC7BxI,KAAK3E,yBAA2B2E,KAAKyI,sBAE9BzI,KAAKZ,KACZY,KAAKiJ,QAAUjJ,KAAKmJ,YACpBnJ,KAAK9E,iBAAmB8E,KAAKyI,qBAC7BzI,KAAK3E,yBAA2B2E,KAAK+I,gBAGrC/I,KAAKiJ,QAAUjJ,KAAKoJ,YACpBpJ,KAAK9E,iBAAmB8E,KAAK0I,qBAC7B1I,KAAK3E,yBAA2B2E,KAAK+I,gBAGzCmM,oBA1qCO,WA2qCL,IAAIf,EAAWnT,SAASwE,eAAe,UAAUC,wBAC7C2O,EAAcpT,SAASwE,eAAe,mBAAmBC,wBAEzD4O,EAAKF,EAASG,KAAOnb,OAAOob,aAAevT,SAASwT,gBAAgBC,WACpEC,EAAKP,EAASQ,MAAQxb,OAAOob,aAAevT,SAASwT,gBAAgBC,WACrElc,EAAI4b,EAASS,IAAMzb,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAClEvD,EAAI6C,EAAYQ,IAAMzb,OAAO0b,aAAe7T,SAASwT,gBAAgBM,UAEzE,GAAG7R,OAAO,kBACT7I,MAAM,WAAW,YACjBA,MAAM,OAAOsa,GAAIA,EAAGL,GAAI,EAAE,MAC1Bja,MAAM,OAAQ,KAAK7B,EAAEgZ,GAAG,KAAK,MAC7BnX,MAAM,oBAAoB,cAC1B4L,SAIHxK,WA5rCO,SA4rCI2Z,EAAOpf,GAChBwR,GAAOmI,OACP,IAAI0F,EAAkB,EAClBC,EAAgB,GACpB,GAAa,YAATF,EAAoB,CACtB5N,GAAOqB,MAAM5I,KAAK0L,kBAAkB,CAAC1L,KAAKgJ,iBAAiBjT,KAAK,IAChE,IAAK,IAAIkB,EAAE,EAAGA,EAAE,GAAIA,IAAI,CACtB,GAA8E,IAA1E+J,SAASwE,eAAe,gBAAgBvO,GAAGqe,UAAUC,QAAQ,MAAM,KAAate,EAAIlB,EAAE,CACxFsf,EAAgBpe,EAChB,MAE4E,IAA1E+J,SAASwE,eAAe,gBAAgBvO,GAAGqe,UAAUC,QAAQ,MAAM,MACrEH,EAAkBne,GAGtB,IAAK,IAAI,EAAEme,EAAiB,EAAEC,EAAe,IAC3CrV,KAAKuO,eAAe,gBAAgB,EAAG,IAG3C,GAAa,WAAT4G,EAAmB,CACrBC,EAAkBrf,EAAIA,EAAE,EACxB,IAAK,IAAI,EAAEqf,EAAiB,EAAEA,EAAgB,EAAG,IAC/CpV,KAAKuO,eAAe,UAAU,EAAG,IAEnChH,GAAOqB,MAAM5I,KAAK0L,kBAAkB,CAAC1L,KAAK0J,gBAAgB3T,KAAK,MAMnEwF,mBA1tCO,WA0tCa,WAClBgM,GAAOmI,OACPnI,GAAOqB,MAAM5I,KAAK0L,kBAAkB1L,KAAKgJ,kBAAkB,IAC3D,IAAIjT,EAAI,EACFyY,EAAkB,SAAlBA,IACJ,GAAIzY,EAAI,GAAG,CAET,GADA,EAAKwY,eAAe,OAAOxY,EAAG,EAAKsS,oBAC2C,IAA1ErH,SAASwE,eAAe,gBAAgBzP,GAAGuf,UAAUC,QAAQ,MAAM,IAAU,CAE/E,IADA,IAAIhd,EAAI,EACCtB,EAAElB,EAAE,EAAGkB,EAAE,GAAIA,IAAI,CACxB,GAA8E,IAA1E+J,SAASwE,eAAe,gBAAgBvO,GAAGqe,UAAUC,QAAQ,MAAM,IAIrE,MAHAhd,IAMJ,IAAK,IAAI,EAAExC,EAAG,EAAEA,EAAEwC,EAAG,IACnB,EAAKgW,eAAe,gBAAgB,EAAGhW,EAAE,EAAK8P,oBAGlDtS,IACAqX,YAAW,WACToB,MACyB,IAAxB,EAAKnG,sBAGZmG,KAIF5S,kBAzvCO,WAyvCY,WACjB2L,GAAOmI,OACPnI,GAAOqB,MAAM5I,KAAK0L,kBAAkB1L,KAAK0J,iBAAiB,IAC1D,IAAI3T,EAAI,EACFyY,EAAkB,SAAlBA,IACJ,GAAIzY,EAAI,GAAG,CACT,GAAIA,EAAE,GAAK,GAAgC,IAA3B,EAAK+F,gBAAgB/F,GAAU,OAE/C,GADA,EAAKwY,eAAe,eAAexY,EAAG,EAAKsS,oBACZ,IAA3B,EAAKvM,gBAAgB/F,GACvB,IAAK,IAAIkB,EAAElB,EAAGkB,EAAElB,EAAE,EAAGkB,IACnB,EAAKsX,eAAe,UAAUtX,EAAG,EAAE,EAAKoR,oBAG5CtS,IACAqX,YAAW,WACToB,MACyB,IAAxB,EAAKnG,sBAGZmG,KAIFD,eAhxCO,SAgxCQhV,EAAIhB,GACjByI,SAASwE,eAAejM,GAAIic,UAAUC,IAAI,eAC1CrI,YAAW,WACTpM,SAASwE,eAAejM,GAAIic,UAAU1S,OAAO,iBAC1C,IAAFvK,IAILoD,WAxxCO,SAwxCIkX,GAAgC,WAA1B6C,EAA0B,uDAAtB,EAAGC,EAAmB,wDACzC,GAAO3V,KAAKxB,SAAUwB,KAAKjE,SAAc4Z,EAAzC,CAGA,IAAIpd,EAAIyH,KAAKzH,EACTwF,GAAO8U,EAAOA,EAAK,GAAK,EAC5B,GAAkC,GAA9B7S,KAAKwJ,iBAAiBzL,GAA1B,CAKAiC,KAAKxB,QAAS,EACdwB,KAAKzH,EAAc,GAATwF,EAAI,GACdiC,KAAKwJ,iBAAiBzL,GAAK6X,oBAAsB,GAC7CrO,GAAOkI,aACTlI,GAAOmI,OAETnI,GAAOqB,MAAM5I,KAAKwJ,iBAAiBzL,GAAMiC,KAAK9D,KAG9CkR,YAAW,WACJ7F,GAAOkI,aACVlI,GAAOqB,MAAM,EAAKY,iBAAiBzL,GAAM,EAAK7B,OAE/C,GACHkR,YAAW,WACJ7F,GAAOkI,aACVlI,GAAOqB,MAAM,EAAKY,iBAAiBzL,GAAM,EAAK7B,OAE/C,IACHkR,YAAW,WACJ7F,GAAOkI,aACVlI,GAAOqB,MAAM,EAAKY,iBAAiBzL,GAAM,EAAK7B,OAE/C,IACHkR,YAAW,WACJ7F,GAAOkI,aACVlI,GAAOqB,MAAM,EAAKY,iBAAiBzL,GAAM,EAAK7B,OAE/C,IACHkR,YAAW,WACJ7F,GAAOkI,aACVlI,GAAOqB,MAAM,EAAKY,iBAAiBzL,GAAM,EAAK7B,OAE/C,IAGH,IAAMsS,EAAkB,SAAlBA,EAAmBC,GACvB,EAAKF,eAAe,eAAeE,EAAM,IAAS,EAAKvS,IAAI,KACvDuS,EAAO,GAAK,GAGhBrB,YAAW,WACToB,EAAgBC,EAAK,KACpB,IAAS,EAAKvS,MAEnBsS,EAAgBxO,KAAKzH,EAAE,GAEvB,IAAK,IAAIxC,EAAEiK,KAAKzH,EAAE,EAAGxC,EAAEiK,KAAKzH,EAAGxC,IAC7BiK,KAAKuO,eAAe,UAAUxY,EAAG,KAAUiK,KAAK9D,IAAI,KAItDkR,YAAW,WACT,EAAK7U,EAAIA,EACTmd,IACIA,EAAM,GACJnO,GAAOkI,aACTlI,GAAOmI,OAET,EAAK/T,WAAWkX,EAAK,EAAG6C,GAAK,IAG7B,EAAKlX,QAAS,IAEf,KAAUwB,KAAK9D,UApEhB8D,KAAKxB,QAAS,IAuElB9C,WAt2CO,WAu2CLsE,KAAMrE,WAAW,EAAG,IAItBK,SA32CO,WA42C2B,GAA5BgE,KAAKwJ,iBAAiB,KAG1BxJ,KAAKhD,cAAczG,KAAKyJ,KAAKlE,iBAC7BkE,KAAK4J,UAAUrT,KAAKyJ,KAAK2J,QAG3B1M,WAn3CO,WAm3CK,WACV,IAAI+C,KAAKjE,SAAwC,GAA7BiE,KAAKhD,cAAc/G,OAAvC,CAGA,IAAI4K,EAAM4C,KAAKqJ,MAAMrJ,KAAKsJ,SAAW/M,KAAKhD,cAAc/G,QAGxD+J,KAAKnE,gBAAiB,EACtBmE,KAAK6J,qBAAuB7J,KAAKhD,cAAc6D,GAAKxH,QACpD2G,KAAKiK,YAAYhP,aAAe,CAACwH,MAAO,CAAC,CAACkG,MAAO,GAAIC,MAAM,EAAGC,IAAI,IAAKC,UAAU,IACjF9I,KAAK7C,SAAW0D,EAEhB,IAAMgS,EAAO,SAAPA,EAAQ9c,GACZ,EAAK2I,qBAAqB,EAAKkL,UAAU/I,GAAK9K,GAAI,EAAKiH,cAAc6D,GAAO,EAAF9K,IACjE,GAALA,EACAqX,YAAW,WACXyF,EAAK9c,EAAI,KACR,MAAU,EAAKmG,KAEXnG,EAAI,GACXqX,YAAW,WACTyF,EAAK9c,EAAI,KACR,KAAU,EAAKmG,MAItB8D,KAAK/D,eACL4W,EAAK,KAGP3V,iBAj5CO,WAk5CC8C,KAAKnE,iBAAkBmE,KAAKjE,UAGlCiE,KAAKnE,gBAAiB,EACtBmE,KAAKlE,gBAAkBkE,KAAK6J,qBAAqBxQ,QACjD2G,KAAKkN,iBACLlN,KAAKiK,YAAYhP,aAAe+E,KAAKuJ,gBACrCvJ,KAAKiK,YAAYgE,WAGnBlR,WA55CO,WA65CLiD,KAAKhD,cAAgB,GACrBgD,KAAK4J,UAAY,GACjB5J,KAAK6J,qBAAuB,GAC5B7J,KAAK7C,UAAY,EACjB6C,KAAKnE,gBAAiB,GAIxByR,oBAr6CO,WAs6CL,IAAsB,GAAlBtN,KAAK6E,SAAe,CAItB,IAFA,IAAIgR,EAAU7V,KAAKoK,aAAayL,QAC5BC,EAAW,EACN/f,EAAE,EAAGA,EAAE8f,EAAQ5f,OAAQF,IAC9B,GAAI8f,EAAQ9f,IAAMiK,KAAKlF,OAAO,CAC5Bgb,EAAW/f,EACX,MAKJ,IADA,IAAIggB,EAAU,GACL,EAAE,EAAG,EAAE/V,KAAKoK,aAAa4L,IAAIF,GAAU7f,OAAQ,IACtD8f,EAAQxf,KAAKyJ,KAAKoK,aAAa4L,IAAIF,GAAU,IAG/C,IAAK,IAAI,EAAE,EAAG,EAAE,EAAG,IAAI,CAErB,IAAIG,EAAWF,EAAQjV,QAAQ2C,KAAKrH,IAAL,MAAAqH,KAAYsS,IAC3CA,EAAQE,IAAa,IAErB,IAAI1c,EAAKsc,EAAQI,GACb1c,GAAMyG,KAAKlF,QAIfkF,KAAKmK,gBAAgB,GAAK5Q,EAC1ByG,KAAKhB,aAAa,GAAKgB,KAAKuI,QAAQhP,GAAImP,sBAJtC,SAQF,CAIF,IAFA,IAAIwN,EAAW,GACXC,EAAQ,GACH,EAAE,EAAG,EAAEnW,KAAKoK,aAAayL,QAAQ5f,OAAQ,IAAI,CACpD,IAAImgB,EAASpW,KAAKuI,QAAQvI,KAAKoK,aAAayL,QAAQ,IAChDQ,EAAO,SAACD,EAAO,MAAQpW,KAAK6E,SAAa,GAAlC,SAAuCuR,EAAO,MAAQpW,KAAK8E,SAAa,GAC5EuR,KAAQH,EAKbA,EAASG,GAAM9f,KAAK,IAJpB2f,EAASG,GAAQ,CAAC,GAClBF,EAAM5f,KAAK8f,IAOf,IAAI1e,EAAI,EACRwe,EAAM9E,OACN,IAAK,IAAI,EAAE,EAAG,EAAE8E,EAAMlgB,OAAQ,IAC5B,IAAK,IAAIgB,EAAE,EAAGA,EAAEif,EAASC,EAAM,IAAIlgB,OAAQgB,IAAI,CAC7C,IAAI,EAAK+I,KAAKoK,aAAayL,QAAQK,EAASC,EAAM,IAAIlf,IAItD,GAHA+I,KAAKmK,gBAAgBxS,GAAK,EAC1BqI,KAAKhB,aAAarH,GAAKqI,KAAKuI,QAAQ,GAAIG,qBACxC/Q,IACIA,EAAI,EACN,UAeVsH,mBA7+CO,SA6+CYlJ,GACjBiK,KAAKkG,gBAAkBnQ,GAGzBsX,yBAj/CO,WAk/CL,IAAI9T,EAAKyG,KAAKnC,KAAKyM,WAAWtK,KAAKnC,KAAKC,KAAO,GAC/CkC,KAAKmK,gBAAgB,GAAK5Q,EAC1ByG,KAAKhB,aAAa,GAAKgB,KAAKuI,QAAQhP,GAAImP,sBAI1C5J,WAx/CO,SAw/CIwX,GACTtW,KAAK6E,SAAWyR,EAAO,GACvBtW,KAAK8E,SAAWwR,EAAO,GACvBtW,KAAKsN,uBAGPK,qBA9/CO,WAigDL,IAFA,IAAI4I,EAAM,GACNC,EAAM,GACDzgB,EAAE,EAAGA,EAAEiK,KAAKoK,aAAayL,QAAQ5f,OAAQF,IAAI,CACpD,IAAIqgB,EAASpW,KAAKuI,QAAQvI,KAAKoK,aAAayL,QAAQ9f,IACpDwgB,EAAIhgB,KAAK6f,EAAO,OAChBI,EAAIjgB,KAAK6f,EAAO,OAElBG,EAAIlF,OACJmF,EAAInF,OAGJ,IAFA,IAAIoF,EAAY,CAACF,EAAI,GAAIA,EAAI,IAAKA,EAAI,IAAKA,EAAI,KAC3CG,EAAY,CAACF,EAAI,GAAIA,EAAI,IAAKA,EAAI,IAAKA,EAAI,KACtC,EAAE,EAAG,EAAExW,KAAKoK,aAAayL,QAAQ5f,OAAQ,IAAI,CAMpD,IALA,IAAI0gB,EAAO,EACPC,EAAO,EACP,EAAS5W,KAAKuI,QAAQvI,KAAKoK,aAAayL,QAAQ,IAChDgB,EAAK,EAAO,MACZC,EAAK,EAAO,MACP,EAAE,EAAG,GAAG,EAAG,IACdD,EAAKJ,EAAU,KACjBE,EAAO,GAELG,EAAKJ,EAAU,KACjBE,EAAO,GAGX,EAAO,MAAQD,EACf,EAAO,MAAQC,IAKnBxZ,aA9hDO,WA8hDO,WACZiK,GACG0P,SACAtK,MAAK,WACJ,EAAKhP,kBAAoB,GACzB,EAAKD,mBAAoB,EACzB6J,GAAQ2P,QAAQC,SAAQ,SAAAC,GAAK,OAAK,EAAKzZ,kBAAkBlH,KAAK2gB,EAAOrf,SACrE,EAAKwS,YAAchD,GAAQ2P,QAAQ,MAEpCG,OAAM,SAAAC,GAAE,OAAKC,MAAMD,OAGxBE,YA1iDO,SA0iDK/G,GACR,IAAI2B,EAAsC,KAA/B3B,EAAK9E,QAAU8E,EAAK/E,WAAiBpE,GAAKkI,UAAUpT,IAAI5D,MAC/D4Z,EAAM,KAAS9K,GAAKkI,UAAUpT,IAAI5D,QACpC4Z,EAAM,KAAS9K,GAAKkI,UAAUpT,IAAI5D,OAEhC0H,KAAKxC,mBACPwC,KAAKqK,YAAYkN,SAASvX,KAAK3C,cAAcma,SAASjH,EAAK5H,MAAO,CAAC8O,SAAUvF,EAAKwF,OAAQnH,EAAKM,SAAS,OAI9GtT,oBApjDO,SAojDaxH,GAClBiK,KAAK3C,aAAetH,GAGtBsG,aAxjDO,WAyjDL2D,KAAK1D,SAAW0D,KAAK9D,KAIvByb,WA7jDO,aAulDPC,kBAvlDO,WAwlDL,IAAI/W,EAAMb,KAAK1B,MAAM0M,YAAc,EAC/BnK,GAAO,EACTb,KAAK8N,MAAMC,gBAAgB9H,gBAAgBpF,GAG3Cb,KAAK8N,MAAMC,gBAAgBpJ,SAI/BpG,wBAjmDO,SAimDiB/F,GACtBwH,KAAK1B,MAAM9F,KAAOA,EACN,QAARA,EACFwH,KAAK1B,MAAMG,WAAY,GAGvBuB,KAAK9B,WAAa,UAClB8B,KAAK1B,MAAMG,WAAY,KAO7BsC,QAn5Da,WAm5DJ,WAEe,QAAlBf,KAAKnC,KAAKhG,OACZmI,KAAKnC,KAAKhG,KAAOmJ,SAAS6W,cAAc,SAASvC,UAC3B,0BAAlBtV,KAAKnC,KAAKhG,OACZmI,KAAKnC,KAAKhG,KAAO,SAIrBmI,KAAKuM,eAEiB,0BAAlBvM,KAAKnC,KAAKhG,KACZmI,KAAK4N,kBAGL5N,KAAKuN,eAEPhG,GAAOuQ,iBAAiBrL,MAAK,WACzB,EAAKjO,QAAS,EACd,EAAK+K,gBAAgB9G,MAAQ,MAGjC,IAAIW,EAAOpD,KACXuH,GAAOwQ,eAAiB,CACpBC,IAAK,SAACzH,GACJnN,EAAK0N,mBAAmBP,GACxBnN,EAAKkU,YAAY/G,IAEnBb,KAAM,cAIVvW,OAAO8e,SAAWjY,KAAKmN,0BAGvBnM,SAASC,iBAAiB,WAAW,SAACd,GACpC,IAAIvH,EAAMuH,EAAMvH,IACZ,CAAC,IAAI,KAAK+H,SAAS/H,IACrB,EAAKqD,eAEH,CAAC,IAAI,KAAK0E,SAAS/H,IACrB,EAAK2B,WAEH,CAAC,IAAI,KAAKoG,SAAS/H,IACrB,EAAKqE,aAEH,CAAC,IAAI,KAAK0D,SAAS/H,IACrB,EAAKsE,mBAEH,CAAC,IAAI,KAAKyD,SAAS/H,IACrB,EAAKoD,WAEH,CAAC,IAAI,KAAK2E,SAAS/H,IACrB,EAAK8C,aAEH,CAAC,IAAI,KAAKiF,SAAS/H,IACjB,EAAKiF,KAAKG,SACZ,EAAKH,KAAKG,QAAS,GAGnB,CAAC,IAAI,KAAK2C,SAAS/H,IACjB,EAAKiF,KAAKI,UAAa,EAAKJ,KAAKG,SACnC,EAAKH,KAAKI,SAAU,GAGpB,CAAC,KAAK0C,SAAS/H,IACjBuH,EAAMS,iBAEJ,CAAC,KAAKD,SAAS/H,KACjB6I,QAAQC,IAAI,MACZwW,EAAYC,QAAQ,UAAW,CAC7BjU,KAAM,OAERzC,QAAQC,IAAI,EAAKpD,MAAM9F,UAgB3B,IAAM4f,EAA0B,CAAEC,WAAW,EAAMC,SAAS,EAAMC,YAAW,GACzEC,EAAiBxX,SAASwE,eAAe,mBAAmBiT,WAAWZ,cAAc,iBACrFa,EAAoB1X,SAASwE,eAAe,mBAAmBiT,WAAWZ,cAAc,aAE5F,SAASc,EAAwBC,EAAWC,GAAkB,IAAPhG,EAAO,uDAAF,EACxD,GAAI+F,IACAA,EAAUpD,UAAUC,IAAI,oBACxBrI,YAAW,WACHwL,EAAUpD,UAAUsD,SAAS,qBAC7BF,EAAUpD,UAAU1S,OAAO,sBAE3B,IAAL+P,IACGgG,EAAUrD,UAAUsD,SAAS,sBAAqB,CACpDD,EAAUrD,UAAUC,IAAI,qBACxB,IAAIsD,EAAgB,CAACF,GACjBG,EAAUnG,EACVoG,EAAYjY,SAASwE,eAAe,iBAAuE,EAAtDuT,EAAcA,EAAc9iB,OAAO,GAAGsD,GAAGF,MAAM,GAAG,IAAM,IAEjH,MAAO4f,GAAqD,IAAxCA,EAAU3D,UAAUC,QAAQ,MAAO,IACnD0D,EAAUzD,UAAUC,IAAI,qBACxBsD,EAAcxiB,KAAK0iB,GACnBA,EAAYjY,SAASwE,eAAe,iBAAuE,EAAtDuT,EAAcA,EAAc9iB,OAAO,GAAGsD,GAAGF,MAAM,GAAG,IAAM,IAC7G2f,GAAWnG,EAEfzF,YAAW,WACP,MAAO2L,EAAc9iB,OAAS,EAAE,CAC5B,IAAIijB,EAAOH,EAAcI,MACrBD,EAAK1D,UAAUsD,SAAS,sBACxBI,EAAK1D,UAAU1S,OAAO,wBAGvB,IAARkW,IAKf,IAAII,EAAoB,SAASC,EAAeC,GAAU,wBAElCD,GAFkC,IAEtD,2BAAmC,SAE/B,GAAIX,EAAkBlD,UAAUsD,SAAS,WAAW,CAChD,IAAIF,EAAY5X,SAASwE,eAAe,OAA4C,EAApCgT,EAAelD,UAAUjc,MAAM,EAAE,IAC7Ewf,EAAY7X,SAASwE,eAAe,gBAAqD,EAApCgT,EAAelD,UAAUjc,MAAM,EAAE,IAC1Fsf,EAAwBC,EAAWC,KAPW,gCAYtDU,EAAoB,IAAIC,iBAAiBJ,GAI7C,GAHAG,EAAkBE,QAAQf,EAAmBN,GAGzChV,EAAK9E,MAAMmM,QAAQ,CACrBrH,EAAKuU,aACL,IAAIO,EAAc,IAAI5Q,GAAKoS,OAAO,0BAClCxB,EAAYyB,UAAU,aAAa,SAASC,GA2C1C,GAzCAxW,EAAK9E,MAAMG,WAAY,EACA,QAAnB2E,EAAK9E,MAAM9F,MACb4K,EAAK7E,wBAAwB,YAIT,OAAhBqb,EAAQvf,OACV+I,EAAK9E,MAAMqM,IAAMiP,EAAQthB,MACE,SAAvB8K,EAAK9E,MAAMoM,WACbtH,EAAK9G,SAAW8G,EAAKlH,KAAOkH,EAAK9E,MAAMqM,IAAMvH,EAAK9E,MAAMsM,OAASxH,EAAK9E,MAAMuM,YAI5D,SAAhB+O,EAAQvf,OACV+I,EAAK9E,MAAMsM,MAAQgP,EAAQthB,MACA,SAAvB8K,EAAK9E,MAAMoM,WACbtH,EAAK9G,SAAW8G,EAAKlH,KAAOkH,EAAK9E,MAAMqM,IAAMvH,EAAK9E,MAAMsM,OAASxH,EAAK9E,MAAMuM,YAI9D,UAAhB+O,EAAQvf,OACV+I,EAAK9E,MAAMwM,UAAY1H,EAAK9E,MAAMwM,SAC7B1H,EAAK9E,MAAMwM,SAKN1H,EAAKrH,SAA8B,WAAnBqH,EAAKlF,YAC7BkF,EAAK0K,MAAMoC,WAAWrM,eAAe,IAJrCT,EAAK2G,YAAc,GACnB3G,EAAK4G,iBAAmB,KAQR,cAAhB4P,EAAQvf,MACa,WAAnB+I,EAAKlF,aACPkF,EAAK9E,MAAMyM,SAAW6O,EAAQthB,MAC9B8K,EAAK0K,MAAMoC,WAAWrM,eAAe+V,EAAQthB,QAK7B,SAAhBshB,EAAQvf,KAAgB,CAC1B,IAAIqT,EAAMkM,EAAQthB,MACP,GAAPoV,GACFtK,EAAK0K,MAAM+L,oBAAoBlT,WAAW,GAAI,IAErC,GAAP+G,GACFtK,EAAK0K,MAAM+L,oBAAoBlT,WAAW,GAAI,KAErC,GAAP+G,GACFtK,EAAK0K,MAAM+L,oBAAoBlT,WAAW,IAAK,IAEtC,GAAP+G,GACFtK,EAAK0K,MAAM+L,oBAAoBlT,WAAW,IAAK,KAEtC,GAAP+G,GACFtK,EAAK0K,MAAM+L,oBAAoBlT,WAAW,IAAK,IAEtC,GAAP+G,GACFtK,EAAK0K,MAAM+L,oBAAoBlT,WAAW,IAAK,KAEtC,GAAP+G,GACFtK,EAAK0K,MAAM+L,oBAAoBlV,QAIf,eAAhBiV,EAAQvf,OACV+I,EAAK9E,MAAM0M,aAAe4O,EAAQthB,MAAQ8K,EAAK9E,MAAM2M,oBAAsB,EAC3E7H,EAAKwU,2B,UiB16Ef,GAAOxW,OAASA,GAED,UCJf0Y,eAAUC,IAAKC,MAAM,S,sDCHrB,W,oCCAA,W,sDCAA,W,yLCAA,W,kCCAA,W,kCCAA","file":"js/app.1372d912.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=46a1125a&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PhraseFilter.vue?vue&type=style&index=0&id=ac833fb6&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InterfaceMovableWheelFixed.vue?vue&type=style&index=0&id=3886aa25&lang=css\"","<template>\n<div>\n\n<!-- Nav Bar -->\n<nav class=\"navbar navbar-expand-sm bg-light navbar-hover\">\n  <div class=\"collapse navbar-collapse\">\n    <ul class=\"navbar-nav mr-auto\">   \n          <li class=\"nav-item dropdown\">\n              <button class=\"dropdown-toggle btn\" id=\"browse_samples\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                  Browse Samples\n              </button>\n              <ul class=\"dropdown-menu\">\n                <li id=\"resample\" v-on:click=\"get_data\">Random Phrase</li>\n                  <li v-for=\"song in Object.keys(this.songData)\" v-bind:key=\"song\">\n                    <a class=\"dropdown-item dropdown-toggle\">Song {{song}} {{this.songData[song]['key']}}</a>\n                      <ul class=\"dropdown-menu\">\n                        <div v-for=\"segment in Object.keys(this.songData[song])\" v-bind:key=\"segment\">\n                          <div v-if=\"segment != 'key'\">\n                            <li v-on:click=\"get_data\"><a class=\"dropdown-item phraseSelect\" \n                              v-bind:data-song=\"song\"\n                              v-bind:data-segment=\"segment\">\n                              Segment {{segment}} {{this.songData[song][segment]}}</a></li>\n                          </div>\n                        </div>\n                      </ul>\n                  </li>\n              </ul>\n          </li>\n      </ul>\n    <ul class=\"navbar-nav\">\n      <li class=\"nav-item\">\n        <button class=\"btn\" disabled>Phrase ID: {{this.songID.slice(0,3)}}: {{this.songname}} {{this.songID.slice(4)}} | {{this.songkey}}</button><br> \n        <!-- <button class=\"btn\" v-on:click=\"test\">test</button><br>  -->\n      </li>\n      <li class=\"nav-item\">\n        <a tabindex=\"0\" class=\"btn\" role=\"button\" data-toggle=\"popover\" data-trigger=\"focus\" title=\"Help\" rel=\"popover\"\n        data-content=\"\n        Playback: <br> \n        <ul>\n          <li>e: reset player</li>\n          <li>r: replay</li>\n          <li>t: test</li>\n          <li>a: a to test</li>\n          <li>s: show answer</li>\n          <li>n: new sample</li>\n        </ul>\n        Input-Fixed: <br> \n        <ul>\n          <li>Mouse</li>\n          <ul>\n            <li>left click: select a major triad</li>\n            <li>right click: select a minor triad</li>\n            <li>middle click or (shift + left click): select a dominant 7th chord</li>\n            <li>alt + left/right click: select a major/minor 7th chord</li>\n          </ul>\n          <li>Keyboard</li>\n          <ul>\n            <li>'1'-'=': select root</li>\n            <li>shift + root: major triad</li>\n            <li>ctrl + root: minor triad</li>\n            <li>alt + root: moninant 7th chord</li>\n            <li>alt+ shift/ctrl + root: major/minor 7th chord</li>\n          </ul>\n        </ul>\n        Input-Movable: <br> \n        <ul>\n          <li>Mouse</li>\n          <ul>\n            <li>left click: select a triad corresponding the the scale degree</li>\n            <li>shift + left click: select a major triad</li>\n            <li>ctrl + left click: select a minor triad</li>\n            <li>alt + left click: select a dominant seventh chord</li>\n            <li>alt + shift/ctrl + left click: select a major/minor seventh chord</li>\n          </ul>\n          <li>Keyboard</li>\n          <ul>\n            <li>1-7: select a triad corresponding the the scale degree</li>\n            <li>shift + 1-7: select a major triad</li>\n            <li>ctrl + 1-7: select a minor triad</li>\n            <li>alt + 1-7: select a dominant seventh chord</li>\n            <li>alt + shift/ctrl + 1-7: select a major/minor seventh chord</li>\n          </ul>\n        </ul>\n        \"  data-html=\"true\">\n          Help\n        </a><br>\n      </li>\n    </ul>\n  </div>\n</nav>\n\n\n<div class=\"container-fluid pt-3 pb-5\" id=\"main_app\">\n  <!-- Original -->\n  <!-- Time steps: Original -->\n  <table id=time_steps class=\"table table-fixed prog_table\">\n    <thead class=\"thead-light\">\n    <tr>\n      <th class=\"prog_head table_cell\"></th>\n      <div>\n        <th class=\"time_cell\" v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'time'+(i-1)\"> {{ (i+3-(i-1)%4)/4 + \".\" + ((i-1)%4+1)}} </th>\n        <th class=\"time_cell\"></th><th class=\"time_cell\"></th>\n      </div>\n    </tr>\n    </thead>\n  </table> \n\n  <midi-visualizer type=\"piano-roll\" class=\"right\" id=\"original_vis\" v-bind:noteSequence=\"this.original_noteseq\" v-bind:config=\"this.cfg\"></midi-visualizer>\n  <div class=\"up\">\n  <midi-visualizer type=\"piano-roll\" class=\"right\" id=\"original_vis_overlay\" v-bind:noteSequence=\"this.original_noteseq_overlay\" v-bind:config=\"this.cfg_mel\"></midi-visualizer>\n  <svg class=\"original_svg svg right\" height=\"0px\"></svg>\n  \n  \n  <div class=\"up\">\n\n  <!-- Original Progression -->\n  <table id=\"original_prog\" class=\"table table-fixed table-striped prog_table\">\n    <tbody>\n    <tr>\n        <th id=play_prog_original class=\"prog_head\" v-on:click=\"play_prog_original\">Original</th>\n        <div>\n        <td v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'original_prog'+(i-1)\" class=\"table_cell\" style=\"font-weight:normal;\" v-on:click=\"play_chord('original', i-1)\" > {{ original_chd_str[i-1] }} </td>\n        <th></th><th></th>\n        </div>\n    </tr>\n    </tbody>  \n  </table>\n\n  <!-- Altered -->\n  <!-- Time steps -->\n  <table id=altered_time_steps class=\"table table-fixed prog_table\">\n    <thead class=\"thead-light\">\n    <tr>\n        <div>\n          <th class = \"prog_head table_cell\" v-on:click=\"replay_all\"></th>\n          <th class=\"time_cell\" v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'time_altered'+(i-1)\" v-on:click=\"replay_bar(i-1)\"> {{ (i+3-(i-1)%4)/4 + \".\" + ((i-1)%4+1)}} </th>\n          <th class=\"time_cell\" v-on:click=\"replay_all\">Replay</th><th class=\"time_cell\" v-on:click=\"replay_all\"></th>\n        </div>\n    </tr>\n    </thead>\n  </table> \n\n  <canvas id=\"altered_canvas\" class=\"right\"></canvas>\n  <svg class=\"swapped_svg svg right\" id=\"swapped_svg\" height=\"0px\"></svg>\n\n  <div class=\"up\">\n  <!-- Altered Progression -->\n  <table id=saved_prog class=\"table table-fixed table-striped prog_table\">\n    <tbody>\n      <tr>\n        <div>\n        <th id=play_prog_original class=\"prog_head\" v-on:click=\"play_prog_altered\">Altered</th>\n        <td v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'altered'+(i-1)\" class=\"table_cell\" style=\"font-weight:normal;\" v-on:click=\"play_chord('altered',i-1)\">\n          <span v-if=\"! hide_vis_input\">{{altered_chd_str[i-1]}}</span>\n        </td>\n        <th><span class=\"table_tail\" v-on:click=\"test_add\" v-if=\"! this.playing\">Add to test</span></th>\n        </div>\n    </tr>\n    </tbody>\n  </table> \n\n  <!-- Interfacing -->\n  <div class=\"row\">\n    <div class=\"col-4\">\n    <button id=\"altered_reset\" class=\"btn btn-light\" v-on:click=\"player_reset\">Reset</button>\n    <br>\n    Bpm: <span id=bpm_text>{{this.bpm}}</span><div class=slider_container><input type=\"range\" class=\"form-control-range slider\" min=30 max=200 v-model=\"bpm\" v-on:pointerout=\"follow_tempo\"></div>\n    Next bpm: <span id=bpm_text>{{this.next_bpm}}</span><div class=slider_container><input type=\"range\" class=\"form-control-range slider\" min=30 max=200 v-model=\"next_bpm\"></div>\n    Velocity: <span id=bpm_text>{{this.velocity_scale}}%</span><div class=slider_container><input type=\"range\" class=\"form-control-range slider\" id=vel_slider min=5 max=100 v-model=\"velocity_scale\"></div>\n    Expressive dynamics: <span >{{this.expressiveness_vel}}% <div class=slider_container><input type=\"range\" class=\"form-control-range slider\" min=0 max=300 v-model=\"expressiveness_vel\"></div></span>\n    Expressive timing: <span >{{this.expressiveness_tempo}}% <div class=slider_container><input type=\"range\" class=\"form-control-range slider\" min=0 max=300 v-model=\"expressiveness_tempo\"></div></span>\n\n    <div class=\"input-group-prepend\">\n    <div class=\"input-group-text\" style=\"width:160px\">\n      <input type=\"checkbox\" id=\"root_overlay\" v-bind:checked=\"root_overlay\" v-on:click=\"this.root_on_click()\"> <span> &nbsp; Root overlay</span>\n    </div>\n    </div>\n    <div class=\"input-group-prepend\">\n      <div class=\"input-group-text\" style=\"width:160px\">\n        <input type=\"checkbox\" id=\"chord_overlay\" v-bind:checked=\"chord_overlay\" v-on:click=\"this.chord_on_click()\"> <span> &nbsp; Chord overlay</span>\n      </div>\n    </div>\n\n    <br>\n    <div>\n    <button class=\"btn btn-light\" v-on:click=\"test_clear\" :disabled=\"this.test_chd_strs.length < 1 || playing\">Clear Test</button><br>\n    <br>\n    <button class=\"btn btn-light\" v-on:click=\"test_apply\" :disabled=\"this.test_chd_strs.length < 1 || playing\">Test</button><br>\n    <button class=\"btn btn-light\" v-on:click=\"test_show_answer\" :disabled=\"! hide_vis_input || playing\">Show answer</button><br>\n    </div>\n    \n    <div v-for=\"i in this.test_chd_strs.length\" :key=\"i\">\n      <div v-if=\"i == this.test_idx + 1 && ! hide_vis_input\" class=\"test_correct no_click\">\n        <span v-for=\"j in 4\" :key=\"j\">\n          {{this.test_chd_strs[i-1][4*(j-1)]}}\n          <span v-if=\"j<4\"> &nbsp;-&nbsp;</span>\n        </span>\n      </div>\n      <div v-else class=\"no_click\">\n        <span v-for=\"j in 4\" :key=\"j\">\n          {{this.test_chd_strs[i-1][4*(j-1)]}}\n          <span v-if=\"j<4\"> &nbsp;-&nbsp;</span>\n        </span>\n      </div>\n    </div>\n    \n    <br><button class=\"btn btn-light\" v-on:click=\"connect_midi\">Connect MIDI output device (Chrome only)</button>\n    <div class=\"dropdown\">\n      <button class=\"btn btn-light dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n        Channel {{this.midi_channel}}\n      </button>\n      <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n      <div v-for=\"i in 16\" :key=\"i\">\n        <a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_midi_channel(i)\">Channel {{i}}</a>\n      </div>\n      </div>\n    </div>\n      \n    <br>\n    <p v-if=\"this.show_midi_devices\">{{this.midi_device_names}}</p><br>\n    <p v-if=\"!this.phrasebank_loaded\">Loading phrase bank {{n_loaded}}/{{n_songs}} ... This could take around a minute.</p>\n    <p v-if=\"this.demo.name == 'hst-performance anthem'\">Anthem demo: phrase {{this.demo.line}} bar {{this.demo.bar}} <span v-if=\"this.demo.locked\">locked</span><span v-if=\"this.demo.locked1\">locked</span></p>\n\n  </div>\n\n  <div class=\"col-6\">\n    <div class=\"btn-group\">\n      <button class=\"btn btn-light dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">{{\"Input type: \"+this.input_type}}\n      <span class=\"caret\"></span></button>\n      <ul class=\"dropdown-menu\">\n        <li><a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_input_type('movable')\">Movable</a></li>\n        <li><a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_input_type('fixed')\">Fixed</a></li>\n      </ul>\n\n    <div class=\"dropdown\" v-if=\"this.input_type == 'movable'\">\n      <button class=\"btn btn-light dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">{{\"Key: \"+this.key+\" major\"}}\n      <span class=\"caret\"></span></button>\n      <ul class=\"dropdown-menu\">\n        <li><a v-for=\"key in this.scales_major\" \n        v-bind:key=\"key\" class=\"dropdown-item\" href=\"#\" v-on:click=\"change_key(key)\">{{key + \" major\"}}</a></li>\n      </ul>\n    </div>\n\n    <div class=\"btn-group\">\n      <button class=\"btn btn-light dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">{{\"Wheel: \"+this.wheel.mode}}\n      <span class=\"caret\"></span></button>\n      <ul class=\"dropdown-menu\">\n        <li><a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_wheel_input_type('none')\">None</a></li>\n        <li><a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_wheel_input_type('relative')\">Relative</a></li>\n        <li><a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_wheel_input_type('fixed')\">Fixed</a></li>\n      </ul>\n    </div>\n\n    </div>\n\n    <!-- Interface UIs -->  \n    <div v-if=\"this.loaded && ! this.hide_vis_input\">\n    <InterfaceFixed v-if=\"input_type == 'fixed'  && !this.wheel.connected\" v-on:update_current_chord=\"update_current_chord\"/>\n    <InterfaceMovable ref=\"dial\" v-if=\"input_type == 'movable' && !this.wheel.connected\" v-bind:interface_key=\"this.key\" v-bind:roots=\"scales_major\" v-on:update_current_chord=\"update_current_chord\"/>\n    <InterfaceMovableWheel ref=\"dial_wheel\" v-if=\"this.wheel.mode == 'relative' && this.wheel.connected\" v-bind:interface_key=\"this.key\" v-bind:roots=\"scales_major\" v-on:update_current_chord=\"update_current_chord\"/>\n    <InterfaceMovableWheelFixed ref=\"dial_wheel\" v-if=\"this.wheel.mode == 'fixed' && this.wheel.connected\" v-bind:interface_key=\"this.key\" v-bind:roots=\"scales_major\" v-on:update_current_chord=\"update_current_chord\"/>\n    </div>\n\n  </div>\n\n  <!-- Next phrase -->\n  <div class=\"col-1\">\n    <p>Next phrase:</p>\n    <PhraseFilter v-if=\"this.demo.name == 'none' && !this.wheel.connected\" v-on:set_filter=\"set_filter\"/>\n    <PhraseFilterWheel ref=\"phrase_filter_wheel\" v-if=\"this.demo.name == 'none' && this.wheel.connected\" v-on:set_filter=\"set_filter\"/>\n    <PhraseSelectDemo v-if=\"this.demo.name != 'none'\" ref=\"phrase_selector_demo\" v-bind:noteseqs=\"this.next_phrases\" v-on:update_next_phrase=\"update_next_phrase\"/>\n    <PhraseSelect v-if=\"this.demo.name == 'none' && !this.wheel.connected\" ref=\"phrase_selector\" v-bind:noteseqs=\"this.next_phrases\" v-on:update_next_phrase=\"update_next_phrase\"/>\n    <PhraseSelect v-if=\"this.demo.name == 'none' && this.wheel.connected\" id=\"phrase_select_wheel\" ref=\"phrase_selector\" v-bind:noteseqs=\"this.next_phrases\" v-on:update_next_phrase=\"update_next_phrase\"/>\n  </div>\n</div>\n</div>\n</div>\n</div>\n</div>\n\n<!-- Barlines -->\n<svg id=original_barline class=\"barline_svg\"></svg><br>\n<svg id=altered_barline class=\"barline_svg\"></svg>\n\n<!-- Player -->\n<midi-player v-bind:noteSequence=\"this.original_noteseq\" sound-font visualizer=\"#original_vis\" id=\"original_player\"></midi-player>\n\n<!-- Mel/Acc Toggle -->\n<div id=\"melacc_toggle\">\n<div class=\"input-group-prepend\">\n  <div class=\"input-group-text\" style=\"width:160px\">\n    <input type=\"checkbox\" id=\"root_overlay\" v-bind:checked=\"mel\" v-on:click=\"this.mel_on_click()\"> <span> &nbsp; Melody</span>\n  </div>\n</div>\n<div class=\"input-group-prepend\">\n  <div class=\"input-group-text\" style=\"width:160px\">\n    <input type=\"checkbox\" id=\"chord_overlay\" v-bind:checked=\"acc\" v-on:click=\"this.acc_on_click()\"> <span> &nbsp; Accompaniment</span>\n  </div>\n</div>\n</div>\n\n</div>\n</template>\n\n<script>\n// import { NoteSequence } from '@magenta/music'\nimport { createQuantizedNoteSequence, unquantizeSequence } from '@magenta/music/esm/core/sequences'\nimport InterfaceFixed from './components/InterfaceFixed.vue'\nimport InterfaceMovable from './components/InterfaceMovable.vue'\nimport PhraseFilter from './components/PhraseFilter.vue'\nimport PhraseSelect from './components/PhraseSelect.vue'\nimport PhraseSelectDemo from './components/PhraseSelectDemo.vue'\nimport InterfaceMovableWheel from './components/InterfaceMovableWheel.vue'\nimport InterfaceMovableWheelFixed from './components/InterfaceMovableWheelFixed.vue'\nimport PhraseFilterWheel from './components/PhraseFilterWheel.vue'\nconst axios = require('axios').default\nconst d3 = require(\"d3\")\nconst mm = require(\"@magenta/music\")\nconst _ = require(\"html-midi-player\")\nconst Tone = require(\"tone\")\nconst {WebMidi} = require(\"webmidi\")\nconst Faye = require('faye')\nconsole.log(_)\nvar player = new mm.SoundFontPlayer('https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus')\n// var debug_player = new mm.SoundFontPlayer('https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus')\n\nexport default {\n  name: 'App',\n  components: {\n    InterfaceFixed,\n    InterfaceMovable,\n    PhraseFilter,\n    PhraseSelect,\n    PhraseSelectDemo,\n    InterfaceMovableWheel,\n    InterfaceMovableWheelFixed,\n    PhraseFilterWheel\n},\n  data: function(){\n    return{\n      // Constants (not really)\n      BACKEND_PATH: \"\",//\"\" //\"http://127.0.0.1:5000\"\n      DEBUG: false,\n      STEP_SIZE: 4,\n      scales_major: ['C', 'Db', 'D', 'Eb', 'E', 'F', 'F#', 'G', 'Ab', 'A', 'Bb', 'B'],\n      // Chord playback\n      prog_step_duration: 0.5,\n      octave_center: 48,\n\n      // Song data (original)\n      allData: {},\n\n      n_songs: 0,\n      n_loaded: 0,\n\n      songID: \"000\",\n      songname: '',\n      songkey: '',\n      songData: {},\n\n      original_noteseq: 0,\n      original_noteseq_mixed: 0,\n      original_noteseq_mel: 0,\n      original_noteseq_acc: 0,\n      original_noteseq_overlay: {notes:[{pitch:30, start:0, end:16}], totalTime: 16},\n      empty_noteseq: {notes:[{pitch:30, start:0, end:16}], totalTime: 16},\n\n      original_chd_str: 0,\n      original_chd_mat: 0,\n\n      notedic: 0,\n      notedic_mixed: 0,\n      notedic_mel: 0,\n      notedic_acc: 0,\n\n      sustain: [],\n\n      // Expressive performance\n      expressiveness_vel: 100,\n      expressiveness_tempo: 100,\n      expressiveness_dur: 100,\n\n      // Song data (altered)\n      altered_noteseq: {notes:[], totalTime: 16},\n      altered_noteseqs: [0,0,0,0],\n      altered_chd_str: Array(16).fill(\"\"),\n      altered_chd_mat: Array(16).fill(Array(36).fill(0)),\n\n      // Stored song data (test mode)\n      chds: [],\n      test_chd_strs: [],\n      test_chds: [],\n      altered_chd_str_hide: [],\n      test_idx: -1,\n\n      // Interfacing (outside)\n      bpm: 60,\n      next_bpm: 60,\n      velocity_scale: 10,\n      playing: false,\n      loaded: false,\n      phrasebank_loaded: false,\n      hide_vis_input: false,\n      input_type: \"fixed\",\n      key: \"C\",\n      \n      mel: false,\n      acc: true,\n\n      // Interfacing (inside)\n      t: 0,\n      chord_seq: [], // Entered chords for the current window\n      current_chd: '', // Queued chord for the next time step\n      current_chd_text: '',\n\n      // Altered visualiser\n      altered_vis: 0,\n\n      // Visualiser config\n      cfg: {\n        noteHeight: 4,\n        pixelsPerTimeStep: 100,\n        minPitch: 20,\n        maxPitch: 90,\n        noteSpacing: 1\n      },\n      cfg_mel: {\n        noteHeight: 4,\n        pixelsPerTimeStep: 100,\n        minPitch: 20,\n        maxPitch: 90,\n        noteSpacing: 1,\n        noteRGB: \"255,0,0\"\n      },\n\n      // Overlays\n      root_overlay: true,\n      chord_overlay: false,\n\n      // Next phrase\n      next_phrases_id: [0,0,0],\n      next_phrases: [0,0,0],\n      next_phrase_idx: -1,\n      edge_weights: [],\n\n      // Next phrase filtering\n      filter_h: -1,\n      filter_v: -1,\n\n      // MIDI output device\n      show_midi_devices: false,\n      midi_device_names: [],\n      midi_device: 0,\n      midi_channel: 1,\n\n      // Demos\n      demo: {\n        name: 'none',//'hst-performance anthem', 'none'\n        bar: -1,\n        line: 0,\n        chord_seq: ['1', '4', '5', '5', '5', '1', 'x5', '1', '6', 'x5', '5', 's6', '2', '1', '5', '1', '1', '4', '5', '5', '5', '1', 'x5', '1'],\n        phrase_seq: ['038_B', '050_B', '000_A', '001_A', '002_A', '003_A', '004_A', '005_A', '005_A'],\n        locked: true,\n        lock_passed: false,\n        locked1: true,\n        tempo_curve: [[13.71      , 71.42857143],\n       [14.55      , 80.        ],\n       [15.3       , 82.19178082],\n       [16.03      , 83.33333333],\n       [16.75      , 81.08108108],\n       [17.49      , 78.94736842],\n       [18.25      , 83.33333333],\n       [18.97      , 80.        ],\n       [19.72      , 84.50704225],\n       [20.43      , 77.92207792],\n       [21.2       , 83.33333333],\n       [21.92      , 81.08108108],\n       [22.66      , 80.        ],\n       [23.41      , 83.33333333],\n       [24.13      , 83.33333333],\n       [24.85      , 77.92207792],\n       [25.62      , 83.33333333],\n       [26.34      , 83.33333333],\n       [27.06      , 83.33333333],\n       [27.78      , 82.19178082],\n       [28.51      , 82.19178082],\n       [29.24      , 81.08108108],\n       [29.98      , 81.08108108],\n       [30.72      , 80.        ],\n       [31.47      , 75.94936709],\n       [32.26      , 85.71428571],\n       [32.96      , 77.92207792],\n       [33.73      , 84.50704225],\n       [34.44      , 84.50704225],\n       [35.15      , 81.08108108],\n       [35.89      , 75.        ],\n       [36.69      , 81.08108108],\n       [37.43      , 81.08108108],\n       [38.17      , 86.95652174],\n       [38.86      , 84.50704225],\n       [39.57      , 83.33333333],\n       [40.29      , 89.55223881],\n       [40.96      , 84.50704225],\n       [41.67      , 80.        ],\n       [42.42      , 84.50704225],\n       [43.13      , 83.33333333],\n       [43.85      , 85.71428571],\n       [44.55      , 84.50704225],\n       [45.26      , 85.71428571],\n       [45.96      , 83.33333333],\n       [46.68      , 82.19178082],\n       [47.41      , 76.92307692],\n       [48.19      , 80.        ],\n       [48.94      , 77.92207792],\n       [49.71      , 85.71428571],\n       [50.41      , 81.08108108],\n       [51.15      , 77.92207792],\n       [51.92      , 82.19178082],\n       [52.65      , 84.50704225],\n       [53.36      , 81.08108108],\n       [54.1       , 81.08108108],\n       [54.84      , 78.94736842],\n       [55.6       , 81.08108108],\n       [56.34      , 80.        ],\n       [57.09      , 78.94736842],\n       [57.85      , 81.08108108],\n       [58.59      , 81.08108108],\n       [59.33      , 84.50704225],\n       [60.04      , 68.96551724],\n       [60.91      , 73.17073171],\n       [61.73      , 81.08108108],\n       [62.47      , 76.92307692],\n       [63.25      , 80.        ],\n       [64.        , 73.17073171],\n       [64.82      , 77.92207792],\n       [65.59      , 75.94936709],\n       [66.38      , 81.08108108],\n       [67.12      , 81.08108108],\n       [67.86      , 75.94936709],\n       [68.65      , 77.92207792],\n       [69.42      , 78.94736842],\n       [70.18      , 80.        ],\n       [70.93      , 78.94736842],\n       [71.69      , 80.        ],\n       [72.44      , 76.92307692],\n       [73.22      , 77.92207792],\n       [73.99      , 81.08108108],\n       [74.73      , 77.92207792],\n       [75.5       , 76.92307692],\n       [76.28      , 80.        ],\n       [77.03      , 80.        ],\n       [77.78      , 80.        ],\n       [78.53      , 77.92207792],\n       [79.3       , 74.07407407],\n       [80.11      , 76.92307692],\n       [80.89      , 82.19178082],\n       [81.62      , 75.        ],\n       [82.42      , 80.        ],\n       [83.17      , 81.08108108],\n       [83.91      , 76.92307692],\n       [84.69      , 15.34526854]],\n\n        sustain:\n          [[0.00909090909090909, 4.0],\n          [4.013636363636364, 6.0],\n          [6.013636363636364, 7.995454545454545],\n          [8.018181818181818, 18.0],\n          [18.013636363636362, 20.0],\n          [20.009090909090908, 23.995454545454546],\n          [24.013636363636362, 26.0],\n          [26.009090909090908, 28.0],\n          [28.013636363636362, 34.0],\n          [34.013636363636365, 36.0],\n          [36.01363636363636, 37.99545454545454],\n          [38.01363636363636, 44.0],\n          [44.00909090909091, 46.0],\n          [46.00909090909091, 48.0],\n          [48.01363636363636, 51.99545454545454],\n          [52.018181818181816, 53.0],\n          [53.01363636363636, 54.0],\n          [54.00909090909091, 55.0],\n          [55.01363636363636, 56.0],\n          [56.01363636363636, 59.0],\n          [59.01363636363636, 60.0],\n          [60.01363636363636, 68.0],\n          [68.0090909090909, 70.0],\n          [70.01363636363637, 71.99545454545454],\n          [72.01818181818182, 82.00454545454545],\n          [82.01363636363637, 84.00454545454545],\n          [84.01363636363637, 88.0],\n          [88.0090909090909, 90.0],\n          [90.01363636363637, 91.99545454545454],\n          [92.01363636363637, 95.0]],\n        },\n\n      wheel:{\n        // Interface\n        enabled: false,\n        mode: 'none',\n        bpm_type: 'physical',\n\n        // Pedals\n        gas: 0,\n        brake: 0,\n        acc_ratio: 30,\n        clutched: false,\n\n        // Wheel\n        turn_idx: 0,\n      \n        // wheel_shift\n        wheel_shift: 0,\n        wheel_shift_offset: 0,\n      }\n    }\n  },\n  computed: {\n  },\n  methods: {\n    // Helpers\n    list_to_noteseq(notes_in, filter_start=0, filter_end=16){\n      let notes_out = []\n      for (let i=0; i<notes_in.length; i++){\n          let start = notes_in[i][0]\n          let end = notes_in[i][1]\n          let pit = notes_in[i][2]\n          if (filter_start >= 8){\n              start += 8\n              end += 8\n          }\n              if (start>=filter_start && start<filter_end){\n                  notes_out.push({pitch:pit, startTime:start, endTime:end})\n              }\n      }\n      return notes_out\n    },\n\n    chords_to_noteseq(chords, relative=true){ \n      \n      let mod_chords = []\n      for (let i=0; i<chords.length; i++){\n        let chord = chords[i]\n        let chroma = []\n        for (let j=0; j<12; j++){\n          if (chord[12+j] == 1){\n            chroma.push(j)\n          }\n        }\n        if (chord.slice(0,13).indexOf(1) == -1){\n          break\n        }\n        if (relative){\n          mod_chords.push([chord.slice(0,13).indexOf(1),chroma,0])\n        }\n        else{\n          mod_chords.push([chord.slice(0,13).indexOf(1),chroma,chord.slice(24,36).indexOf(1)])\n        }\n      }\n      chords = mod_chords\n      \n\n      let prog_notes = [];\n\n      if (chords.length > 0){\n        let cur_chord = chords[0];\n        let cur_dur = this.prog_step_duration;\n        \n        for (let i=1; i<chords.length; i++){\n            if (JSON.stringify(chords[i])==JSON.stringify(cur_chord)){\n                cur_dur += this.prog_step_duration;\n            }\n            else {\n                let root = parseInt(cur_chord[0]);\n                let chroma = cur_chord[1];\n                let bass = parseInt(cur_chord[2]);\n                for (let j=0; j<chroma.length; j++){\n                  if (relative){\n                    prog_notes.push({pitch: parseInt(chroma[j])+root+this.octave_center, startTime: this.prog_step_duration*i-cur_dur, endTime: this.prog_step_duration*i});\n                  }\n                  else{\n                    prog_notes.push({pitch: parseInt(chroma[j])+this.octave_center, startTime: this.prog_step_duration*i-cur_dur, endTime: this.prog_step_duration*i});\n                  }\n                }\n                prog_notes.push({pitch:bass+root+this.octave_center-12, startTime: this.prog_step_duration*i-cur_dur, endTime: this.prog_step_duration*i});\n                cur_chord = chords[i];\n                cur_dur = this.prog_step_duration;\n            }\n        }\n        let root = parseInt(cur_chord[0]);\n        let chroma = cur_chord[1];\n        let bass = parseInt(cur_chord[2]);\n        for (let j=0; j<chroma.length; j++){\n          if (relative){\n            prog_notes.push({pitch: parseInt(chroma[j])+root+this.octave_center, startTime: this.prog_step_duration*chords.length-cur_dur, endTime: this.prog_step_duration*chords.length});\n          }\n          else{\n            prog_notes.push({pitch: parseInt(chroma[j])+this.octave_center, startTime: this.prog_step_duration*chords.length-cur_dur, endTime: this.prog_step_duration*chords.length});\n          }\n        }\n        prog_notes.push({pitch:bass+root+this.octave_center-12, startTime: this.prog_step_duration*chords.length-cur_dur, endTime: this.prog_step_duration*chords.length});\n\n        return {notes: prog_notes, totalTime: this.prog_step_duration*chords.length};\n      }\n    },\n\n    // Fetch data from the backend\n    get_songdata(){\n      let backend_path = this.BACKEND_PATH\n      if (this.DEBUG){\n        backend_path = 'http://127.0.0.1:5000'\n      }\n      axios.get(backend_path + '/get_songdata')\n        .then(response => {\n              let data = response.data\n              if (! data.songData){\n                data = JSON.parse(response.data)\n              }\n              this.songData = data.songData\n        })\n    },\n    \n    get_data(id=\"000\", reset=true){\n      if(typeof(id) != \"string\"){\n        if (id.target.dataset.song != undefined){\n          id = id.target.dataset.song.slice(0,3) + \"_\" + id.target.dataset.segment\n        }\n        else{\n          id = \"000\"\n        }\n      }\n      if (id == \"000\"){\n        let keys = Object.keys(this.allData).slice(1)\n        id = keys[Math.floor(Math.random() * keys.length)]\n      }\n      if (this.demo.name != \"none\"){\n        id = this.demo.phrase_seq[this.demo.line]\n      }\n      let data = this.allData[id]\n      this.songID = data.songID\n      this.original_noteseq_mixed = data.original_noteseq_mixed\n      this.original_noteseq_mel = data.original_noteseq_mel\n      this.original_noteseq_acc = data.original_noteseq_acc\n      this.original_chd_str = data.original_chd_str\n      this.original_chd_mat = data.original_chd_mat\n      this.notedic_mixed = data.notedic_mixed\n      this.notedic_mel = data.notedic_mel\n      this.notedic_acc = data.notedic_acc\n      this.sustain = data.sustain\n      this.songname = data.name\n      this.songkey = data.key\n\n      this.update_melacc_toggle()\n      // Modify the sustain status to include the onset of every measure\n      for (let bar=1; bar<4; bar++){\n        for (let i=0; i<this.sustain.length; i++){\n          let start = this.sustain[i][0]\n          let end = this.sustain[i][1]\n          if (start < bar*4 && end > bar*4){\n            break\n          }\n          if (start > bar*4){\n            if (i > 0){\n              this.sustain[i-1][1] = bar*4 + 1\n            }\n            else{\n            this.sustain.push([bar*4 - 1, bar*4 + 1])\n            }\n            break\n          }\n        }\n      }\n\n      // Fetch a placeholder notesequence\n      // this.altered_vis = new mm.PianoRollCanvasVisualizer({notes: this.list_to_noteseq(this.notedic[0][\"0M3,0M3\"]), totalTime:16}, document.getElementById('altered_canvas'), this.cfg)\n      \n      this.altered_vis = new mm.PianoRollCanvasVisualizer({notes: [{pitch: 30, start:0, end:8}], totalTime:16}, document.getElementById('altered_canvas'), this.cfg)\n      this.update_overlay()\n\n      this.test_show_answer()\n      if (reset){\n        this.player_reset()\n      }\n      this.place_barlines_and_player()\n      setTimeout(() => {  this.place_barlines_and_player(); }, 1000)\n      setTimeout(() => {  this.place_barlines_and_player(); }, 3000)\n\n      // Update next phrases\n      if (this.demo.name == 'hst-performance anthem'){\n        this.update_next_phrases_demo()\n      }\n      else{\n        this.update_next_phrases()\n      }\n    },\n\n    get_data_all(){\n      let n_songs = 0\n      let backend_path = this.BACKEND_PATH\n      if (this.DEBUG){\n        backend_path = 'http://127.0.0.1:5000'\n      }\n      axios.get(backend_path + '/get_data_all')\n        .then(response => {\n              let data_in = response.data\n              if (!(data_in[0] > 0)){\n                data_in = JSON.parse(response.data)\n              }\n              this.allData = {'edge_weights': data_in[1][1]}\n              this.edge_weights = data_in[1][1]\n              n_songs = data_in[0]\n              if (this.DEBUG){\n                n_songs = 1\n              }\n              this.n_songs = n_songs\n\n              for (let i=0; i<n_songs; i++){\n                if (this.DEBUG){\n                  axios.get(backend_path + '/get_data_all_idx', {params: {idx: 5}})\n                  .then(response => {\n                    this.n_loaded ++\n                    let data_in = response.data\n                    if (data_in[0] != 0){\n                      data_in = JSON.parse(response.data)\n                    }\n                    let key = data_in[1][0]\n                    let val = data_in[1][1]\n                    this.allData[key] = val\n                    if (Object.keys(this.allData).length == n_songs+1){\n                      this.get_data()\n                      this.phrasebank_loaded = true\n                      this.apply_filter_anchors()\n                    }\n              })\n                  continue\n                }\n                axios.get(backend_path + '/get_data_all_idx', {params: {idx: i}})\n                  .then(response => {\n                    this.n_loaded ++\n                    let data_in = response.data\n                    if (data_in[0] != 0){\n                      data_in = JSON.parse(response.data)\n                    }\n                    let key = data_in[1][0]\n                    let val = data_in[1][1]\n                    this.allData[key] = val\n                    if (Object.keys(this.allData).length == n_songs+1){\n                      this.get_data()\n                      this.phrasebank_loaded = true\n                      this.apply_filter_anchors()\n                    }\n              })\n              }\n        })\n    },\n\n    get_data_anthem(){\n      let n_songs = 0\n      let backend_path = this.BACKEND_PATH\n      axios.get(backend_path + '/get_data_anthem')\n        .then(response => {\n              let data_in = response.data\n              if (!(data_in[0] > 0)){\n                data_in = JSON.parse(response.data)\n              }\n              this.allData = {'edge_weights': data_in[1][1]}\n              this.edge_weights = data_in[1][1]\n              n_songs = data_in[0]\n              this.n_songs = n_songs\n\n              for (let i=0; i<n_songs; i++){\n                axios.get(backend_path + '/get_data_anthem_idx', {params: {idx: i}})\n                  .then(response => {\n                    this.n_loaded ++\n                    let data_in = response.data\n                    if (data_in[0] != 0){\n                      data_in = JSON.parse(response.data)\n                    }\n                    let key = data_in[1][0]\n                    let val = data_in[1][1]\n                    this.allData[key] = val\n                    if (Object.keys(this.allData).length == n_songs+1){\n                      this.get_data()\n                      this.phrasebank_loaded = true\n                    }\n              })\n              }\n        })\n    },\n\n    // Interfacing (player)\n    player_play(){\n      if (this.loaded){\n        if (this.playing){\n          if (this.t % this.STEP_SIZE == 0){\n            // Reset at t = 0\n            if (this.t == 0){\n              \n              // Next phrase\n              if (this.next_phrase_idx != -1){\n                this.get_data(this.next_phrases_id[this.next_phrase_idx], false)\n                this.next_phrase_idx = -1\n                if (this.demo.name == 'hst-performance anthem'){\n                  this.update_next_phrases_demo()\n                }\n                else{\n                  this.update_next_phrases()\n                  this.$refs.phrase_selector.reset()\n                }\n              }\n            }\n            this.player_query_step()\n          }\n          if (!this.playing){\n            return\n          }\n\n          // Next time step\n          this.t += 4;\n          if (this.t == 16){\n              this.t = 0\n              \n              if (!this.demo.locked && !this.demo.locked1 && this.demo.line < this.demo.phrase_seq.length - 1){\n                this.demo.line ++\n                this.next_phrase_idx = 0\n              }\n              if (!this.demo.locked && this.demo.locked1 && !this.demo.lock_passed){\n                this.demo.lock_passed = true\n                this.demo.line ++\n                this.next_phrase_idx = 0\n              }\n          }\n        }\n      }\n      \n    },\n\n    player_reset(){\n      this.playing = false\n      this.loaded = true\n      this.t = 0\n      this.altered_noteseq.notes = []\n      this.altered_noteseqs = [0,0,0,0]\n      this.chord_seq = []\n      this.altered_chd_str = Array(16).fill(\"\")\n      this.altered_chd_mat =  Array(16).fill(Array(36).fill(0))\n      this.altered_vis.redraw()\n      this.update_overlay()\n    }, \n\n    player_query_step(){\n\n      // Chord input behaviors\n      if (this.demo.name != 'none' && this.demo.line > 1){\n        if (this.demo.bar >= this.demo.chord_seq.length){\n          this.playing = false\n          return\n        }\n        this.demo.bar ++\n        if (this.current_chd == ''){\n          if (this.demo.chord_seq[this.demo.bar].includes('s')){\n              this.$refs.dial.keydown_functions(\n              new KeyboardEvent('keydown', {\n                'key': 'z'\n              })\n            )\n            this.$refs.dial.keydown_functions(\n              new KeyboardEvent('keydown', {\n                'key': this.demo.chord_seq[this.demo.bar].slice(1)\n              })\n            )\n            this.$refs.dial.keyup_functions(\n              new KeyboardEvent('keydown', {\n                'key': 'z'\n              })\n            )\n          }\n          else if (this.demo.chord_seq[this.demo.bar].includes('x')){\n              this.$refs.dial.keydown_functions(\n              new KeyboardEvent('keydown', {\n                'key': 'x'\n              })\n            )\n            this.$refs.dial.keydown_functions(\n              new KeyboardEvent('keydown', {\n                'key': this.demo.chord_seq[this.demo.bar].slice(1)\n              })\n            )\n            this.$refs.dial.keyup_functions(\n              new KeyboardEvent('keydown', {\n                'key': 'x'\n              })\n            )\n          }\n          else{\n            this.$refs.dial.keydown_functions(\n              new KeyboardEvent('keydown', {\n                'key': this.demo.chord_seq[this.demo.bar]\n              })\n            )\n          }\n        }\n      }\n      if (this.current_chd == ''){\n        this.playing = false\n        return\n      }\n      this.playing = true\n\n      // tempo\n      let tempo_changes = []\n      let window_len\n      if (this.demo.bar > -1){\n        let slice = this.demo.tempo_curve.slice(this.demo.bar * 4, this.demo.bar * 4 + 4)\n        window_len = slice[3][0] - slice[0][0] + 60 / slice[3][1]\n        for (let i=0; i<4; i++){\n          tempo_changes[i] = [slice[i][0] - slice[0][0] + 0.001, slice[i][1]]\n        }\n      }\n      else{\n        [tempo_changes, window_len] = this.get_tempo_changes()\n      }\n      setTimeout(() => {  this.player_play(); }, window_len * 1000)\n      // Update cell highlighting\n      for (let i=this.t; i<this.t+4; i++){\n        this.highlight_cell(\"altered\"+i, window_len)\n      }\n      const high_light_step = (time) => {\n        this.highlight_cell(\"time_altered\"+time, window_len / 4)\n        if (time % 4 == 3){\n          return\n        }\n        setTimeout(() => {\n          high_light_step(time+1)\n        }, window_len * 250);\n      }\n      high_light_step(this.t)\n\n      this.bpm = this.next_bpm\n\n      // Clean up at song start\n      if (this.t == 0){\n        this.altered_chd_str = Array(16).fill(\"\")\n        this.altered_chd_mat =  Array(16).fill(Array(36).fill(0))\n        this.altered_noteseq.notes = []\n        this.altered_noteseqs = [0,0,0,0]\n        this.chds = []\n      }\n\n      // Clean up at window start\n      if (this.t % this.STEP_SIZE == 0){\n        this.chord_seq = []\n      }\n      this.chds.push(this.current_chd)\n      this.chord_seq.push(this.current_chd)\n      let root = parseInt(this.current_chd.slice(0,-2))\n      let chroma = this.current_chd.slice(-2)\n      this.altered_chd_str[this.t] = this.current_chd_text\n\n      if (!this.wheel.clutched || !this.wheel.connected){\n        // Stop the player at the next query step unless a new chord is entered\n        this.current_chd = ''\n        this.current_chd_text = ''\n      }\n      \n      // Query and update noteseq\n      let chord_seq_maxlen = 8 / this.STEP_SIZE\n      let query = []\n      for (let i=0; i<this.chord_seq.length; i++){\n        query.push(this.chord_seq[i])\n      }\n      while (query.length < chord_seq_maxlen){\n        query.push(query[query.length-1])\n      }\n      query = query.join(',')\n      let note_list = this.notedic[(this.t - this.t%8)/8][query]\n      let new_notes = this.list_to_noteseq(note_list, this.t, this.t+this.STEP_SIZE, true)\n      new_notes = this.apply_dynamics(new_notes)\n      this.altered_noteseq.notes = this.altered_noteseq.notes.concat(new_notes)  \n      let quant_note_seq = this.notes_to_quant_noteseq(new_notes)\n      let noteseq = unquantizeSequence(quant_note_seq)\n      // noteseq = this.apply_articulation(noteseq)\n\n      let This = this\n\n      if (This.demo.bar >= 0){\n        for (let i=0; i<noteseq.notes.length; i++){\n          for (let j=0; j<This.demo.sustain.length; j++){\n            let sus_start = This.demo.sustain[j][0] - 16 * (This.demo.line - 2)\n            let sus_end = This.demo.sustain[j][1] - 16 * (This.demo.line - 2)\n            if (noteseq.notes[i].endTime > sus_start && noteseq.notes[i].endTime < sus_end){\n              noteseq.notes[i].endTime = sus_end\n              break\n            }\n            if (noteseq.notes[i].endTime < sus_start){\n              break\n            }\n          }\n        }\n      }\n\n      \n      for (let i=0; i<noteseq.notes.length; i++){\n        for (let j=0; j<noteseq.notes.length; j++){\n          if (noteseq.notes[i].startTime < noteseq.notes[j].startTime && noteseq.notes[i].endTime >= noteseq.notes[j].startTime && noteseq.notes[i].pitch == noteseq.notes[j].pitch){\n            noteseq.notes[i].endTime = noteseq.notes[j].startTime - 0.15\n          }\n        }\n        if (noteseq.notes[i].endTime >= 3.9){\n          noteseq.notes[i].endTime = 5\n        }\n      }\n\n      // Set tompo curve\n      Tone.Transport.bpm.setValueAtTime(60, Tone.Transport.now())\n      for (let i=0; i<tempo_changes.length; i++){\n        Tone.Transport.bpm.setValueAtTime(tempo_changes[i][1], Tone.Transport.now() + tempo_changes[i][0])\n      }\n      \n\n      // Restart the player\n      if (player.isPlaying()){\n        player.stop()\n      }\n      noteseq.totalTime = 6 \n      player.start(noteseq)\n      this.altered_noteseqs[(this.t-this.t%4)/4] = this.altered_noteseq\n\n\n      // Canvas and noteseq\n      if (! this.hide_vis_input){\n        this.altered_vis.noteSequence = this.altered_noteseq\n        this.altered_vis.redraw()\n      }\n\n      // Overlay and notemat\n      if (this.current_chd.includes('sd') || this.current_chd.includes('xd')){\n        root = parseInt(this.current_chd.slice(0,-4))\n        chroma = this.current_chd.slice(-2)\n      }\n      let new_chd_mat = Array(36).fill(0)\n      new_chd_mat[root] = 1\n      new_chd_mat[24] = 1\n\n      let M3 = [0,4,7]\n      let m3 = [0,3,7]\n      let M7 = [0,4,7,11]\n      let m7 = [0,3,7,10]\n      let D7 = [0,4,7,10]\n      let chm = 0\n\n      if (chroma == 'M3'){\n        chm = M3\n      }\n      if (chroma == 'm3'){\n        chm = m3\n      }\n      if (chroma == 'M7'){\n        chm = M7\n      }\n      if (chroma == 'm7'){\n        chm = m7\n      }\n      if (chroma == 'D7'){\n        chm = D7\n      }\n      \n      let s = 0\n      for (let i=0; i<12; i++){\n        s = s + new_chd_mat[i]\n      }\n      if (s == 0){\n        new_chd_mat[0] = 1\n      }\n\n      for (let i=0; i<chm.length; i++){\n        new_chd_mat[(root+chm[i])%12 + 12] = 1\n      }\n      for (let i=this.t; i<this.t+this.STEP_SIZE; i++)[\n        this.altered_chd_mat[i] = new_chd_mat\n      ]\n      this.update_overlay()\n\n      // Wheel\n      if (this.wheel.connected){\n        if (this.wheel.mode == 'relative'){\n          this.$refs.dial_wheel.update_offest(this.wheel.turn_idx)\n        }\n        this.next_bpm = this.bpm + (this.wheel.gas - this.wheel.brake) * this.wheel.acc_ratio\n        this.wheel.wheel_shift_offset = 4 - this.wheel.sheel_shift\n        this.wheel.sheel_shift = 0\n      }\n    },\n\n    notes_to_quant_noteseq(notes){\n      let out = createQuantizedNoteSequence(4, 60)\n      out.tempos = [{time: 0, qpm: 60}]\n      let This = this\n      for (let i=0; i<notes.length; i++){\n        let note = notes[i]\n        let note_start = note.startTime\n        let note_end = note.endTime\n        if (This.demo.bar >= 0){\n          for (let j=0; j<This.demo.sustain.length; j++){\n            let sus_start = This.demo.sustain[j][0] - 16 * (This.demo.line - 2)\n            let sus_end = This.demo.sustain[j][1] - 16 * (This.demo.line - 2)\n            if (note.endTime > sus_start && note.endTime < sus_end){\n              note_end = sus_end\n              break\n            }\n            if (note.endTime < sus_start){\n              break\n            }\n          }\n        }\n        else{\n            for (let j=0; j<This.sustain.length; j++){\n            let sus_start = This.sustain[j][0]\n            let sus_end = This.sustain[j][1]\n            if (note.endTime > sus_start && note.endTime < sus_end){\n              note_end = sus_end\n              break\n            }\n            if (note.endTime < sus_start){\n              break\n            }\n          }\n        }\n        \n        out.notes.push({pitch:note.pitch, quantizedStartStep:(note_start-this.t)*4, quantizedEndStep:Math.round((note_end-this.t)*4), velocity: note.velocity})\n      }\n      // Fix note overlaps\n      for (let i=0; i<out.notes.length; i++){\n        for (let j=0; j<out.notes.length; j++){\n          if (out.notes[i].quantizedStartStep < out.notes[j].quantizedStartStep && out.notes[i].quantizedEndStep > out.notes[j].quantizedStartStep){\n            out.notes[i].quantizedEndStep = out.notes[j].quantizedStartStep\n          }\n        }\n      }\n      return out\n    },\n\n    canvas_update_note(note){\n      let t = this.t\n      if (t == 0){\n        t = 16\n      }\n      let canvas_note = {pitch: note.pitch, startTime: note.startTime + t - 4, endTime: note.endTime + t - 4}\n      if (note.expressive){\n        canvas_note = {pitch: note.pitch, startTime: note.quant_startTime*this.bpm/60/4+t-4, endTime: note.quant_endTime*this.bpm/60/4+t-4}\n      }\n      this.altered_vis.redraw(canvas_note)\n    },\n\n    // Expressive dynamics / timing\n    apply_dynamics(noteseq){\n      let original_notes = this.original_noteseq.notes\n      let altered_notes = noteseq\n\n      // Sort everything by start time\n      original_notes.sort(function (a,b){return a.startTime - b.startTime})\n      altered_notes.sort(function (a,b){return a.startTime - b.startTime})\n\n      // Find the average vel of the original noteseq\n      let avg_vel = 0\n      for (let i=0; i<original_notes.length; i++){\n        avg_vel = avg_vel + original_notes[i].velocity\n      }\n      avg_vel = Math.floor(avg_vel / original_notes.length)\n\n      // Put notes into time-quantized buckeds\n      let original_buckets = [] // of velocities\n      let altered_buckets = [] // of indices\n      for (let i=0; i<16; i++){\n        original_buckets.push([])\n        altered_buckets.push([])\n      }\n      for (let i=0; i<original_notes.length; i++){\n        let note = original_notes[i]\n        if (note.startTime < this.t || note.startTime >= this.t + 4){\n          continue\n        }\n        original_buckets[Math.round(note.startTime / 0.25) % 16].push(note.velocity)\n      }\n\n      for (let i=0; i<altered_notes.length; i++){\n        let note = altered_notes[i]\n        altered_buckets[note.startTime / 0.25 % 16].push(i)\n      }\n\n      for (let i=0; i<16; i++){\n        let altered_bucket = altered_buckets[i]\n        let original_bucket = original_buckets[i]\n        for (let j=0; j<altered_bucket.length; j++){\n          let idx = altered_bucket[j]\n          if (original_bucket.length == 0){\n            if (idx == 0){\n              altered_notes[0].velocity = 1\n            }\n            else{\n              altered_notes[idx].velocity = altered_notes[idx - 1].velocity\n            }\n          }\n          else if (altered_bucket.length == original_bucket.length){\n            altered_notes[idx].velocity = original_bucket[j]\n          }\n          else if (j == altered_bucket.length - 1){\n            altered_notes[idx].velocity = original_bucket[original_bucket.length - 1]\n          }\n          else{\n            // Interpolate between the closest 2 velo\n            let pos = j / altered_bucket.length * original_bucket.length\n            let bottom_vel = original_bucket[Math.floor(pos)]\n            let top_vel = original_bucket[Math.floor(pos) + 1]\n            let bottom_weight = pos % 1\n            altered_notes[idx].velocity = bottom_vel * bottom_weight + top_vel * (1 - bottom_weight)\n          }\n        }\n      }\n\n      // Adjust for spread and scale\n      for (let i=0; i<altered_notes.length; i++){\n        altered_notes[i].velocity = Math.floor(((altered_notes[i].velocity / avg_vel - 1)* this.expressiveness_vel / 100 + 1 ) * 127 * this.velocity_scale/100)\n        if (altered_notes[i].velocity > 127){\n          altered_notes[i].velocity = 127\n        }\n        if (altered_notes[i].velocity < 10){\n          altered_notes[i].velocity = 38\n        }\n      }\n      return noteseq\n    },\n\n    apply_articulation(noteseq){\n      let original_notes = this.original_noteseq.notes\n      let altered_notes = noteseq.notes\n\n      // Sort everything by start time\n      original_notes.sort(function (a,b){return a.startTime - b.startTime})\n      altered_notes.sort(function (a,b){return a.startTime - b.startTime})\n\n      // Put notes into time-quantized buckeds\n      let original_buckets = [] // of note lengths \n      let altered_buckets = [] // of indices\n      for (let i=0; i<16; i++){\n        original_buckets.push([])\n        altered_buckets.push([])\n      }\n      for (let i=0; i<original_notes.length; i++){\n        let note = original_notes[i]\n        if (note.startTime < this.t || note.startTime >= this.t + 4){\n          continue\n        }\n        original_buckets[Math.round(note.startTime / 0.25) % 16].push(note.endTime - note.startTime)\n      }\n\n      for (let i=0; i<altered_notes.length; i++){\n        let note = altered_notes[i]\n        altered_buckets[note.startTime / 0.25 % 16].push(i)\n      }\n\n      for (let i=0; i<16; i++){\n        let altered_bucket = altered_buckets[i]\n        let original_bucket = original_buckets[i]\n        for (let j=0; j<altered_bucket.length; j++){\n          let idx = altered_bucket[j]\n          if (original_bucket.length != 0){\n            let dur = altered_notes[idx].endTime - altered_notes[idx].startTime\n            if (altered_bucket.length == original_bucket.length){\n              altered_notes[idx].endTime = ((original_bucket[j]/dur - 1) * this.expressiveness_dur / 100 + 1) * dur + altered_notes[idx].startTime\n            }\n            else if (j == altered_bucket.length - 1){\n              altered_notes[idx].endTime = ((original_bucket[original_bucket.length - 1]/dur - 1) * this.expressiveness_dur / 100 + 1) * dur + altered_notes[idx].startTime\n            }\n            else{\n              // Interpolate between the closest 2 dur\n              let pos = j / altered_bucket.length * original_bucket.length\n              let bottom_vel = original_bucket[Math.floor(pos)]\n              let top_vel = original_bucket[Math.floor(pos) + 1]\n              let bottom_weight = pos % 1\n              let dur_rate = bottom_vel * bottom_weight + top_vel * (1 - bottom_weight)\n              altered_notes[idx].endTime = ((dur_rate/dur - 1) * this.expressiveness_dur / 100 + 1) * dur + altered_notes[idx].startTime\n            }\n          }\n        }\n      }\n\n      // Sustain the notes who end at step end\n      for (let i=0; i<altered_notes.length; i++){\n        if (altered_notes[i].endTime == 4){\n          altered_notes[i].endTime = 8\n        }\n      }\n      return noteseq\n    },\n\n    get_tempo_changes(){\n      // Calculate the tempo changes for the phrase, then return the relative part\n\n      // let notes = this.original_noteseq_mel.notes\n      // notes.sort(function (a,b){return a.startTime - b.startTime})\n\n      // let out = [] //[[onset_step, lengthened], ...]\n      // for (let i=0; i<notes.length; i++){\n      //   let note = notes[i]\n      //   let dur = Math.round((note.endTime - note.startTime)/0.25)\n      //   let lengthened = false\n        \n      //   // TL1\n      //   if (i > 0 && i < notes.length - 1){\n      //     let pre_dur = Math.round((notes[i-1].endTime - notes[i-1].startTime)/0.25)\n      //     let next_dur = Math.round((notes[i+1].endTime - notes[i+1].startTime)/0.25)\n      //     if (pre_dur == dur && next_dur > dur){\n      //       lengthened = true\n      //     }\n      //   }\n\n      //   // TL2\n      //   if (i < notes.length - 1){\n      //     let next_dur = Math.round((notes[i+1].endTime - notes[i+1].startTime)/0.25)\n      //     if (next_dur >= dur * 3){\n      //       lengthened = true\n      //     }\n      //   }\n\n      //   out.push([Math.round(note.startTime/0.25), lengthened])\n      // }\n\n      let notes = this.original_noteseq.notes\n      notes.sort(function (a,b){return a.startTime - b.startTime})\n\n      let out = [] //[[onset_step, lengthened], ...]\n      let bins = []\n      let sum_velo = 0\n      for (let i=0; i<65; i++){\n        bins.push([])\n      }\n      for (let i=0; i<notes.length; i++){\n        let note = notes[i]\n        sum_velo = sum_velo + note.velocity\n        bins[Math.round(note.startTime/0.25)].push(note.velocity)\n      }\n      let avg_velo = sum_velo / notes.length\n\n      for (let i=0; i<65; i++){\n        let sum = bins[i].reduce((a, b) => a + b, 0);\n        if (sum < avg_velo * bins[i].length){\n          out.push([i, true])\n        }\n        else if(bins[i].length > 0){\n          out.push([i, false])\n        }\n      }\n\n      // convert out to bpm changes\n      let bpm_changes = [[0.001, this.bpm]] // [[time(second), bpm, step], ...]\n      let t = 0\n      let cur_step = 0\n      let slowed = 0\n      let bpm = this.bpm\n      let slice_len = [-1, -1, -1, -1]\n\n      for (let i=0; i<out.length; i++){\n        let step = out[i][0]\n        let lengthened = out[i][1]\n        \n        for (let j=0; j<4; j++){\n          if (slice_len[j] == -1 && step > 16 + 16 * j){\n            slice_len[j] = t + (16 + 16 * j - cur_step) * 15 / bpm\n          }\n        }\n\n        t += (step - cur_step) * 60 / bpm / 4\n\n        if (i == out.length - 1){\n          slice_len[3] = t + 15 / bpm * (64 - step)\n        }\n\n        if (lengthened){\n          // Slow down\n          bpm /= (0.015 * this.expressiveness_tempo / 100) + 1\n          slowed += 1\n          bpm_changes.push([t, bpm, step])\n        }\n        else if(!lengthened && slowed > 0){\n          // Speed up\n          bpm *= ((0.015 * this.expressiveness_tempo / 100) + 1) ** slowed\n          slowed = 0\n          bpm_changes.push([t, bpm, step])\n        }\n        cur_step = step\n      }\n\n      for (let j=0; j<4; j++){\n        if (slice_len[j] == -1){\n          slice_len[j] = slice_len[j-1] + 240 / bpm\n        }\n      }\n      \n      let changes_out = [[0.001, this.bpm, 0]]\n      for (let i=0; i<bpm_changes.length; i++){\n        let [t, bpm, step] = bpm_changes[i]\n        \n        if (this.t == 0){\n          if (t < slice_len[0] && t != 0.001){\n            changes_out.push([t, bpm, step % 16])\n          } \n        }\n        else{\n          if (t <= slice_len[this.t / 4 - 1]){\n            changes_out[0][1] = bpm\n          }\n          if (t > slice_len[this.t / 4 - 1] && t < slice_len[this.t / 4]){\n            t -= slice_len[this.t / 4 - 1]\n            changes_out.push([t, bpm, step % 16])\n          }\n        }\n      }\n\n      for (let j=3; j > 0; j--){\n        slice_len[j] -= slice_len[j-1]\n      }\n\n      changes_out.push([0, this.next_bpm, 16])\n\n      for (let i=0; i<changes_out.length; i++){\n        let step = changes_out[i][2]\n        let ratio = ((this.next_bpm - this.bpm) / this.bpm) * (step / 16) + 1\n        changes_out[i][1] *= ratio\n      }\n      let dense_changes = [] //[bpm, ...]\n      // Interpolate \n      for (let i=0; i < 16; i++){\n        let before_step = 0\n        let before_bpm = 0\n        let after_step = 0\n        let after_bpm = 0\n        for (let j=0; j < changes_out.length; j++){\n          let step = changes_out[j][2]\n          let bpm = changes_out[j][1]\n\n          if (step <= i){\n            before_step = step\n            before_bpm = bpm\n          }\n          if (step >= i){\n            after_step = step\n            after_bpm = bpm\n            break\n          }\n        }\n        if (before_step == after_step){\n          dense_changes.push(before_bpm)\n        }\n        else{\n          let r_before = (i - before_step) / (after_step - before_step)\n          dense_changes.push(before_bpm * r_before + (1 - r_before) * after_bpm)\n        }\n      }\n\n      let out_out = [[0.001, this.bpm]]\n      // Convert into continuous changes\n      let cur_t = 0\n      for (let i = 1; i < 16; i ++){\n        let prev_bpm = out_out[i-1][1]\n        cur_t += 15 / prev_bpm\n        out_out.push([cur_t, dense_changes[i]])\n      }\n      cur_t += 15 / dense_changes[15]\n        \n      return [out_out, cur_t]\n    },\n\n    // Interfacing (input type)\n    change_input_type(type){\n      this.input_type = type\n    },\n    change_key(key){\n      this.key = key\n      this.$refs.dial.draw_dial(this.$refs.dial.outer_text(key))\n    },\n    update_current_chord(chd, text){\n      this.current_chd = chd\n      this.current_chd_text = text\n      if (!this.playing){\n        this.playing = true\n        this.player_play()\n      }\n      else{\n        // Pre-update overlays and chord texts\n        // Overlay and notemat\n        let root\n        let chroma\n        if (this.current_chd.includes('sd') || this.current_chd.includes('xd')){\n          root = parseInt(this.current_chd.slice(0,-4))\n          chroma = this.current_chd.slice(-2)\n        }\n        else{\n          root = parseInt(this.current_chd.slice(0,-2))\n          chroma = this.current_chd.slice(-2)\n        }\n        let new_chd_mat = Array(36).fill(0)\n        let t = this.t\n        new_chd_mat[root] = 1\n        new_chd_mat[root+24] = 1\n\n        let M3 = [0,4,7]\n        let m3 = [0,3,7]\n        let M7 = [0,4,7,11]\n        let m7 = [0,3,7,10]\n        let D7 = [0,4,7,10]\n        let chm = 0\n\n        if (chroma == 'M3'){\n          chm = M3\n        }\n        if (chroma == 'm3'){\n          chm = m3\n        }\n        if (chroma == 'M7'){\n          chm = M7\n        }\n        if (chroma == 'm7'){\n          chm = m7\n        }\n        if (chroma == 'D7'){\n          chm = D7\n        }\n\n        for (let i=0; i<chm.length; i++){\n          new_chd_mat[(root+chm[i])%12 + 12] = 1\n        }\n        for (let i=t; i<t+this.STEP_SIZE; i++)[\n          this.altered_chd_mat[i] = new_chd_mat\n        ]\n        this.update_overlay()\n\n        // Text\n        this.altered_chd_str[t] = this.current_chd_text\n        }\n    },\n\n    // Overlays\n    draw_overlay_bar(svg, x, pitch, color){\n      x *= 100;\n      while (pitch <= 90){\n          if (pitch >= 30){\n              svg.append('rect')\n              .attr('fill', color)\n              .attr('opacity', 0.3)\n              .attr('x', x)\n              .attr('y', this.cfg.noteHeight * (this.cfg.maxPitch - pitch))\n              .attr('width', 100)\n              .attr('height', 4)\n              .attr('class', 'overlay');\n          }\n          pitch += 12;\n      }\n    },\n    clear_overlay(){\n      d3.selectAll(\".overlay\").remove().exit()\n    },\n    get_color(pitch){\n      return d3.interpolateSinebow((pitch/12+0.6)%1)\n    },\n    draw_root_overlay(){\n      for (let i=0; i<this.original_chd_mat.length; i++){\n        let chd = this.original_chd_mat[i];\n        let root = chd.slice(0,12).indexOf(1);\n        this.draw_overlay_bar(d3.select(\".original_svg\"), i, root, this.get_color(0));\n        if (this.altered_chd_mat[i].slice(0,12).indexOf(1) >= 0 && ! this.hide_vis_input){\n            this.draw_overlay_bar(d3.select(\".swapped_svg\"), i, this.altered_chd_mat[i].slice(0,12).indexOf(1), this.get_color(0));\n        }\n      }\n    },\n    draw_chord_overlay(){\n      for (let i=0; i<this.original_chd_mat.length; i++){\n        let chd = this.original_chd_mat[i];\n        let root = chd.slice(0,12).indexOf(1);\n        for (let j=0; j<12; j++){\n          if (chd[12+j] == 1){\n              this.draw_overlay_bar(d3.select(\".original_svg\"), i, j, this.get_color((j-root)%12));\n          }\n          if (this.altered_chd_mat[i][12+j] == 1  && ! this.hide_vis_input){\n              this.draw_overlay_bar(d3.select(\".swapped_svg\"), i, j, this.get_color((j-this.altered_chd_mat[i].slice(0,12).indexOf(1))%12));\n          }\n        }\n      }\n    },\n    update_overlay(){\n      this.clear_overlay()\n      if (this.chord_overlay){\n        this.draw_chord_overlay()\n      }\n      else if (this.root_overlay){\n        this.draw_root_overlay()\n      }\n    },\n    root_on_click(){\n      if (this.root_overlay){\n        this.root_overlay = false\n      }\n      else {\n        this.root_overlay = true\n      }\n      this.update_overlay()\n    },\n    chord_on_click(){\n      if (this.chord_overlay){\n        this.chord_overlay = false\n      }\n      else {\n        this.chord_overlay = true\n      }\n      this.update_overlay()\n    },\n\n    // Place barlines / original player\n    draw_barlines_original(){\n      d3.selectAll(\".barline_original\").remove().exit()\n      let top_rect = document.getElementById(\"time0\").getBoundingClientRect();\n      let bottom_rect = document.getElementById(\"original_prog0\").getBoundingClientRect();\n\n      let l1 = top_rect.left + window.pageXOffset || document.documentElement.scrollLeft\n      let l2 = top_rect.right + window.pageXOffset || document.documentElement.scrollLeft\n      let t = top_rect.top + window.pageYOffset || document.documentElement.scrollTop\n      let b = bottom_rect.bottom + window.pageYOffset || document.documentElement.scrollTop\n\n      for (let i=1; i<4; i++){\n          d3.selectAll(\"#original_barline\")\n          .append('rect')\n          .attr('x', l1 + i*4*(l2-l1))\n          .attr('y', t)\n          .attr('width', 3)\n          .attr('height', b-t)\n          .attr('class', 'barline barline_original')\n      }\n    },\n    draw_barlines_altered(){\n      d3.selectAll(\".barline_altered\").remove().exit()\n\n      let top_rect = document.getElementById(\"time_altered0\").getBoundingClientRect();\n      let bottom_rect = document.getElementById(\"altered10\").getBoundingClientRect();\n\n      let l1 = top_rect.left + window.pageXOffset || document.documentElement.scrollLeft\n      let l2 = top_rect.right + window.pageXOffset || document.documentElement.scrollLeft\n      let t = top_rect.top + window.pageYOffset || document.documentElement.scrollTop\n      let b = bottom_rect.bottom + window.pageYOffset || document.documentElement.scrollTop\n\n      for (let i=1; i<4; i++){\n          d3.selectAll(\"#altered_barline\")\n          .append('rect')\n          .attr('x', l1 + i*4*(l2-l1))\n          .attr('y', t)\n          .attr('width', 3)\n          .attr('height', b-t)\n          .attr('class', 'barline barline_altered')\n        }\n    },\n    place_player_original(){\n      let top_rect = document.getElementById(\"time15\").getBoundingClientRect();\n      let bottom_rect = document.getElementById(\"original_prog15\").getBoundingClientRect();\n\n      let l2 = top_rect.right + window.pageXOffset || document.documentElement.scrollLeft\n      let t = top_rect.top + window.pageYOffset || document.documentElement.scrollTop\n      let b = bottom_rect.top + window.pageYOffset || document.documentElement.scrollTop\n\n      d3.select(\"#original_player\")\n      .style(\"position\",\"absolute\")\n      .style(\"left\",l2+\"px\")\n      .style(\"top\", (t+2.5*b)/3.5+\"px\")\n      .style(\"-webkit-transform\",\"scale(0.75)\")\n      .raise()\n    },\n    place_barlines_and_player(){\n      this.draw_barlines_original()\n      this.draw_barlines_altered()\n      this.place_player_original()\n      this.place_melacc_toggle()\n    },\n\n    // Mel/Acc toggle\n    mel_on_click(){\n      this.mel = ! this.mel\n      if (! this.mel && ! this.acc){\n        this.acc = true\n      }\n      this.update_melacc_toggle()\n    },\n    acc_on_click(){\n      this.acc = ! this.acc\n      if (! this.acc && ! this.mel){\n        this.mel = true\n      }\n      this.update_melacc_toggle()\n    },\n    update_melacc_toggle(){\n      if (this.mel && this.acc){\n        this.notedic = this.notedic_mixed\n        this.original_noteseq = this.original_noteseq_mixed\n        this.original_noteseq_overlay = this.original_noteseq_mel\n      }\n      else if (this.mel){\n        this.notedic = this.notedic_mel\n        this.original_noteseq = this.original_noteseq_mel\n        this.original_noteseq_overlay = this.empty_noteseq\n      }\n      else{\n        this.notedic = this.notedic_acc\n        this.original_noteseq = this.original_noteseq_acc\n        this.original_noteseq_overlay = this.empty_noteseq\n      }\n    },\n    place_melacc_toggle(){\n      let top_rect = document.getElementById(\"time15\").getBoundingClientRect();\n      let bottom_rect = document.getElementById(\"original_prog15\").getBoundingClientRect();\n\n      let l1 = top_rect.left + window.pageXOffset || document.documentElement.scrollLeft\n      let l2 = top_rect.right + window.pageXOffset || document.documentElement.scrollLeft\n      let t = top_rect.top + window.pageYOffset || document.documentElement.scrollTop\n      let b = bottom_rect.top + window.pageYOffset || document.documentElement.scrollTop\n\n      d3.select(\"#melacc_toggle\")\n      .style(\"position\",\"absolute\")\n      .style(\"left\",l2+(l2-l1)/4+\"px\")\n      .style(\"top\", (1.15*t+b)/2.15+\"px\")\n      .style(\"-webkit-transform\",\"scale(0.6)\")\n      .raise()\n    },\n\n    // Chord playback\n    play_chord(track, i){\n      player.stop()\n      let highlight_start = 0\n      let highlight_end = 16\n      if (track == 'original'){\n        player.start(this.chords_to_noteseq([this.original_chd_mat[i]], false))\n        for (let j=0; j<16; j++){\n          if (document.getElementById(\"original_prog\"+j).innerHTML.replace(/\\s/g,\"\") != '' && j > i){\n            highlight_end = j\n            break\n          }\n          if (document.getElementById(\"original_prog\"+j).innerHTML.replace(/\\s/g,\"\") != ''){\n            highlight_start = j\n          }\n        }\n        for (let j=highlight_start; j<highlight_end; j++){\n          this.highlight_cell(\"original_prog\"+j, 0.5)\n        }\n      }\n      if (track == 'altered'){\n        highlight_start = i - i%4\n        for (let j=highlight_start; j<highlight_start+4; j++){\n          this.highlight_cell(\"altered\"+j, 0.5)\n        }\n        player.start(this.chords_to_noteseq([this.altered_chd_mat[i]], false))\n      }\n\n      \n    },\n\n    play_prog_original(){\n      player.stop()\n      player.start(this.chords_to_noteseq(this.original_chd_mat, false))\n      let i = 0\n      const high_light_step = () => {\n        if (i < 16){\n          this.highlight_cell(\"time\"+i, this.prog_step_duration)\n          if (document.getElementById(\"original_prog\"+i).innerHTML.replace(/\\s/g,\"\") != ''){\n            let t = 1\n            for (let j=i+1; j<16; j++){\n              if (document.getElementById(\"original_prog\"+j).innerHTML.replace(/\\s/g,\"\") == ''){\n                t++\n              }\n              else{\n                break\n              }\n            }\n            for (let j=i; j<i+t; j++){\n              this.highlight_cell(\"original_prog\"+j, t*this.prog_step_duration)\n            }\n          }\n          i++\n          setTimeout(() => {\n            high_light_step()\n          }, this.prog_step_duration*1000);\n        }\n      }\n      high_light_step()\n      \n    },\n\n    play_prog_altered(){\n      player.stop()\n      player.start(this.chords_to_noteseq(this.altered_chd_mat, false))\n      let i = 0\n      const high_light_step = () => {\n        if (i < 16){\n          if (i%4 == 0 && this.altered_chd_str[i] == ''){return}\n          this.highlight_cell(\"time_altered\"+i, this.prog_step_duration)\n          if (this.altered_chd_str[i] != ''){\n            for (let j=i; j<i+4; j++){\n              this.highlight_cell(\"altered\"+j, 4*this.prog_step_duration)\n            }\n          }\n          i++\n          setTimeout(() => {\n            high_light_step()\n          }, this.prog_step_duration*1000);\n        }\n      }\n      high_light_step()\n    },\n\n    // Chord/Time cell highlighting\n    highlight_cell(id, t){\n      document.getElementById(id).classList.add(\"cell_active\")\n      setTimeout(() => {\n        document.getElementById(id).classList.remove(\"cell_active\")\n      }, t*1000);\n    },\n\n    // Time cell click\n    replay_bar(step, len=1, bypass_check=false){\n      if ((! this.loaded || this.playing) && ! bypass_check){\n        return\n      } \n      let t = this.t\n      let bar = (step - step%4) / 4\n      if (this.altered_noteseqs[bar] == 0){\n        this.loaded = true\n        return\n      }\n      // Lock this.t\n      this.loaded = false\n      this.t = (bar+1) * 4\n      this.altered_noteseqs[bar].totalQuantizedSteps = 16\n      if (player.isPlaying()){\n        player.stop()\n      }\n      player.start(this.altered_noteseqs[bar], this.bpm)\n\n      // Dirty fix\n      setTimeout(() => {\n        if (!player.isPlaying()){\n          player.start(this.altered_noteseqs[bar], this.bpm)\n        }\n      }, 5)\n      setTimeout(() => {\n        if (!player.isPlaying()){\n          player.start(this.altered_noteseqs[bar], this.bpm)\n        }\n      }, 10)\n      setTimeout(() => {\n        if (!player.isPlaying()){\n          player.start(this.altered_noteseqs[bar], this.bpm)\n        }\n      }, 15)\n      setTimeout(() => {\n        if (!player.isPlaying()){\n          player.start(this.altered_noteseqs[bar], this.bpm)\n        }\n      }, 30)\n      setTimeout(() => {\n        if (!player.isPlaying()){\n          player.start(this.altered_noteseqs[bar], this.bpm)\n        }\n      }, 50)\n\n      // Time/prog cell highlighting\n      const high_light_step = (time) => {\n        this.highlight_cell(\"time_altered\"+time, 4*250*60/this.bpm/1000)\n        if (time % 4 == 3){\n          return\n        }\n        setTimeout(() => {\n          high_light_step(time+1)\n        }, 4*250*60/this.bpm);\n      }\n      high_light_step(this.t-4)\n\n      for (let i=this.t-4; i<this.t; i++){\n        this.highlight_cell(\"altered\"+i, 16*250*60/this.bpm/1000)\n      }\n      \n      // Unlock this.t\n      setTimeout(() => {\n        this.t = t\n        len --\n        if (len > 0){\n          if (player.isPlaying()){\n            player.stop()\n          }\n          this.replay_bar(step+4, len, true)\n        }\n        else{\n          this.loaded = true\n        }\n      }, 16*250*60/this.bpm)\n    },\n\n    replay_all(){\n      this. replay_bar(2, 4)\n    },\n\n    // Test mode\n    test_add(){\n      if (this.altered_noteseqs[3] == 0){\n        return\n      }\n      this.test_chd_strs.push(this.altered_chd_str)\n      this.test_chds.push(this.chds)\n    },\n\n    test_apply(){\n      if (this.playing || this.test_chd_strs.length == 0){\n        return\n      }\n      let idx = Math.floor(Math.random() * this.test_chd_strs.length)\n\n      // Hide things\n      this.hide_vis_input = true\n      this.altered_chd_str_hide = this.test_chd_strs[idx].slice()\n      this.altered_vis.noteSequence = {notes: [{pitch: 30, start:0, end:8}], totalTime:16}\n      this.test_idx = idx\n\n      const step = (i) => {\n        this.update_current_chord(this.test_chds[idx][i], this.test_chd_strs[idx][i*4])\n        if (i == 0){\n            setTimeout(() => {\n            step(i + 1)\n          }, 15*250*60/this.bpm);\n        }\n        else if (i < 3){\n          setTimeout(() => {\n            step(i + 1)\n          }, 16*250*60/this.bpm);\n        }\n      }\n\n      this.player_reset()\n      step(0)\n    },\n\n    test_show_answer(){\n      if (! this.hide_vis_input || this.playing){\n        return\n      }\n      this.hide_vis_input = false\n      this.altered_chd_str = this.altered_chd_str_hide.slice()\n      this.update_overlay()\n      this.altered_vis.noteSequence = this.altered_noteseq\n      this.altered_vis.redraw()\n    },\n    \n    test_clear(){\n      this.test_chd_strs = []\n      this.test_chds = []\n      this.altered_chd_str_hide = []\n      this.test_idx = -1\n      this.hide_vis_input = false\n    },\n\n    // Next phrase selector\n    update_next_phrases(){\n      if (this.filter_h == -1){\n        // Get the index for the current phrase\n        let samples = this.edge_weights.samples\n        let song_idx = 0\n        for (let i=0; i<samples.length; i++){\n          if (samples[i] == this.songID){\n            song_idx = i\n            break\n          } \n        }\n\n        let weights = []\n        for (let i=0; i<this.edge_weights.mat[song_idx].length; i++){\n          weights.push(this.edge_weights.mat[song_idx][i])\n        }\n\n        for (let i=0; i<3; i++){\n          // Select next phrases with the highest transition scores\n          let next_idx = weights.indexOf(Math.max(...weights))\n          weights[next_idx] = -999\n\n          let id = samples[next_idx]\n          if (id == this.songID){\n            i --\n            continue\n          }\n          this.next_phrases_id[i] = id\n          this.next_phrases[i] = this.allData[id].original_noteseq_acc\n        }\n      }\n      \n      else{\n        // Rank the phrases by the L2 distnce to the filter values\n        let dist_dic = {}\n        let dists = []\n        for (let i=0; i<this.edge_weights.samples.length; i++){\n          let sample = this.allData[this.edge_weights.samples[i]]\n          let dist = (sample['hd'] - this.filter_h) ** 2 + (sample['vd'] - this.filter_v) ** 2\n          if (! (dist in dist_dic) ){\n            dist_dic[dist] = [i]\n            dists.push(dist)\n          }\n          else{\n            dist_dic[dist].push(i)\n          }\n        }\n\n        let c = 0\n        dists.sort()\n        for (let i=0; i<dists.length; i++){\n          for (let j=0; j<dist_dic[dists[i]].length; j++){\n            let id = this.edge_weights.samples[dist_dic[dists[i]][j]]\n            this.next_phrases_id[c] = id\n            this.next_phrases[c] = this.allData[id].original_noteseq_acc\n            c ++\n            if (c > 3){\n              return\n            }\n          }\n        }\n      }\n\n      // for (let i=0; i<5; i++){\n      //   // Randomly select a next phrase\n      //   let keys = Object.keys(this.allData).slice(1)\n      //   let id = keys[Math.floor(Math.random() * keys.length)]\n      //   this.next_phrases_id[i] = id\n      //   this.next_phrases[i] = this.allData[id].original_noteseq_acc\n      // }\n    },\n\n    update_next_phrase(i){\n      this.next_phrase_idx = i\n    },\n\n    update_next_phrases_demo(){\n      let id = this.demo.phrase_seq[this.demo.line + 1]\n      this.next_phrases_id[0] = id\n      this.next_phrases[0] = this.allData[id].original_noteseq_acc\n    },\n\n    // Next phrase filter\n    set_filter(filter){\n      this.filter_h = filter[0]\n      this.filter_v = filter[1]\n      this.update_next_phrases()\n    },\n\n    apply_filter_anchors(){\n      let vds = []\n      let hds = []\n      for (let i=0; i<this.edge_weights.samples.length; i++){\n        let sample = this.allData[this.edge_weights.samples[i]]\n        vds.push(sample['vd'])\n        hds.push(sample['hd'])\n      }\n      vds.sort()\n      hds.sort()\n      let anchors_v = [vds[6], vds[12], vds[18], vds[24]]\n      let anchors_h = [hds[6], hds[12], hds[18], hds[24]]\n      for (let i=0; i<this.edge_weights.samples.length; i++){\n        let vd_q = 4\n        let hd_q = 4\n        let sample = this.allData[this.edge_weights.samples[i]]\n        let vd = sample['vd']\n        let hd = sample['hd']\n        for (let i=3; i>=0; i--){\n          if (vd < anchors_v[i]){\n            vd_q = i\n          }\n          if (hd < anchors_h[i]){\n            hd_q = i\n          }\n        }\n        sample['vd'] = vd_q\n        sample['hd'] = hd_q\n      }\n    },\n\n    // MIDI output\n    connect_midi(){\n      WebMidi\n        .enable()\n        .then(()=>{\n          this.midi_device_names = []\n          this.show_midi_devices = true\n          WebMidi.outputs.forEach(output => this.midi_device_names.push(output.name))\n          this.midi_device = WebMidi.outputs[1]\n        })\n        .catch(err => alert(err));\n    },\n\n    output_midi(note){\n        let dur = (note.endTime - note.startTime)*60000/Tone.Transport.bpm.value\n        if (dur > 2 *60000/Tone.Transport.bpm.value){\n          dur = 2 *60000/Tone.Transport.bpm.value\n        }\n        if (this.show_midi_devices){\n          this.midi_device.channels[this.midi_channel].playNote(note.pitch, {duration: dur, attack: note.velocity/128})\n        }\n      },\n\n    change_midi_channel(i){\n      this.midi_channel = i\n    },\n\n    follow_tempo(){\n      this.next_bpm = this.bpm\n    },\n\n    // Wheel\n    apply_velo(){\n      // // constants\n      // let pedal_scalar = 10000\n      // let wheel_force_scalar = 0.001\n      // let break_scalar = 2\n      // let bpm_floor = 50\n\n      // // Adjust velo\n      // let wheel_force = pedal_scalar * (this.wheel.gas - break_scalar * this.wheel.brake) / (this.next_bpm - bpm_floor) - (this.next_bpm - bpm_floor)\n      // console.log(pedal_scalar * (this.wheel.gas - this.wheel.brake) / (this.next_bpm - bpm_floor))\n      // console.log((this.next_bpm - bpm_floor))\n      // console.log(wheel_force)\n\n      // this.next_bpm += wheel_force_scalar * wheel_force\n\n      // if (this.next_bpm < bpm_floor){\n      //   this.next_bpm = bpm_floor\n      // }\n      // if (this.next_bpm > 200){\n      //   this.next_bpm = 200\n      // }\n\n      // setTimeout(() => {  this.apply_velo(); },  10)\n      \n    },\n\n    apply_wheel_shift(){\n      let idx = this.wheel.wheel_shift - 1\n      if (idx > -1){\n        this.$refs.phrase_selector.phrase_on_click(idx)\n      }\n      else{\n        this.$refs.phrase_selector.reset()\n      }\n    },\n\n    change_wheel_input_type(mode){\n      this.wheel.mode = mode\n      if (mode == 'none'){\n        this.wheel.connected = false\n      }\n      else{\n        this.input_type = 'movable'\n        this.wheel.connected = true\n      }\n    }\n\n  },\n\n\n  mounted(){\n    // Demo versions\n    if (this.demo.name == 'none'){\n      this.demo.name = document.querySelector('title').innerHTML\n      if (this.demo.name != 'hst-performance anthem'){\n        this.demo.name = 'none'\n      }\n    }\n\n    this.get_songdata()\n\n    if (this.demo.name == 'hst-performance anthem'){\n      this.get_data_anthem()\n    }\n    else{\n      this.get_data_all()\n    }\n    player.loadAllSamples().then(()=>{ \n        this.loaded = true\n        this.altered_noteseq.notes = []\n    })\n    \n    let This = this\n    player.callbackObject = {\n        run: (note) => {\n          This.canvas_update_note(note)\n          This.output_midi(note)\n          },\n        stop: () => {return}\n        };\n\n    // Barlines and player positioning\n    window.onresize = this.place_barlines_and_player\n    \n    // Keyboard shortcuts\n    document.addEventListener('keydown', (event) => {\n      let key = event.key\n      if (['e','E'].includes(key)){\n        this.player_reset()\n      }\n      if (['n','N'].includes(key)){\n        this.get_data()\n      }\n      if (['t','T'].includes(key)){\n        this.test_apply()\n      }\n      if (['s','S'].includes(key)){\n        this.test_show_answer()\n      }\n      if (['a','A'].includes(key)){\n        this.test_add()\n      }\n      if (['r','R'].includes(key)){\n        this.replay_all()\n      }\n      if (['l','L'].includes(key)){\n        if (this.demo.locked){\n          this.demo.locked = false\n        }\n      }\n      if (['k','K'].includes(key)){\n        if (this.demo.locked1 && ! this.demo.locked){\n          this.demo.locked1 = false\n        }\n      }\n      if ([' '].includes(key)){\n        event.preventDefault()\n      }\n      if (['m'].includes(key)){\n        console.log('hi')\n        faye_client.publish('/client', {\n          text: 'hi'\n      });\n        console.log(this.wheel.mode)\n      }\n    })\n\n    // Mouse wheel\n    // document.addEventListener('wheel', (event) => {\n    //   if (this.next_bpm > 30 && this.next_bpm < 200){\n    //     event.preventDefault()\n    //     this.next_bpm -= event.deltaY / 102\n    //   }\n    // },\n    // {\n    //   passive: false \n    // })\n\n    // Cell highlighting - original (copied form educational)\n    const mutationObserver_config = { childList: true, subtree: true, attributes:true };\n    let original_timer = document.getElementById(\"original_player\").shadowRoot.querySelector(\".current-time\")\n    let original_controls = document.getElementById(\"original_player\").shadowRoot.querySelector(\".controls\")\n\n    function original_cell_highlight(time_cell, prog_cell, step=1){\n        if (time_cell){\n            time_cell.classList.add(\"time_cell_active\")\n            setTimeout(() => {\n                if (time_cell.classList.contains(\"time_cell_active\")){\n                    time_cell.classList.remove(\"time_cell_active\")\n                }\n            }, step*1000);\n            if (! prog_cell.classList.contains(\"table_cell_active\")){\n                prog_cell.classList.add(\"table_cell_active\")\n                let lighted_cells = [prog_cell]\n                let timeout = step\n                let temp_cell = document.getElementById(\"original_prog\"+(lighted_cells[lighted_cells.length-1].id.slice(13,15)*1+1))\n                \n                while (temp_cell && temp_cell.innerHTML.replace(/\\s/g, '')==\"\"){\n                    temp_cell.classList.add(\"table_cell_active\")\n                    lighted_cells.push(temp_cell)\n                    temp_cell = document.getElementById(\"original_prog\"+(lighted_cells[lighted_cells.length-1].id.slice(13,15)*1+1))\n                    timeout += step\n                }\n                setTimeout(() => {\n                    while (lighted_cells.length > 0){\n                        let cell = lighted_cells.pop()\n                        if (cell.classList.contains(\"table_cell_active\")){\n                            cell.classList.remove(\"table_cell_active\")\n                        }\n                    }\n                }, timeout*1000);\n            }\n        }\n    }\n\n    let original_callback = function(mutationsList, observer) {\n        observer == observer\n        for(var mutation of mutationsList) {\n          mutation == mutation\n            if (original_controls.classList.contains(\"playing\")){\n                let time_cell = document.getElementById(\"time\"+(original_timer.innerHTML.slice(2,4)*1))\n                let prog_cell = document.getElementById(\"original_prog\"+(original_timer.innerHTML.slice(2,4)*1))\n                original_cell_highlight(time_cell, prog_cell)\n            }\n        }\n    };\n\n    let original_observer = new MutationObserver(original_callback);\n    original_observer.observe(original_controls, mutationObserver_config);\n\n    // Wheel\n    if (This.wheel.enabled){\n      This.apply_velo()\n      var faye_client = new Faye.Client('http://127.0.0.1:8001/');\n      faye_client.subscribe('/messages', function(message){\n\n        This.wheel.connected = true\n        if (This.wheel.mode == 'none'){\n          This.change_wheel_input_type('relative')\n        }\n\n        // Pedal\n          if (message.type == 'gas'){\n            This.wheel.gas = message.value \n            if (This.wheel.bpm_type == 'delta'){\n              This.next_bpm = This.bpm + (This.wheel.gas - This.wheel.brake) * This.wheel.acc_ratio\n            }\n          }\n\n          if (message.type == 'brake'){\n            This.wheel.brake = message.value \n            if (This.wheel.bpm_type == 'delta'){\n              This.next_bpm = This.bpm + (This.wheel.gas - This.wheel.brake) * This.wheel.acc_ratio\n            }\n          }\n\n        if (message.type == 'clutch'){\n          This.wheel.clutched = !This.wheel.clutched\n          if (!This.wheel.clutched){\n            // Stop the player at the next query step unless a new chord is entered\n            This.current_chd = ''\n            This.current_chd_text = ''\n          }\n          else if (!This.playing && This.input_type == 'movable'){\n            This.$refs.dial_wheel.outer_on_click(0)\n          }\n        }\n\n        // Wheel\n        if (message.type == 'wheel_turn'){\n          if (This.input_type == 'movable'){\n            This.wheel.turn_idx = message.value\n            This.$refs.dial_wheel.outer_on_click(message.value)\n          }\n        }\n\n        // Shift\n        if (message.type == 'shift'){\n          let val = message.value\n          if (val == 1){\n            This.$refs.phrase_filter_wheel.set_circle(50, 50)\n          }\n          if (val == 2){\n            This.$refs.phrase_filter_wheel.set_circle(50, 150)\n          }\n          if (val == 3){\n            This.$refs.phrase_filter_wheel.set_circle(150, 50)\n          }\n          if (val == 4){\n            This.$refs.phrase_filter_wheel.set_circle(150, 150)\n          }\n          if (val == 5){\n            This.$refs.phrase_filter_wheel.set_circle(250, 50)\n          }\n          if (val == 6){\n            This.$refs.phrase_filter_wheel.set_circle(250, 150)\n          }\n          if (val == 0){\n            This.$refs.phrase_filter_wheel.reset()\n          }\n        }\n\n        if (message.type == 'wheel_shift'){\n          This.wheel.wheel_shift = (message.value + This.wheel.wheel_shift_offset) % 4\n          This.apply_wheel_shift()\n        }\n      })\n\n    }\n },\n\n}\n\n\n</script>\n\n<style>\n/* General / Misc */\n#main_app{\n  transform-origin: top left;\n  -webkit-transform: scale(0.6);\n  position: relative;\n  left: 100px;\n}\n\n.right{\n    position: relative;\n    left: 100px;\n}\n\n.popover{\n  max-width: 100% !important;\n}\n\n/* Prog Table */\n.prog_table{\n    width: 1900px !important;\n}\n\n.prog_head{\n    text-align: center;\n    vertical-align: text-top;\n    width:100px;\n    font-weight: bold;\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n\n.prog_repos{\n    position: relative;\n    top: 5px;}\n\n.time_cell{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n    text-align: left;\n    width: 100px;\n}\n\n.time_cell_active{\n    background-color: #80b8f5 !important\n}\n\n.table_cell{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n    text-align: left;\n    width: 100px;\n}\n\n.table_tail{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n    text-align: left;\n}\n\n.table_cell_active{\n    background-color: #80b8f5 !important;\n    animation-name: table_cell_active_ani;\n    animation-duration: 1s;\n}\n\n/* Barlines //////////////////////////////////////////////////////////////////////////////// */\n.barline_svg{\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 1600px;\n    height: 1000px;\n    pointer-events: none;\n}\n\n.barline{\n    fill: black;\n    opacity: 0.1;\n}\n\n/* Piano Roll Overlay //////////////////////////////////////////////////////////////////// */\ncanvas{\n    display: block;\n}\n\n.svg{\n    position: relative;\n    top: -280px;\n    width: 1600px;\n    height: 280px;\n}\n\n.up{\n    position:relative;\n    top: -280px\n}\n\n#original_vis_overlay{\n  opacity: 0.85;\n}\n\n/* Bpm and vel_scale slider ////////////////////////////////////////////////////////////////////////////////// */\n.slider{\n    position: relative;\n    top: 15px;\n    -webkit-appearance: none;\n    width: 300px;\n    height: 10px;\n    background: #d3d3d3;\n    outline: none;\n    opacity: 0.7;\n    -webkit-transition: .2s;\n    transition: opacity .2s;\n}\n\n.slider:hover {\n    opacity: 1;\n  }\n  \n.slider::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 25px;\n    height: 25px;\n    background: #80b8f5;\n    cursor: pointer;\n    stroke-width: 0px;\n}\n  \n.slider::-moz-range-thumb {\n    width: 25px;\n    height: 25px;\n    background: #80b8f5;\n    cursor: pointer;\n    stroke-width: 0px;\n}\n\n.slider_container{\n    height: 50px;\n}\n\n/* hover dropdown menus //////////////////////////////////////////////////////////////////////////////////////*/\n@media only screen and (max-width: 991px) {\n    .navbar-hover .show > .dropdown-toggle::after{\n        transform: rotate(-90deg);\n    }\n}\n@media only screen and (min-width: 992px) {\n    .navbar-hover .collapse ul li{position:relative;}\n    .navbar-hover .collapse ul li:hover> ul{display:block}\n    .navbar-hover .collapse ul ul{position:absolute;top:100%;left:0;min-width:250px;display:none}\n    .navbar-hover .collapse ul ul ul{position:absolute;top:0;left:100%;min-width:250px;display:none}\n}\n\n#resample{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n    padding-left: 10%;\n}\n\n#browse_samples{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n\n.dropdown{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n\n/* Cell highlighting //////////////////////////////////////////////////////////////// */\n.cell_active{\n  background-color: #80b8f5 !important\n}\n\n/* Test //////////////////////////////////*/\n.test_correct{\n  color: #0c9600\n}\n\n.no_click{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n\n#phrase_select_wheel{\n    position:relative;\n    top: -1170px\n}\n</style>\n","<template>\n  <div>\n\n\n  <!-- Current chord display -->\n    <p>Current chord:</p>\n    <p id=current_chord_text v-bind:class=\"{'text_major':current_chord_type=='M', 'text_minor':current_chord_type=='m', 'text_dom':current_chord_type=='D'}\"> {{ current_chord_text }} </p>\n\n\n  <!-- Root selector -->\n    <table id=\"root_table\" class=\"table table-bordered table-fixed\">\n      <tbody>\n        <tr>\n          <td v-for=\"i in 12\" v-bind:key=\"i\" v-bind:id=\"'root_'+i\" \n            v-on:click=\"root_on_click(i-1, $event)\" \n            v-on:contextmenu.prevent=\"root_on_rightclick(i-1, $event)\"\n            v-on:click.middle=\"root_on_middleclick(i-1, $event)\" \n            v-bind:class=\"{'root_cell':true, \n                            'root_black':[1,3,6,8,10].includes(i-1),\n                            'major':current_chord_type=='M'&&current_chord_root==i-1, \n                            'minor':current_chord_type=='m'&&current_chord_root==i-1,\n                            'dom':current_chord_type=='D'&&current_chord_root==i-1\n                            }\" >\n            {{roots[i-1]}}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'InterfaceFixed',\n\n  data: function(){\n    return{\n      // 'Constants'\n      roots: ['C','C#','D','D#','E',\"F\",'F#','G','G#','A','A#','B'],\n\n      // Current selection\n      current_chord_root: \"0\",\n      current_chord_type: \"M\",\n      current_chord_interval: 3\n    }\n  },\n\n  computed: {\n    current_chord_text: function(){\n      if (this.current_chord_interval == 3){\n        if (this.current_chord_type == \"M\"){\n          return this.roots[this.current_chord_root]\n        }\n        return this.roots[this.current_chord_root] + this.current_chord_type\n      }\n      if (this.current_chord_type == \"D\"){\n        return this.roots[this.current_chord_root] + this.current_chord_interval\n      }\n      if (this.current_chord_type == \"M\"){\n        return this.roots[this.current_chord_root] + \"maj\" + this.current_chord_interval\n      }\n      return this.roots[this.current_chord_root] + this.current_chord_type + this.current_chord_interval\n    }\n  },\n\n  methods: {\n    root_on_click(root_idx, event){\n      if (event.ctrlKey){\n        this.root_on_rightclick(root_idx, event)\n        return\n      }\n      this.current_chord_root = root_idx\n      this.current_chord_type = \"M\"\n      if (event.altKey){\n        this.current_chord_interval = 7\n      }\n      else if (event.shiftKey && event.movementX != undefined){\n        this.current_chord_type = \"D\"\n        this.current_chord_interval = 7\n      }\n      else{\n        this.current_chord_interval = 3\n      }\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.current_chord_text)\n    },\n    root_on_rightclick(root_idx, event){\n      this.current_chord_root = root_idx\n      this.current_chord_type = \"m\"\n      this.current_chord_interval = 3\n      if (event.altKey){\n        this.current_chord_interval = 7\n      }\n      else{\n        this.current_chord_interval = 3\n      }\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.current_chord_text)\n    },\n    root_on_middleclick(root_idx){\n      this.current_chord_root = root_idx\n      this.current_chord_type = \"D\"\n      this.current_chord_interval = 7\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.current_chord_text)\n    },\n    keyboard_functions(event){ \n      let key = event.key\n      // Major\n      if (['!','@','#','$','%','^','&','*','(',')','_','+'].includes(key)){\n          event.preventDefault()\n          let idx = ['!','@','#','$','%','^','&','*','(',')','_','+'].indexOf(key)\n          this.root_on_click(idx, event)\n      }\n      else if (['','','','','','','','','','',''].includes(key)){\n          event.preventDefault()\n          let idx = ['','','','','','','','','','',''].indexOf(key)\n          this.root_on_click(idx, event)\n      }\n      // Minor\n      else if (['1','2','3','4','5','6','7','8','9','0','-','='].includes(key) && event.ctrlKey){\n          event.preventDefault()\n          let idx = ['1','2','3','4','5','6','7','8','9','0','-','='].indexOf(key)\n          this.root_on_rightclick(idx, event)\n      }\n      // Dominant\n      else if (['1','2','3','4','5','6','7','8','9','0','-','='].includes(key) && event.altKey){\n          event.preventDefault()\n          let idx = ['1','2','3','4','5','6','7','8','9','0','-','='].indexOf(key)\n          this.root_on_middleclick(idx, event)\n      }\n      else if (['','','','','','','','','','','',''].includes(key)){\n          event.preventDefault()\n          let idx = ['','','','','','','','','','','',''].indexOf(key)\n          this.root_on_middleclick(idx, event)\n      }\n    }\n  },\n\n  mounted(){\n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keyboard_functions)\n  },\n  \n  beforeUnmount() {\n    document.removeEventListener('keydown', this.keyboard_functions);\n  }\n\n}\n</script>\n\n<style scoped>\n\n/* Current chord text ////////////////////////////////////////////////////////////////////*/\n#current_chord_text{\n    font-size: 100px;\n    text-anchor: middle;\n}\n\n.text_major{\n    color:#2990ff;\n}\n\n.text_minor{\n    color:#295bff;\n}\n.text_dom{\n  color: #ff9797;\n}\n\n\n/* Root Table /////////////////////////////////////////////////////////////////////////////*/\n#root_table{\n    width: 720px !important;\n}\n\n.root_cell{\n    width: 60px;\n    text-anchor: middle;\n    text-align: center;\n    vertical-align: middle !important;\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n.root_cell:hover{\n    background-color: #80b8f5;\n}\n\n.root_black{\n    background-color: #aaaaaa;\n}\n\n.major{\n    background-color: #29b1ff;\n}\n.major:hover{\n    background-color: #00a2ff;\n}\n\n.minor{\n    background-color: #436efc;\n}\n.minor:hover{\n    background-color: #295bff;\n}\n\n.dom{\n    background-color: #ff9797;\n}\n.dom:hover{\n    background-color: #ff7575;\n}\n\n</style>\n","import { render } from \"./InterfaceFixed.vue?vue&type=template&id=0c3b6279&scoped=true\"\nimport script from \"./InterfaceFixed.vue?vue&type=script&lang=js\"\nexport * from \"./InterfaceFixed.vue?vue&type=script&lang=js\"\n\nimport \"./InterfaceFixed.vue?vue&type=style&index=0&id=0c3b6279&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0c3b6279\"\n\nexport default script","<template>\n  <div>\n    <svg id=\"dial_svg\"></svg>\n  </div>\n</template>\n\n<script>\nconst d3 = require(\"d3\")\nconst { Note, Scale } = require(\"@tonaljs/tonal\")\nconsole.log(Note,Scale)\n\nexport default {\n  name: 'InterfaceMovable',\n\n  props:{\n    interface_key: String,\n    roots: Array\n  },\n\n  data: function(){\n    return{\n      // 'Constants'\n      major_scale: [0,2,4,5,7,9,11],\n\n      // Current selection\n      current_chord_root: \"0\",\n      current_chord_type: \"M\",\n      current_chord_interval: 3,\n\n      // Dial\n      dial_r_outer: 100,\n      degree_text: ['I','ii','iii','IV','V','vi','vii'],\n\n      // Keyboard\n      alt: false,\n      ctrl: false,\n      shift: false,\n      s: false,\n      z: false,\n      x: false\n    }\n  },\n\n  computed: {\n    // Dial\n    interface_key_idx: function(){\n      return this.roots.indexOf(this.interface_key)\n    },\n\n    dial_r_center: function(){\n      return this.dial_r_outer/2\n    },\n\n    dial_r_degrees: function(){\n      return this.dial_r_outer * 1.5\n    },\n\n    // Interfacing\n    scale_roots: function(){\n      return Scale.get(this.interface_key + \" major\").notes\n    }\n  },\n\n  methods: {\n    // Dial\n    outer_text: function(interface_key){\n      let scale_notes = Scale.get(interface_key + \" major\").notes\n\n      for (let i=0; i<3; i++){\n        scale_notes[[1,2,5][i]] += \"m\"\n      }\n      scale_notes[6] += \"dim\"\n      return scale_notes\n    },\n    draw_dial(outer_text){\n      d3.selectAll('g').remove().exit()\n      let g = d3.select(\"#dial_svg\").append('g').attr('class', 'g').attr(\"transform\", \"translate(\"+(this.dial_r_degrees+5)+\",\"+(this.dial_r_degrees+5)+\")\");\n      let This = this\n      // Outer Ring & degree (roman numerals)\n      for (let i=0; i < outer_text.length; i++){\n        let arc = d3.arc()\n        .innerRadius(this.dial_r_center)\n        .outerRadius(this.dial_r_outer)\n        .startAngle(2*i*Math.PI / outer_text.length)\n        .endAngle(2*(i+1)*Math.PI / outer_text.length)\n    \n        g.append(\"path\")\n            .attr(\"d\", arc)\n            .attr(\"id\", 'outer_path'+i)\n            .attr(\"class\", \"outer_path\")\n            .on(\"click\", function(){This.outer_on_click(i)})\n            .on(\"contextmenu\", function(e){\n              e.preventDefault()\n              This.outer_on_click(i)\n            })\n            .on(\"mouseover\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n            })\n            .on(\"mouseout\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n            })\n        \n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_center)/2*Math.cos(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_center)/2*Math.sin(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"class\", \"outer_text\")\n        .attr(\"id\", \"outer_text\"+i)\n        .text(outer_text[i])\n        .on(\"click\", function(){This.outer_on_click(i)})\n        .on(\"contextmenu\", function(e){\n          e.preventDefault()\n          This.outer_on_click(i)\n        })\n        .on(\"mouseover\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n        })\n        .on(\"mouseout\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n        })\n\n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.cos(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.sin(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"class\", \"outer_text\")\n        .text(this.degree_text[i])\n    }\n\n    g.append('circle')\n        .attr('x',0)\n        .attr('y',0)\n        .attr('r',this.dial_r_center)\n        .attr(\"class\", \"center_path\")\n        \n\n    g.append(\"text\") \n        .attr(\"class\", \"center_text\")\n        .attr(\"id\",\"center_text\")\n        .text(\"\")\n    },\n    get_current_chord_text: function(root){\n      if (this.current_chord_interval == 3){\n        if (this.current_chord_type == 'sdM'){\n          return root \n        }\n        if (this.current_chord_type == 'sdm'){\n          return root + 'm' \n        }\n        if (this.current_chord_type == 'xdM'){\n          return root \n        }\n        if (this.current_chord_type == 'xdm'){\n          return root + 'm' \n        }\n        if (this.current_chord_type == \"M\"){\n          return root\n        }\n        return root + this.current_chord_type\n      }\n      if (this.current_chord_type == \"D\"){\n        return root + this.current_chord_interval\n      }\n      if (this.current_chord_type == \"M\"){\n        return root + \"maj\" + this.current_chord_interval\n      }\n      return root + this.current_chord_type + this.current_chord_interval\n    },\n    update_center_text(text){\n      let center_text = d3.select(\"#center_text\")\n      center_text.text(text)\n\n      center_text.classed('text_major', false)\n      center_text.classed('text_minor', false)\n      center_text.classed('text_dom', false)\n      if (this.current_chord_type == \"M\"){\n        d3.select(\"#center_text\").classed('text_major', true)\n      }\n      if (this.current_chord_type == \"m\"){\n        center_text.classed('text_minor', true)\n      }\n      if (this.current_chord_type == \"D\"){\n        center_text.classed('text_dom', true)\n      }\n    },\n    outer_on_click(i){\n      // Interfacing\n      this.current_chord_root = (this.major_scale[i] + this.roots.indexOf(this.interface_key)) % 12\n      let scale_root_text = this.scale_roots[i]\n      if (this.s){\n        this.current_chord_root = (this.current_chord_root + 7) % 12\n        scale_root_text = this.scale_roots[(i+4)%7]\n        if (i == 6){\n          if (scale_root_text.length == 2 && scale_root_text.charAt(1) == \"b\"){\n            scale_root_text = scale_root_text.charAt(0)\n          }\n          else {\n            scale_root_text += '#'\n          }\n        }\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n      }\n      if (this.alt){\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n        if (this.shift){\n          this.current_chord_type = \"M\"\n        }\n        else if (this.ctrl){\n          console.log(\"CTRL\")\n          this.current_chord_type = \"m\"\n        }\n      }\n      else if (this.shift){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"M\"\n      }\n      else if (this.ctrl){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"m\"\n      }\n      else if (! this.s){\n        // No key pressed\n        this.current_chord_interval = 3\n        if ([0,3,4].includes(i)){\n          this.current_chord_type = \"M\"\n        }\n        else{\n          this.current_chord_type = \"m\"\n        }\n      }\n      if (this.z){\n        this.current_chord_type = 'sd' + this.current_chord_type\n      }\n      if (this.x){\n        this.current_chord_type = 'xd' + this.current_chord_type\n      }\n      this.update_center_text(this.get_current_chord_text(scale_root_text))\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.get_current_chord_text(scale_root_text))\n\n      // Visuals\n      for (let i=0; i<7; i++){\n        d3.select('#outer_path'+i).classed(\"outer_path_active\",false)\n      }\n      d3.select('#outer_path'+i).classed(\"outer_path_active\",true)\n    },\n    keydown_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = true\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = true\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = true\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = true\n      }\n      if (['Z','z'].includes(key)){\n        event.preventDefault()\n        this.z = true\n      }\n      if (['X','x'].includes(key)){\n        event.preventDefault()\n        this.x = true\n      }\n      if (['1','2','3','4','5','6','7'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['1','2','3','4','5','6','7'].indexOf(key))\n      }\n      if (['!','@','#','$','%','^','&'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['!','@','#','$','%','^','&'].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n    },\n    keyup_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = false\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = false\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = false\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = false\n      }\n      if (['Z','z'].includes(key)){\n        event.preventDefault()\n        this.z = false\n      }\n      if (['X','x'].includes(key)){\n        event.preventDefault()\n        this.x = false\n      }\n    }\n  },\n\n  mounted(){\n    this.draw_dial(this.outer_text(this.interface_key))\n    \n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keydown_functions)\n    document.addEventListener('keyup', this.keyup_functions)\n  },\n\n  beforeUnmount(){\n    document.removeEventListener('keydown', this.keydown_functions)\n    document.removeEventListener('keyup', this.keyup_functions)\n  }\n\n}\n</script>\n\n<style>\n/* Dial /////////////////////////////////////*/\n#dial_svg{\n    width: 400px;\n    height: 400px;\n}\n\n.outer_path{\n    stroke: black;\n    fill: white;\n}\n\n.outer_text{\n    stroke: black;\n    fill: black;\n    stroke-width: 0;\n    font-size: 15px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.outer_path_mouseover{\n    fill: #80b8f5;\n}\n\n.outer_path_active{\n    fill: #347dff;\n}\n\n.center_path{\n    stroke: black;\n    fill: white;\n}\n\n.center_text{\n    stroke-width: 0;\n    font-size: 25px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.text_major{\n    fill:#3b9aff;\n}\n\n.text_minor{\n    fill:#0069da;\n}\n.text_dom{\n  fill: #ff9797;\n}\n</style>\n","import { render } from \"./InterfaceMovable.vue?vue&type=template&id=22df1487\"\nimport script from \"./InterfaceMovable.vue?vue&type=script&lang=js\"\nexport * from \"./InterfaceMovable.vue?vue&type=script&lang=js\"\n\nimport \"./InterfaceMovable.vue?vue&type=style&index=0&id=22df1487&lang=css\"\nscript.render = render\n\nexport default script","<template>\n    <svg id=\"filter_svg\" height=\"200px\" width=\"200px\"></svg>\n    <img src='accFilter_icons/vSparse.svg' height='200' width='200' class='filter_icon' id='vSparse' />\n    <img src='accFilter_icons/vDense.svg' height='200' width='200' class='filter_icon' id='vDense' />\n    <img src='accFilter_icons/hSparse.svg' height='200' width='200' class='filter_icon' id='hSparse' />\n    <img src='accFilter_icons/hDense.svg' height='200' width='200' class='filter_icon' id='hDense' />\n    <button class=\"btn btn-light up\" v-on:click=\"reset\">Reset</button><br>\n</template>\n\n<script>\nconst d3 = require(\"d3\")\n\nexport default {\n  name: 'PhraseFilter',\n\n  data: function(){\n    return{\n      x: -1,\n      y: 201,\n      filter_h: -1,\n      filter_v: -1,\n    }\n  },\n\n  computed: {\n  },\n\n  methods: {\n    reset(){\n      this.x = -1\n      this.y = 201\n      d3.selectAll(\".circle\").remove().exit()\n      this.set_filter()\n    },\n\n    set_filter(){\n      let x_quant = (this.x - this.x % 40) / 40\n      let y_quant = 4 - (this.y - this.y % 40) / 40\n      if (this.x < 0){\n        x_quant = -1\n      }\n      if (x_quant != this.filter_h || y_quant != this.filter_v){\n        this.filter_h = x_quant\n        this.filter_v = y_quant\n        this.$emit('set_filter', [this.filter_h, this.filter_v])\n      }\n    }\n  },\n\n  mounted(){\n    const canvas_size = 200\n    const n_bins = 5\n    const line_width = 2\n\n    let this_ = this\n\n    const dragHandler = d3.drag()\n    .on(\"drag\", function (e) {\n      let rect = document.getElementById(\"filter_svg\").getBoundingClientRect()\n      let new_x = (e.sourceEvent.clientX - rect.x)/0.6\n      let new_y = (e.sourceEvent.clientY - rect.y)/0.6\n      if (new_x > 200){\n        new_x = 199\n      }\n      if (new_x < 0){\n        new_x = 1\n      }\n      if (new_y > 200){\n        new_y = 199\n      }\n      if (new_y < 0){\n        new_y = 1\n      }\n      this_.x = new_x\n      this_.y = new_y\n      d3.selectAll(\".circle\")\n          .attr(\"cx\", new_x)\n          .attr(\"cy\", new_y)\n      this_.set_filter()\n    })\n    let svg = d3.select('#filter_svg')\n\n    // Set up the background and selector movement\n    svg.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', canvas_size)\n      .attr('height', canvas_size)\n      .attr('fill', 'black')\n      .attr('opacity', 0.3)\n\n    svg.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', canvas_size)\n      .attr('height', canvas_size)\n      .attr('fill', 'black')\n      .attr('opacity', 0)\n      .classed(\"background\", true)\n      .on('mousedown', function(e){\n        let rect = document.getElementById(\"filter_svg\").getBoundingClientRect()\n        \n        d3.selectAll('.circle').remove().exit()\n\n        svg.append('circle')\n          .attr('cx', (e.clientX - rect.x)/0.6)\n          .attr('cy', (e.clientY - rect.y)/0.6)\n          .attr('r', 10)\n          .attr('fill', '#00a2ff')\n          .classed('circle', true)\n\n          dragHandler(svg.selectAll(\".circle\"))\n          this_.x = (e.clientX - rect.x)/0.6\n          this_.y = (e.clientY - rect.y)/0.6\n          this_.set_filter()\n      })\n      \n    dragHandler(svg.selectAll(\".background\"));\n\n    // Add lines\n    for (let i=1; i<n_bins; i++){\n      svg.append('rect')\n      .attr('x', i * canvas_size / n_bins)\n      .attr('y', 0)\n      .attr('width', line_width)\n      .attr('height', canvas_size)\n      .attr('fill', 'white')\n      .attr('opacity', 0.3)\n\n      svg.append('rect')\n      .attr('x', 0)\n      .attr('y', i * canvas_size / n_bins)\n      .attr('width', canvas_size)\n      .attr('height', line_width)\n      .attr('fill', 'white')\n      .attr('opacity', 0.3)\n    }\n\n    d3.selectAll('.background').raise()\n\n\n  },\n  \n  beforeUnmount() {\n  }\n\n}\n</script>\n\n<style scoped>\n.filter_icon{\n  position: relative;\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n#vSparse{\n  left: 130px;\n  top: -10px;\n  -webkit-transform: scale(2);\n  transform-origin: center;\n}\n\n#vDense{\n  left: 92px;\n  top: -380px;\n  -webkit-transform: scale(1.4);\n  transform-origin: center;\n}\n\n#hSparse{\n  left: 47px;\n  top: -485px;\n  -webkit-transform: scale(2);\n  transform-origin: center;\n}\n\n#hDense{\n  left: 125px;\n  top: -720px;\n  -webkit-transform: scale(1.3);\n  transform-origin: center;\n}\n\n.up{\n  position: relative;\n  top: -800px;\n}\n\n</style>\n","import { render } from \"./PhraseFilter.vue?vue&type=template&id=ac833fb6&scoped=true\"\nimport script from \"./PhraseFilter.vue?vue&type=script&lang=js\"\nexport * from \"./PhraseFilter.vue?vue&type=script&lang=js\"\n\nimport \"./PhraseFilter.vue?vue&type=style&index=0&id=ac833fb6&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-ac833fb6\"\n\nexport default script","<template>\n  <div class=\"up\">\n     <table id=\"phrase_table\" class=\"table table-bordered table-fixed\">\n      <tbody>\n        <tr v-for=\"i in 3\" v-bind:key=\"i\" v-bind:id=\"'phrase_'+i\"\n          v-on:click=\"phrase_on_click(i-1)\" \n          v-bind:class=\"{'phrase_cell':true, \n                          'selected': i-1 == next_phrase_idx\n                          }\" >\n          <td>\n            <midi-visualizer type=\"piano-roll\" id=\"vis[i-1]\" v-bind:noteSequence=\"noteseqs[i-1]\" v-bind:config=\"cfg\"></midi-visualizer>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PhraseSelect',\n\n  props:{\n    noteseqs: Array,\n  },\n\n  data: function(){\n    return{\n      next_phrase_idx: -1,\n\n      cfg: {\n        noteHeight: 2,\n        pixelsPerTimeStep: 40,\n        minPitch: 35,\n        maxPitch: 80,\n        noteSpacing: 0.5\n      },\n    }\n  },\n\n  computed: {\n  },\n\n  methods: {\n    reset(){\n      this.next_phrase_idx=-1\n    },\n\n    // Clicks\n    phrase_on_click(i){\n      this.next_phrase_idx = i\n      this.$emit('update_next_phrase', i)\n    },\n\n    // Keyboard inputs\n    keyboard_functions(event){ \n      let key = event.key\n      // console.log(key)\n      return key\n    }\n  },\n\n  mounted(){\n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keyboard_functions)\n  },\n  \n  beforeUnmount() {\n    document.removeEventListener('keydown', this.keyboard_functions);\n  }\n\n}\n</script>\n\n<style scoped>\n#phrase_table{\n    width: 650px !important;\n}\n\n.phrase_cell{\n    width: 60px;\n    text-anchor: middle;\n    text-align: left;\n    vertical-align: middle !important;\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n\n.phrase_cell:hover{\n    background-color: #a2cbf7;\n}\n\n.selected{\n  background-color: #64abf7;\n}\n\n.selected:hover{\n  background-color: #64abf7;\n}\n\n.up{\n  position: relative;\n  top: -800px;\n}\n\n</style>\n","import { render } from \"./PhraseSelect.vue?vue&type=template&id=fa5e1bb8&scoped=true\"\nimport script from \"./PhraseSelect.vue?vue&type=script&lang=js\"\nexport * from \"./PhraseSelect.vue?vue&type=script&lang=js\"\n\nimport \"./PhraseSelect.vue?vue&type=style&index=0&id=fa5e1bb8&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-fa5e1bb8\"\n\nexport default script","<template>\n    <table id=\"phrase_table\" class=\"table table-bordered table-fixed\">\n    <tbody>\n      <tr v-for=\"i in 1\" v-bind:key=\"i\" v-bind:id=\"'phrase_'+i\"\n        v-bind:class=\"{'phrase_cell':true, \n                        'selected': i-1 == next_phrase_idx\n                        }\" >\n        <td>\n          <midi-visualizer type=\"piano-roll\" id=\"vis[i-1]\" v-bind:noteSequence=\"noteseqs[i-1]\" v-bind:config=\"cfg\"></midi-visualizer>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n</template>\n\n<script>\nexport default {\n  name: 'PhraseSelectDemo',\n\n  props:{\n    noteseqs: Array,\n  },\n\n  data: function(){\n    return{\n      next_phrase_idx: -1,\n\n      cfg: {\n        noteHeight: 2,\n        pixelsPerTimeStep: 40,\n        minPitch: 35,\n        maxPitch: 80,\n        noteSpacing: 0.5\n      },\n    }\n  },\n\n  computed: {\n  },\n\n  methods: {\n    reset(){\n      this.next_phrase_idx=-1\n    },\n\n    // Clicks\n    phrase_on_click(i){\n      this.next_phrase_idx = i\n      this.$emit('update_next_phrase', i)\n    },\n\n    // Keyboard inputs\n    keyboard_functions(event){ \n      let key = event.key\n      // console.log(key)\n      return key\n    }\n  },\n\n  mounted(){\n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keyboard_functions)\n  },\n  \n  beforeUnmount() {\n    document.removeEventListener('keydown', this.keyboard_functions);\n  }\n\n}\n</script>\n\n<style scoped>\n#phrase_table{\n    width: 650px !important;\n}\n\n.phrase_cell{\n    width: 60px;\n    text-anchor: middle;\n    text-align: left;\n    vertical-align: middle !important;\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n\n</style>\n","import { render } from \"./PhraseSelectDemo.vue?vue&type=template&id=5c662532&scoped=true\"\nimport script from \"./PhraseSelectDemo.vue?vue&type=script&lang=js\"\nexport * from \"./PhraseSelectDemo.vue?vue&type=script&lang=js\"\n\nimport \"./PhraseSelectDemo.vue?vue&type=style&index=0&id=5c662532&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5c662532\"\n\nexport default script","<template>\n  <div>\n    <svg id=\"dial_svg\"></svg>\n  </div>\n</template>\n\n<script>\nconst d3 = require(\"d3\")\nconst { Note, Scale } = require(\"@tonaljs/tonal\")\nconsole.log(Note,Scale)\n\nexport default {\n  name: 'InterfaceMovableWheel',\n\n  props:{\n    interface_key: String,\n    roots: Array\n  },\n\n  data: function(){\n    return{\n      // 'Constants'\n      major_scale: [0,2,4,5,7,9,11],\n\n      // Current selection\n      current_chord_root: \"0\",\n      current_chord_type: \"M\",\n      current_chord_interval: 3,\n\n      // Dial\n      dial_r_outer: 100,\n      degree_text: ['I','ii','iii','IV','V','vi','vii'],\n\n      // Keyboard\n      alt: false,\n      ctrl: false,\n      shift: false,\n      s: false,\n\n      // Wheel\n      offset: 0\n    }\n  },\n\n  computed: {\n    // Dial\n    interface_key_idx: function(){\n      return this.roots.indexOf(this.interface_key)\n    },\n\n    dial_r_center: function(){\n      return this.dial_r_outer/2\n    },\n\n    dial_r_degrees: function(){\n      return this.dial_r_outer * 1.5\n    },\n\n    // Interfacing\n    scale_roots: function(){\n      return Scale.get(this.interface_key + \" major\").notes\n    }\n  },\n\n  methods: {\n    // Dial\n    outer_text: function(interface_key){\n      let scale_notes = Scale.get(interface_key + \" major\").notes\n\n      for (let i=0; i<3; i++){\n        scale_notes[[1,2,5][i]] += \"m\"\n      }\n      scale_notes[6] += \"dim\"\n      return scale_notes\n    },\n    draw_dial(outer_text, offset=0){\n      this.offset = (this.offset + offset) % 7\n      offset = this.offset\n      d3.selectAll('g').remove().exit()\n      let g = d3.select(\"#dial_svg\").append('g').attr('class', 'g').attr(\"transform\", \"translate(\"+(this.dial_r_degrees+5)+\",\"+(this.dial_r_degrees+5)+\")\");\n      let This = this\n      // Outer Ring & degree (roman numerals)\n      for (let i=0; i < outer_text.length; i++){\n        let arc = d3.arc()\n        .innerRadius(this.dial_r_center)\n        .outerRadius(this.dial_r_outer)\n        .startAngle(2 * ((i - offset + 7) % 7) *Math.PI / outer_text.length - Math.PI / outer_text.length)\n        .endAngle(2 * (((i - offset + 7) % 7)+1)*Math.PI / outer_text.length - Math.PI / outer_text.length)\n    \n        g.append(\"path\")\n            .attr(\"d\", arc)\n            .attr(\"id\", 'outer_path'+i)\n            .attr(\"class\", \"outer_path\")\n            .on(\"click\", function(){This.outer_on_click(i)})\n            .on(\"contextmenu\", function(e){\n              e.preventDefault()\n              This.outer_on_click(i)\n            })\n            .on(\"mouseover\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n            })\n            .on(\"mouseout\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n            })\n        \n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_center)/2*Math.cos(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_center)/2*Math.sin(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"class\", \"outer_text\")\n        .attr(\"id\", \"outer_text\"+i)\n        .text(outer_text[i])\n        .on(\"click\", function(){This.outer_on_click(i)})\n        .on(\"contextmenu\", function(e){\n          e.preventDefault()\n          This.outer_on_click(i)\n        })\n        .on(\"mouseover\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n        })\n        .on(\"mouseout\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n        })\n\n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.cos(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.sin(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"class\", \"outer_text\")\n        .text(this.degree_text[i])\n    }\n\n    g.append('circle')\n        .attr('x',0)\n        .attr('y',0)\n        .attr('r',this.dial_r_center)\n        .attr(\"class\", \"center_path\")\n        \n\n    g.append(\"text\") \n        .attr(\"class\", \"center_text\")\n        .attr(\"id\",\"center_text\")\n        .text(\"\")\n    },\n    get_current_chord_text: function(root){\n      if (this.current_chord_interval == 3){\n        if (this.current_chord_type == \"M\"){\n          return root\n        }\n        return root + this.current_chord_type\n      }\n      if (this.current_chord_type == \"D\"){\n        return root + this.current_chord_interval\n      }\n      if (this.current_chord_type == \"M\"){\n        return root + \"maj\" + this.current_chord_interval\n      }\n      return root + this.current_chord_type + this.current_chord_interval\n    },\n    update_center_text(text){\n      let center_text = d3.select(\"#center_text\")\n      center_text.text(text)\n\n      center_text.classed('text_major', false)\n      center_text.classed('text_minor', false)\n      center_text.classed('text_dom', false)\n      if (this.current_chord_type == \"M\"){\n        d3.select(\"#center_text\").classed('text_major', true)\n      }\n      if (this.current_chord_type == \"m\"){\n        center_text.classed('text_minor', true)\n      }\n      if (this.current_chord_type == \"D\"){\n        center_text.classed('text_dom', true)\n      }\n    },\n    outer_on_click(i, no_send){\n      i = ((i + this.offset + 7) % 7)\n      console.log(i)\n      // Interfacing\n      this.current_chord_root = (this.major_scale[i] + this.roots.indexOf(this.interface_key)) % 12\n      let scale_root_text = this.scale_roots[i]\n      if (this.s){\n        this.current_chord_root = (this.current_chord_root + 7) % 12\n        scale_root_text = this.scale_roots[(i+4)%7]\n        if (i == 6){\n          if (scale_root_text.length == 2 && scale_root_text.charAt(1) == \"b\"){\n            scale_root_text = scale_root_text.charAt(0)\n          }\n          else {\n            scale_root_text += '#'\n          }\n        }\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n      }\n      if (this.alt){\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n        if (this.shift){\n          this.current_chord_type = \"M\"\n        }\n        else if (this.ctrl){\n          this.current_chord_type = \"m\"\n        }\n      }\n      else if (this.shift){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"M\"\n      }\n      else if (this.ctrl){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"m\"\n      }\n      else if (! this.s){\n        // No key pressed\n        this.current_chord_interval = 3\n        if ([0,3,4].includes(i)){\n          this.current_chord_type = \"M\"\n        }\n        else{\n          this.current_chord_type = \"m\"\n        }\n      }\n      this.update_center_text(this.get_current_chord_text(scale_root_text))\n      \n      if (!no_send){\n        this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.get_current_chord_text(scale_root_text))\n      }\n      \n      // Visuals\n      for (let i=0; i<7; i++){\n        d3.select('#outer_path'+i).classed(\"outer_path_active\",false)\n      }\n      d3.select('#outer_path'+i).classed(\"outer_path_active\",true)\n    },\n    keydown_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = true\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = true\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = true\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = true\n      }\n      if (['1','2','3','4','5','6','7'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['1','2','3','4','5','6','7'].indexOf(key))\n      }\n      if (['!','@','#','$','%','^','&'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['!','@','#','$','%','^','&'].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n    },\n    keyup_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = false\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = false\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = false\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = false\n      }\n    },\n\n    // Wheel\n    update_offest(idx){\n      this.draw_dial(this.outer_text(this.interface_key), idx)\n      this.outer_on_click(idx, true)\n    }\n  },\n\n  mounted(){\n    this.draw_dial(this.outer_text(this.interface_key))\n    \n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keydown_functions)\n    document.addEventListener('keyup', this.keyup_functions)\n  },\n\n  beforeUnmount(){\n    document.removeEventListener('keydown', this.keydown_functions)\n    document.removeEventListener('keyup', this.keyup_functions)\n  }\n\n}\n</script>\n\n<style>\n/* Dial /////////////////////////////////////*/\n#dial_svg{\n    width: 400px;\n    height: 400px;\n}\n\n.outer_path{\n    stroke: black;\n    fill: white;\n}\n\n.outer_text{\n    stroke: black;\n    fill: black;\n    stroke-width: 0;\n    font-size: 15px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.outer_path_mouseover{\n    fill: #80b8f5;\n}\n\n.outer_path_active{\n    fill: #347dff;\n}\n\n.center_path{\n    stroke: black;\n    fill: white;\n}\n\n.center_text{\n    stroke-width: 0;\n    font-size: 25px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.text_major{\n    fill:#3b9aff;\n}\n\n.text_minor{\n    fill:#0069da;\n}\n.text_dom{\n  fill: #ff9797;\n}\n</style>\n","import { render } from \"./InterfaceMovableWheel.vue?vue&type=template&id=e816ae82\"\nimport script from \"./InterfaceMovableWheel.vue?vue&type=script&lang=js\"\nexport * from \"./InterfaceMovableWheel.vue?vue&type=script&lang=js\"\n\nimport \"./InterfaceMovableWheel.vue?vue&type=style&index=0&id=e816ae82&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <svg id=\"dial_svg\"></svg>\n  </div>\n</template>\n\n<script>\nconst d3 = require(\"d3\")\nconst { Note, Scale } = require(\"@tonaljs/tonal\")\nconsole.log(Note,Scale)\n\nexport default {\n  name: 'InterfaceMovableWheelFixed',\n\n  props:{\n    interface_key: String,\n    roots: Array\n  },\n\n  data: function(){\n    return{\n      // 'Constants'\n      major_scale: [0,2,4,5,7,9,11],\n\n      // Current selection\n      current_chord_root: \"0\",\n      current_chord_type: \"M\",\n      current_chord_interval: 3,\n\n      // Dial\n      dial_r_outer: 100,\n      degree_text: ['I','ii','iii','IV','V','vi','vii'],\n\n      // Keyboard\n      alt: false,\n      ctrl: false,\n      shift: false,\n      s: false,\n\n      // Wheel\n      offset: 0\n    }\n  },\n\n  computed: {\n    // Dial\n    interface_key_idx: function(){\n      return this.roots.indexOf(this.interface_key)\n    },\n\n    dial_r_center: function(){\n      return this.dial_r_outer/2\n    },\n\n    dial_r_degrees: function(){\n      return this.dial_r_outer * 1.5\n    },\n\n    // Interfacing\n    scale_roots: function(){\n      return Scale.get(this.interface_key + \" major\").notes\n    }\n  },\n\n  methods: {\n    // Dial\n    outer_text: function(interface_key){\n      let scale_notes = Scale.get(interface_key + \" major\").notes\n\n      for (let i=0; i<3; i++){\n        scale_notes[[1,2,5][i]] += \"m\"\n      }\n      scale_notes[6] += \"dim\"\n      return scale_notes\n    },\n    draw_dial(outer_text, offset=0){\n      this.offset = (this.offset + offset) % 7\n      offset = this.offset\n      d3.selectAll('g').remove().exit()\n      let g = d3.select(\"#dial_svg\").append('g').attr('class', 'g').attr(\"transform\", \"translate(\"+(this.dial_r_degrees+5)+\",\"+(this.dial_r_degrees+5)+\")\");\n      let This = this\n      // Outer Ring & degree (roman numerals)\n      for (let i=0; i < outer_text.length; i++){\n        let arc = d3.arc()\n        .innerRadius(this.dial_r_center)\n        .outerRadius(this.dial_r_outer)\n        .startAngle(2 * ((i - offset + 7) % 7) *Math.PI / outer_text.length - Math.PI / outer_text.length)\n        .endAngle(2 * (((i - offset + 7) % 7)+1)*Math.PI / outer_text.length - Math.PI / outer_text.length)\n    \n        g.append(\"path\")\n            .attr(\"d\", arc)\n            .attr(\"id\", 'outer_path'+i)\n            .attr(\"class\", \"outer_path\")\n            .on(\"click\", function(){This.outer_on_click(i)})\n            .on(\"contextmenu\", function(e){\n              e.preventDefault()\n              This.outer_on_click(i)\n            })\n            .on(\"mouseover\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n            })\n            .on(\"mouseout\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n            })\n        \n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_center)/2*Math.cos(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_center)/2*Math.sin(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"class\", \"outer_text\")\n        .attr(\"id\", \"outer_text\"+i)\n        .text(outer_text[i])\n        .on(\"click\", function(){This.outer_on_click(i)})\n        .on(\"contextmenu\", function(e){\n          e.preventDefault()\n          This.outer_on_click(i)\n        })\n        .on(\"mouseover\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n        })\n        .on(\"mouseout\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n        })\n\n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.cos(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.sin(2*((i - offset + 7) % 7)*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI - Math.PI / outer_text.length))\n        .attr(\"class\", \"outer_text\")\n        .text(this.degree_text[i])\n    }\n\n    g.append('circle')\n        .attr('x',0)\n        .attr('y',0)\n        .attr('r',this.dial_r_center)\n        .attr(\"class\", \"center_path\")\n        \n\n    g.append(\"text\") \n        .attr(\"class\", \"center_text\")\n        .attr(\"id\",\"center_text\")\n        .text(\"\")\n    },\n    get_current_chord_text: function(root){\n      if (this.current_chord_interval == 3){\n        if (this.current_chord_type == \"M\"){\n          return root\n        }\n        return root + this.current_chord_type\n      }\n      if (this.current_chord_type == \"D\"){\n        return root + this.current_chord_interval\n      }\n      if (this.current_chord_type == \"M\"){\n        return root + \"maj\" + this.current_chord_interval\n      }\n      return root + this.current_chord_type + this.current_chord_interval\n    },\n    update_center_text(text){\n      let center_text = d3.select(\"#center_text\")\n      center_text.text(text)\n\n      center_text.classed('text_major', false)\n      center_text.classed('text_minor', false)\n      center_text.classed('text_dom', false)\n      if (this.current_chord_type == \"M\"){\n        d3.select(\"#center_text\").classed('text_major', true)\n      }\n      if (this.current_chord_type == \"m\"){\n        center_text.classed('text_minor', true)\n      }\n      if (this.current_chord_type == \"D\"){\n        center_text.classed('text_dom', true)\n      }\n    },\n    outer_on_click(i, no_send){\n      i = ((i + this.offset + 7) % 7)\n      console.log(i)\n      // Interfacing\n      this.current_chord_root = (this.major_scale[i] + this.roots.indexOf(this.interface_key)) % 12\n      let scale_root_text = this.scale_roots[i]\n      if (this.s){\n        this.current_chord_root = (this.current_chord_root + 7) % 12\n        scale_root_text = this.scale_roots[(i+4)%7]\n        if (i == 6){\n          if (scale_root_text.length == 2 && scale_root_text.charAt(1) == \"b\"){\n            scale_root_text = scale_root_text.charAt(0)\n          }\n          else {\n            scale_root_text += '#'\n          }\n        }\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n      }\n      if (this.alt){\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n        if (this.shift){\n          this.current_chord_type = \"M\"\n        }\n        else if (this.ctrl){\n          this.current_chord_type = \"m\"\n        }\n      }\n      else if (this.shift){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"M\"\n      }\n      else if (this.ctrl){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"m\"\n      }\n      else if (! this.s){\n        // No key pressed\n        this.current_chord_interval = 3\n        if ([0,3,4].includes(i)){\n          this.current_chord_type = \"M\"\n        }\n        else{\n          this.current_chord_type = \"m\"\n        }\n      }\n      this.update_center_text(this.get_current_chord_text(scale_root_text))\n      \n      if (!no_send){\n        this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.get_current_chord_text(scale_root_text))\n      }\n      \n      // Visuals\n      for (let i=0; i<7; i++){\n        d3.select('#outer_path'+i).classed(\"outer_path_active\",false)\n      }\n      d3.select('#outer_path'+i).classed(\"outer_path_active\",true)\n    },\n    keydown_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = true\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = true\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = true\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = true\n      }\n      if (['1','2','3','4','5','6','7'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['1','2','3','4','5','6','7'].indexOf(key))\n      }\n      if (['!','@','#','$','%','^','&'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['!','@','#','$','%','^','&'].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n    },\n    keyup_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = false\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = false\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = false\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = false\n      }\n    },\n\n    // Wheel\n    update_offest(idx){\n      this.draw_dial(this.outer_text(this.interface_key), idx)\n      this.outer_on_click(idx, true)\n    }\n  },\n\n  mounted(){\n    this.draw_dial(this.outer_text(this.interface_key))\n    \n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keydown_functions)\n    document.addEventListener('keyup', this.keyup_functions)\n  },\n\n  beforeUnmount(){\n    document.removeEventListener('keydown', this.keydown_functions)\n    document.removeEventListener('keyup', this.keyup_functions)\n  }\n\n}\n</script>\n\n<style>\n/* Dial /////////////////////////////////////*/\n#dial_svg{\n    width: 400px;\n    height: 400px;\n}\n\n.outer_path{\n    stroke: black;\n    fill: white;\n}\n\n.outer_text{\n    stroke: black;\n    fill: black;\n    stroke-width: 0;\n    font-size: 15px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.outer_path_mouseover{\n    fill: #80b8f5;\n}\n\n.outer_path_active{\n    fill: #347dff;\n}\n\n.center_path{\n    stroke: black;\n    fill: white;\n}\n\n.center_text{\n    stroke-width: 0;\n    font-size: 25px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.text_major{\n    fill:#3b9aff;\n}\n\n.text_minor{\n    fill:#0069da;\n}\n.text_dom{\n  fill: #ff9797;\n}\n</style>\n","import { render } from \"./InterfaceMovableWheelFixed.vue?vue&type=template&id=3886aa25\"\nimport script from \"./InterfaceMovableWheelFixed.vue?vue&type=script&lang=js\"\nexport * from \"./InterfaceMovableWheelFixed.vue?vue&type=script&lang=js\"\n\nimport \"./InterfaceMovableWheelFixed.vue?vue&type=style&index=0&id=3886aa25&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <svg id=\"filter_svg\" height=\"200px\" width=\"300px\"></svg>\n    <img src='accFilter_icons/vSparse.svg' height='300' width='300' class='filter_icon' id='vSparse' />\n    <img src='accFilter_icons/vDense.svg' height='300' width='300' class='filter_icon' id='vDense' />\n    <img src='accFilter_icons/hSparse.svg' height='300' width='300' class='filter_icon' id='hSparse' />\n    <img src='accFilter_icons/hDense.svg' height='300' width='300' class='filter_icon' id='hDense' />\n    <button class=\"btn btn-light up\" v-on:click=\"reset\">Reset</button>\n  </div>\n</template>\n\n<script>\nconst d3 = require(\"d3\")\n\nexport default {\n  name: 'PhraseFilterWheel',\n\n  data: function(){\n    return{\n      x: -1,\n      y: 201,\n      filter_h: -1,\n      filter_v: -1,\n    }\n  },\n\n  computed: {\n  },\n\n  methods: {\n    reset(){\n      this.x = -1\n      this.y = 201\n      d3.selectAll(\".circle\").remove().exit()\n      this.set_filter()\n    },\n\n    set_filter(){\n      let x_quant = (this.x - this.x % 100) / 100\n      let y_quant = 1 - (this.y - this.y % 100) / 100\n      if (this.x < 0){\n        x_quant = -1\n      }\n      if (x_quant != this.filter_h || y_quant != this.filter_v){\n        this.filter_h = x_quant\n        this.filter_v = y_quant\n        this.$emit('set_filter', [this.filter_h*2, this.filter_v*2])\n      }\n    },\n\n    set_circle(new_x, new_y){\n      d3.selectAll('.circle').remove().exit()\n\n      d3.select('#filter_svg').append('circle')\n        .attr('cx', new_x)\n        .attr('cy', new_y)\n        .attr('r', 10)\n        .attr('fill', '#00a2ff')\n        .classed('circle', true)\n\n      this.x = new_x\n      this.y = new_y\n      this.set_filter()\n    }\n  },\n\n  mounted(){\n    const canvas_size_h = 300\n    const canvas_size_v = 200\n    const n_bins_h = 3\n    const n_bins_v = 2\n    const line_width = 2\n\n    let this_ = this\n\n    const dragHandler = d3.drag()\n    .on(\"drag\", function (e) {\n      let rect = document.getElementById(\"filter_svg\").getBoundingClientRect()\n      let new_x = (e.sourceEvent.clientX - rect.x)/0.6\n      let new_y = (e.sourceEvent.clientY - rect.y)/0.6\n      if (new_x > canvas_size_h){\n        new_x = canvas_size_h - 1\n      }\n      if (new_x < 0){\n        new_x = 1\n      }\n      if (new_y > canvas_size_v){\n        new_y = canvas_size_v - 1\n      }\n      if (new_y < 0){\n        new_y = 1\n      }\n      this_.x = new_x\n      this_.y = new_y\n      d3.selectAll(\".circle\")\n          .attr(\"cx\", new_x)\n          .attr(\"cy\", new_y)\n      this_.set_filter()\n    })\n    let svg = d3.select('#filter_svg')\n\n    // Set up the background and selector movement\n    svg.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', canvas_size_h)\n      .attr('height', canvas_size_v)\n      .attr('fill', 'black')\n      .attr('opacity', 0.3)\n\n    svg.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', canvas_size_h)\n      .attr('height', canvas_size_v)\n      .attr('fill', 'black')\n      .attr('opacity', 0)\n      .classed(\"background\", true)\n      .on('mousedown', function(e){\n        let rect = document.getElementById(\"filter_svg\").getBoundingClientRect()\n        \n        d3.selectAll('.circle').remove().exit()\n\n        svg.append('circle')\n          .attr('cx', (e.clientX - rect.x)/0.6)\n          .attr('cy', (e.clientY - rect.y)/0.6)\n          .attr('r', 10)\n          .attr('fill', '#00a2ff')\n          .classed('circle', true)\n\n          dragHandler(svg.selectAll(\".circle\"))\n          this_.x = (e.clientX - rect.x)/0.6\n          this_.y = (e.clientY - rect.y)/0.6\n          this_.set_filter()\n      })\n      \n    dragHandler(svg.selectAll(\".background\"));\n\n    // Add lines\n    for (let i=1; i<n_bins_h; i++){\n      svg.append('rect')\n      .attr('x', i * canvas_size_h / n_bins_h)\n      .attr('y', 0)\n      .attr('width', line_width)\n      .attr('height', canvas_size_v)\n      .attr('fill', 'white')\n      .attr('opacity', 0.3)\n    }\n\n    for (let i=1; i<n_bins_v; i++){\n      svg.append('rect')\n      .attr('x', 0)\n      .attr('y', i * canvas_size_v / n_bins_v)\n      .attr('width', canvas_size_h)\n      .attr('height', line_width)\n      .attr('fill', 'white')\n      .attr('opacity', 0.3)\n    }\n\n    d3.selectAll('.background').raise()\n\n\n  },\n  \n  beforeUnmount() {\n  }\n\n}\n</script>\n\n<style scoped>\n.filter_icon{\n  position: relative;\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n#vSparse{\n  left: 190px;\n  top: -10px;\n  -webkit-transform: scale(2);\n  transform-origin: center;\n}\n\n#vDense{\n  left: 135px;\n  top: -465px;\n  -webkit-transform: scale(1.4);\n  transform-origin: center;\n}\n\n#hSparse{\n  left: 80px;\n  top: -677px;\n  -webkit-transform: scale(2);\n  transform-origin: center;\n}\n\n#hDense{\n  left: 180px;\n  top: -1030px;\n  -webkit-transform: scale(1.3);\n  transform-origin: center;\n}\n\n.up{\n  position: relative;\n  top: -1200px;\n}\n\n</style>\n","import { render } from \"./PhraseFilterWheel.vue?vue&type=template&id=5c95fb7e&scoped=true\"\nimport script from \"./PhraseFilterWheel.vue?vue&type=script&lang=js\"\nexport * from \"./PhraseFilterWheel.vue?vue&type=script&lang=js\"\n\nimport \"./PhraseFilterWheel.vue?vue&type=style&index=0&id=5c95fb7e&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5c95fb7e\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=46a1125a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=46a1125a&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InterfaceMovableWheel.vue?vue&type=style&index=0&id=e816ae82&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InterfaceMovable.vue?vue&type=style&index=0&id=22df1487&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PhraseSelectDemo.vue?vue&type=style&index=0&id=5c662532&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PhraseSelect.vue?vue&type=style&index=0&id=fa5e1bb8&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PhraseFilterWheel.vue?vue&type=style&index=0&id=5c95fb7e&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InterfaceFixed.vue?vue&type=style&index=0&id=0c3b6279&scoped=true&lang=css\""],"sourceRoot":""}