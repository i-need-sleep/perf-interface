{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?8a39","webpack:///./src/App.vue","webpack:///./src/components/InterfaceFixed.vue","webpack:///./src/components/InterfaceFixed.vue?acd7","webpack:///./src/components/InterfaceMovable.vue","webpack:///./src/components/InterfaceMovable.vue?0446","webpack:///./src/App.vue?dfb6","webpack:///./src/main.js","webpack:///./src/components/InterfaceFixed.vue?2364","webpack:///./src/components/InterfaceMovable.vue?228d"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","id","disabled","tabindex","role","data-toggle","data-trigger","title","rel","data-content","data-html","height","style","type","get_data","songID","noteSequence","original_noteseq","config","cfg","original_chd_str","altered_chd_str","player_reset","bpm","min","max","checked","root_overlay","root_on_click","chord_overlay","chord_on_click","input_type","href","change_input_type","scales_major","change_key","loaded","update_current_chord","ref","interface_key","roots","sound-font","visualizer","current_chord_type","current_chord_text","$event","root_on_rightclick","root_on_middleclick","current_chord_root","current_chord_interval","computed","this","methods","root_idx","event","altKey","shiftKey","movementX","$emit","keyboard_functions","includes","preventDefault","idx","indexOf","ctrlKey","mounted","document","addEventListener","beforeUnmount","removeEventListener","render","__scopeId","d3","Note","Scale","console","log","props","String","Array","major_scale","dial_r_outer","degree_text","alt","ctrl","interface_key_idx","dial_r_center","dial_r_degrees","scale_roots","notes","outer_text","scale_notes","draw_dial","selectAll","remove","exit","g","select","append","attr","This","arc","innerRadius","outerRadius","startAngle","Math","PI","endAngle","on","outer_on_click","e","classed","cos","sin","text","get_current_chord_text","root","update_center_text","center_text","scale_root_text","charAt","keydown_functions","keyup_functions","axios","default","mm","_","player","SoundFontPlayer","components","InterfaceFixed","InterfaceMovable","BACKEND_PATH","STEP_SIZE","original_chd_mat","notedic","sustain","altered_noteseq","totalTime","fill","altered_chd_mat","playing","chord_seq","current_chd","current_chd_text","altered_vis","noteHeight","pixelsPerTimeStep","minPitch","maxPitch","noteSpacing","list_to_noteseq","notes_in","filter_start","filter_end","notes_out","start","end","pit","velo","pitch","startTime","endTime","velocity","then","response","JSON","parse","bar","PianoRollCanvasVisualizer","getElementById","update_overlay","place_barlines_and_player","setTimeout","player_play","player_query_step","redraw","parseInt","chroma","chord_seq_maxlen","query","join","note_list","new_notes","concat","quant_note_seq","notes_to_quant_noteseq","isPlaying","stop","new_chd_mat","M3","m3","M7","m7","D7","chm","out","quantizationInfo","stepsPerQuarter","tempos","time","qpm","totalQuantizedSteps","note","note_start","note_end","sus_start","sus_end","quantizedStartStep","quantizedEndStep","round","veloicity","canvas_update_note","canvas_note","$refs","dial","chd","draw_overlay_bar","svg","x","color","clear_overlay","get_color","interpolateSinebow","draw_root_overlay","draw_chord_overlay","draw_barlines_original","top_rect","getBoundingClientRect","bottom_rect","l1","left","pageXOffset","documentElement","scrollLeft","l2","right","top","pageYOffset","scrollTop","b","bottom","draw_barlines_altered","place_player_original","raise","loadAllSamples","callbackObject","run","onresize","createApp","App","mount"],"mappings":"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","file":"js/app.5efcf7be.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=61e17dfa&lang=css\"","<template>\n\n<!-- Nav Bar -->\n<nav class=\"navbar navbar-expand-sm bg-light\">\n  <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n    <ul class=\"navbar-nav mr-auto\">\n      <li class=\"nav-item\">\n        <button class=\"btn\" value=\"placeholder\" v-on:click=\"get_data\">New Sample</button><br> \n      </li>\n    </ul>\n    <ul class=\"navbar-nav\">\n      <li class=\"nav-item\">\n        <button class=\"btn\" disabled>Song ID:{{ this.songID }}</button><br> \n        <!-- <button class=\"btn\" v-on:click=\"test\">test</button><br>  -->\n      </li>\n      <li class=\"nav-item\">\n        <a tabindex=\"0\" class=\"btn\" role=\"button\" data-toggle=\"popover\" data-trigger=\"focus\" title=\"Help\" rel=\"popover\"\n        data-content=\"\n        Playback: <br> \n        <ul>\n          <li>r: reset</li>\n          <li>n: new sample</li>\n        </ul>\n        Input-Fixed: <br> \n        <ul>\n          <li>Mouse</li>\n          <ul>\n            <li>left click: select a major triad</li>\n            <li>right click: select a minor triad</li>\n            <li>middle click or (shift + left click): select a dominant 7th chord</li>\n            <li>alt + left/right click: select a major/minor 7th chord</li>\n          </ul>\n          <li>Keyboard</li>\n          <ul>\n            <li>'1'-'=': select root</li>\n            <li>shift + root: major triad</li>\n            <li>ctrl + root: minor triad</li>\n            <li>alt + root: moninant 7th chord</li>\n            <li>alt+ shift/ctrl + root: major/minor 7th chord</li>\n          </ul>\n        </ul>\n        Input-Movable: <br> \n        <ul>\n          <li>Mouse</li>\n          <ul>\n            <li>left click: select a triad corresponding the the scale degree</li>\n            <li>shift + left click: select a major triad</li>\n            <li>ctrl + left click: select a minor triad</li>\n            <li>alt + left click: select a dominant seventh chord</li>\n            <li>alt + shift/ctrl + left click: select a major/minor seventh chord</li>\n          </ul>\n          <li>Keyboard</li>\n          <ul>\n            <li>1-7: select a triad corresponding the the scale degree</li>\n            <li>shift + 1-7: select a major triad</li>\n            <li>ctrl + 1-7: select a minor triad</li>\n            <li>alt + 1-7: select a dominant seventh chord</li>\n            <li>alt + shift/ctrl + 1-7: select a major/minor seventh chord</li>\n          </ul>\n        </ul>\n        \"  data-html=\"true\">\n          Help\n        </a><br>\n      </li>\n    </ul>\n  </div>\n</nav>\n\n\n<div class=\"container-fluid pt-3 pb-5\" id=\"main_app\">\n  <!-- Original -->\n  <!-- Time steps: Original -->\n  <table id=time_steps class=\"table table-fixed prog_table\">\n    <thead class=\"thead-light\">\n    <tr>\n      <th class=\"prog_head table_cell\"></th>\n      <div>\n        <th class=\"time_cell\" v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'time'+i\"> {{ (i+3-(i-1)%4)/4 + \".\" + ((i-1)%4+1)}} </th>\n        <th class=\"time_cell\"></th><th class=\"time_cell\"></th>\n      </div>\n    </tr>\n    </thead>\n  </table> \n\n  <midi-visualizer type=\"piano-roll\" class=\"right\" id=\"original_vis\" v-bind:noteSequence=\"this.original_noteseq\" v-bind:config=\"this.cfg\"></midi-visualizer>\n  <svg class=\"original_svg svg right\" height=\"0px\"></svg>\n\n  <div class=\"up\">\n\n  <!-- Original Progression -->\n  <table id=\"original_prog\" class=\"table table-fixed table-striped prog_table\">\n    <tbody>\n    <tr>\n        <th id=play_prog_original class=\"prog_head\">Original</th>\n        <div>\n        <td v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'original_prog'+(i-1)\" class=\"table_cell\" style=\"font-weight:normal;\"> {{ original_chd_str[i-1] }} </td>\n        <th></th><th></th>\n        </div>\n    </tr>\n    </tbody>  \n  </table>\n\n  <!-- Altered -->\n  <!-- Time steps -->\n  <table id=altered_time_steps class=\"table table-fixed prog_table\">\n    <thead class=\"thead-light\">\n    <tr>\n        <div>\n          <th class = \"prog_head table_cell\"></th>\n          <th class=\"time_cell\" v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'time_altered'+i\"> {{ (i+3-(i-1)%4)/4 + \".\" + ((i-1)%4+1)}} </th>\n          <th class=\"time_cell\"></th><th class=\"time_cell\"></th>\n        </div>\n    </tr>\n    </thead>\n  </table> \n\n  <canvas id=\"altered_canvas\" class=\"right\"></canvas>\n  <svg class=\"swapped_svg svg right\" id=\"swapped_svg\" height=\"0px\"></svg>\n\n  <div class=\"up\">\n  <!-- Altered Progression -->\n  <table id=saved_prog class=\"table table-fixed table-striped prog_table\">\n    <tbody>\n      <tr>\n        <div>\n        <th id=play_prog_original class=\"prog_head\">Altered</th>\n        <td v-for=\"i in 16\" v-bind:key=\"i\" v-bind:id=\"'altered'+(i-1)\" class=\"table_cell\" style=\"font-weight:normal;\">{{altered_chd_str[i-1]}}</td>\n        </div>\n        <th></th>\n    </tr>\n    </tbody>\n  </table> \n\n  <!-- Interfacing -->\n  <div class=\"row\">\n    <div class=\"col-4\">\n    <button id=\"altered_reset\" class=\"btn btn-light\" v-on:click=\"player_reset\">Reset</button><br>\n    Bpm: <span id=bpm_text>{{this.bpm}}</span><div id=slider_container><input type=\"range\" class=\"form-control-range\" id=bpm_slider min=30 max=200 v-model=\"bpm\"></div>\n    <div class=\"input-group-prepend\">\n    <div class=\"input-group-text\" style=\"width:160px\">\n      <input type=\"checkbox\" id=\"root_overlay\" v-bind:checked=\"root_overlay\" v-on:click=\"this.root_on_click()\"> <span> &nbsp; Root overlay</span>\n    </div>\n    </div>\n    <div class=\"input-group-prepend\">\n      <div class=\"input-group-text\" style=\"width:160px\">\n        <input type=\"checkbox\" id=\"chord_overlay\" v-bind:checked=\"chord_overlay\" v-on:click=\"this.chord_on_click()\"> <span> &nbsp; Chord overlay</span>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"col-3\">\n    <div class=\"btn-group\">\n      <button class=\"btn btn-light dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">{{\"Input type: \"+this.input_type}}\n      <span class=\"caret\"></span></button>\n      <ul class=\"dropdown-menu\">\n        <li><a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_input_type('movable')\">Movable</a></li>\n        <li><a class=\"dropdown-item\" href=\"#\" v-on:click=\"change_input_type('fixed')\">Fixed</a></li>\n      </ul>\n\n    <div class=\"dropdown\" v-if=\"this.input_type == 'movable'\">\n      <button class=\"btn btn-light dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">{{\"Key: \"+this.key+\" major\"}}\n      <span class=\"caret\"></span></button>\n      <ul class=\"dropdown-menu\">\n        <li><a v-for=\"key in this.scales_major\" \n        v-bind:key=\"key\" class=\"dropdown-item\" href=\"#\" v-on:click=\"change_key(key)\">{{key + \" major\"}}</a></li>\n      </ul>\n    </div>\n    </div>\n\n    <!-- Interface UIs -->  \n    <div v-if=\"this.loaded\">\n    <InterfaceFixed v-if=\"input_type == 'fixed'\" v-on:update_current_chord=\"update_current_chord\"/>\n    <InterfaceMovable ref=\"dial\" v-if=\"input_type == 'movable'\" v-bind:interface_key=\"this.key\" v-bind:roots=\"scales_major\" v-on:update_current_chord=\"update_current_chord\"/>\n    </div>\n\n  </div>\n</div>\n</div>\n</div>\n</div>\n\n<!-- Barlines -->\n<svg id=original_barline class=\"barline_svg\"></svg><br>\n<svg id=altered_barline class=\"barline_svg\"></svg>\n\n<!-- Player -->\n<midi-player v-bind:noteSequence=\"this.original_noteseq\" sound-font visualizer=\"#original_vis\" id=\"original_player\"></midi-player>\n\n</template>\n\n<script>\nimport InterfaceFixed from './components/InterfaceFixed.vue'\nimport InterfaceMovable from './components/InterfaceMovable.vue'\nconst axios = require('axios').default\nconst d3 = require(\"d3\")\nconst mm = require(\"@magenta/music\")\nconst _ = require(\"html-midi-player\")\nconsole.log(_)\nvar player = new mm.SoundFontPlayer('https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus')\n\nexport default {\n  name: 'App',\n  components: {\n    InterfaceFixed,\n    InterfaceMovable\n  },\n  data: function(){\n    return{\n      // Constants (not really)\n      BACKEND_PATH: \"\",\n      STEP_SIZE: 4,\n      scales_major: ['C', 'Db', 'D', 'Eb', 'E', 'F', 'F#', 'G', 'Ab', 'A', 'Bb', 'B'],\n\n      // Song data (original)\n      songID: \"000\",\n      original_noteseq: 0,\n      original_chd_str: 0,\n      original_chd_mat: 0,\n      notedic: 0,\n      sustain: [],\n\n      // Song data (altered)\n      altered_noteseq: {notes:[], totalTime: 16},\n      altered_chd_str: Array(16).fill(\"\"),\n      altered_chd_mat: Array(16).fill(Array(36).fill(0)),\n\n      // Interfacing (outside)\n      bpm: 60,\n      playing: false,\n      loaded: false,\n      input_type: \"fixed\",\n      key: \"C\",\n\n      // Interfacing (inside)\n      t: 0,\n      chord_seq: [], // Entered chords for the current window\n      current_chd: '', // Queued chord for the next time step\n      current_chd_text: '',\n\n      // Altered visualiser\n      altered_vis: 0,\n\n      // Visualiser config\n      cfg: {\n        noteHeight: 4,\n        pixelsPerTimeStep: 100,\n        minPitch: 20,\n        maxPitch: 90,\n        noteSpacing: 1\n      },\n\n      // Overlays\n      root_overlay: true,\n      chord_overlay: false\n    }\n  },\n  computed: {\n  },\n  methods: {\n    // Helpers\n    list_to_noteseq(notes_in, filter_start=0, filter_end=16){\n      let notes_out = []\n      for (let i=0; i<notes_in.length; i++){\n          let start = notes_in[i][0]\n          let end = notes_in[i][1]\n          let pit = notes_in[i][2]\n          let velo = notes_in[i][3]\n          if (filter_start >= 8){\n              start += 8\n              end += 8\n          }\n              if (start>=filter_start && start<filter_end){\n                  notes_out.push({pitch:pit, startTime:start, endTime:end, velocity:velo})\n              }\n      }\n      return notes_out\n    },\n\n    // Fetch data from the backend\n    get_data(){\n      axios.get(this.BACKEND_PATH + '/get_data?song=' + this.songID)\n        .then(response => {\n              let data = response.data\n              if (! data.songID){\n                data = JSON.parse(response.data)\n              }\n              this.songID = data.songID\n              this.original_noteseq = data.original_noteseq\n              this.original_chd_str = data.original_chd_str\n              this.original_chd_mat = data.original_chd_mat\n              this.notedic = data.notedic\n              this.sustain = data.sustain\n              // Modify the sustain status to include the onset of every measure\n              for (let bar=1; bar<4; bar++){\n                for (let i=0; i<this.sustain.length; i++){\n                  let start = this.sustain[i][0]\n                  let end = this.sustain[i][1]\n                  if (start < bar*4 && end > bar*4){\n                    break\n                  }\n                  if (start > bar*4){\n                    if (i > 0){\n                      this.sustain[i-1][1] = bar*4 + 1\n                    }\n                    else{\n                    this.sustain.push([bar*4 - 1, bar*4 + 1])\n                    }\n                    break\n                  }\n                }\n              }\n\n              // Fetch a placeholder notesequence\n              // this.altered_vis = new mm.PianoRollCanvasVisualizer({notes: this.list_to_noteseq(this.notedic[0][\"0M3,0M3\"]), totalTime:16}, document.getElementById('altered_canvas'), this.cfg)\n              \n              this.altered_vis = new mm.PianoRollCanvasVisualizer({notes: [{pitch: 30, start:0, end:8}], totalTime:16}, document.getElementById('altered_canvas'), this.cfg)\n              this.update_overlay()\n\n              this.player_reset()\n              this.place_barlines_and_player()\n              setTimeout(() => {  this.place_barlines_and_player(); }, 1000)\n              setTimeout(() => {  this.place_barlines_and_player(); }, 3000)\n        })\n    },\n\n    // Interfacing (player)\n    player_play(){\n      \n      if (this.loaded){\n        if (this.playing){\n          if (this.t % this.STEP_SIZE == 0){\n            // Reset at t = 0\n            if (this.t == 0){\n              this.altered_noteseq.notes = []\n            }\n            this.player_query_step()\n          }\n          if (!this.playing){\n            return\n          }\n\n          // Next time step\n          this.t += 4;\n          if (this.t == 16){\n              this.t = 0\n          }\n        }\n      }\n      \n    },\n\n    player_reset(){\n      this.playing = false\n      this.t = 0\n      this.altered_noteseq.notes = []\n      this.chord_seq = []\n      this.altered_chd_str = Array(16).fill(\"\")\n      this.altered_chd_mat =  Array(16).fill(Array(36).fill(0))\n      this.altered_vis.redraw()\n      this.update_overlay()\n    },\n\n    player_query_step(){\n      if (this.current_chd == ''){\n        this.playing = false\n        return\n      }\n      \n      setTimeout(() => {  this.player_play(); }, 16*250*60/this.bpm)\n\n      // Clean up at song start\n      if (this.t == 0){\n        this.altered_chd_str = Array(16).fill(\"\")\n        this.altered_chd_mat =  Array(16).fill(Array(36).fill(0))\n      }\n\n      // Clean up at window start\n      if (this.t % this.STEP_SIZE == 0){\n        this.chord_seq = []\n      }\n\n      this.chord_seq.push(this.current_chd)\n      let root = parseInt(this.current_chd.slice(0,-2))\n      let chroma = this.current_chd.slice(-2)\n      this.current_chd = ''\n\n      // Update string\n      this.altered_chd_str[this.t] = this.current_chd_text\n      this.current_chd_text = ''\n      \n      // Query and update noteseq\n      let chord_seq_maxlen = 8 / this.STEP_SIZE\n      let query = []\n      for (let i=0; i<this.chord_seq.length; i++){\n        query.push(this.chord_seq[i])\n      }\n      while (query.length < chord_seq_maxlen){\n        query.push(query[query.length-1])\n      }\n      query = query.join(',')\n      let note_list = this.notedic[(this.t - this.t%8)/8][query]\n      let new_notes = this.list_to_noteseq(note_list, this.t, this.t+this.STEP_SIZE, true)\n      this.altered_noteseq.notes = this.altered_noteseq.notes.concat(new_notes)  \n      let quant_note_seq = this.notes_to_quant_noteseq(new_notes)\n\n      \n\n      // Restart the player\n      if (player.isPlaying()){\n        player.stop()\n      }\n      player.start(quant_note_seq, this.bpm)\n\n\n      // Canvas and noteseq\n      this.altered_vis.noteSequence = this.altered_noteseq\n      this.altered_vis.redraw()\n\n      // Overlay and notemat\n      let new_chd_mat = Array(36).fill(0)\n      new_chd_mat[root] = 1\n      new_chd_mat[root+24] = 1\n\n      let M3 = [0,4,7]\n      let m3 = [0,3,7]\n      let M7 = [0,4,7,11]\n      let m7 = [0,3,7,10]\n      let D7 = [0,4,7,10]\n      let chm = 0\n\n      if (chroma == 'M3'){\n        chm = M3\n      }\n      if (chroma == 'm3'){\n        chm = m3\n      }\n      if (chroma == 'M7'){\n        chm = M7\n      }\n      if (chroma == 'm7'){\n        chm = m7\n      }\n      if (chroma == 'D7'){\n        chm = D7\n      }\n\n      for (let i=0; i<chm.length; i++){\n        new_chd_mat[(root+chm[i])%12 + 12] = 1\n      }\n      for (let i=this.t; i<this.t+this.STEP_SIZE; i++)[\n        this.altered_chd_mat[i] = new_chd_mat\n      ]\n      this.update_overlay()\n    },\n\n    notes_to_quant_noteseq(notes){\n      let out = {notes: [], quantizationInfo: {stepsPerQuarter: 4}, tempos: [{time: 0, qpm: 60}],totalQuantizedSteps: 64}\n      for (let i=0; i<notes.length; i++){\n        let note = notes[i]\n        let note_start = note.startTime\n        let note_end = note.endTime\n        for (let j=0; j<this.sustain.length; j++){\n          let sus_start = this.sustain[j][0]\n          let sus_end = this.sustain[j][1]\n          if (note.endTime > sus_start && note.endTime < sus_end){\n            note_end = sus_end\n            break\n          }\n          if (note.endTime < sus_start){\n            break\n          }\n        }\n        out.notes.push({pitch:note.pitch, quantizedStartStep:(note_start-this.t)*4, quantizedEndStep:Math.round((note_end-this.t)*4), veloicity: note.velocity})\n      }\n      return out\n    },\n\n    canvas_update_note(note){\n      let t = this.t\n      if (t == 0){\n        t = 16\n      }\n      let canvas_note = {pitch: note.pitch, startTime: note.startTime+t-4, endTime: note.endTime+t-4}\n      this.altered_vis.redraw(canvas_note)\n    },\n\n    // Interfacing (input type)\n    change_input_type(type){\n      this.input_type = type\n    },\n    change_key(key){\n      this.key = key\n      this.$refs.dial.draw_dial(this.$refs.dial.outer_text(key))\n    },\n    update_current_chord(chd, text){\n      this.current_chd = chd\n      this.current_chd_text = text\n      if (!this.playing){\n        this.playing = true\n        this.player_play()\n      }\n      else{\n        // Pre-update overlays and chord texts\n        // Overlay and notemat\n        let root = parseInt(this.current_chd.slice(0,-2))\n        let chroma = this.current_chd.slice(-2)\n        let new_chd_mat = Array(36).fill(0)\n        let t = this.t\n        new_chd_mat[root] = 1\n        new_chd_mat[root+24] = 1\n\n        let M3 = [0,4,7]\n        let m3 = [0,3,7]\n        let M7 = [0,4,7,11]\n        let m7 = [0,3,7,10]\n        let D7 = [0,4,7,10]\n        let chm = 0\n\n        if (chroma == 'M3'){\n          chm = M3\n        }\n        if (chroma == 'm3'){\n          chm = m3\n        }\n        if (chroma == 'M7'){\n          chm = M7\n        }\n        if (chroma == 'm7'){\n          chm = m7\n        }\n        if (chroma == 'D7'){\n          chm = D7\n        }\n\n        for (let i=0; i<chm.length; i++){\n          new_chd_mat[(root+chm[i])%12 + 12] = 1\n        }\n        for (let i=t; i<t+this.STEP_SIZE; i++)[\n          this.altered_chd_mat[i] = new_chd_mat\n        ]\n        this.update_overlay()\n\n        // Text\n        this.altered_chd_str[t] = this.current_chd_text\n        }\n    },\n\n    // Overlays\n    draw_overlay_bar(svg, x, pitch, color){\n      x *= 100;\n      while (pitch <= 90){\n          if (pitch >= 30){\n              svg.append('rect')\n              .attr('fill', color)\n              .attr('opacity', 0.3)\n              .attr('x', x)\n              .attr('y', this.cfg.noteHeight * (this.cfg.maxPitch - pitch))\n              .attr('width', 100)\n              .attr('height', 4)\n              .attr('class', 'overlay');\n          }\n          pitch += 12;\n      }\n    },\n    clear_overlay(){\n      d3.selectAll(\".overlay\").remove().exit()\n    },\n    get_color(pitch){\n      return d3.interpolateSinebow((pitch/12+0.6)%1)\n    },\n    draw_root_overlay(){\n      for (let i=0; i<this.original_chd_mat.length; i++){\n        let chd = this.original_chd_mat[i];\n        let root = chd.slice(0,12).indexOf(1);\n        this.draw_overlay_bar(d3.select(\".original_svg\"), i, root, this.get_color(0));\n        if (this.altered_chd_mat[i].slice(0,12).indexOf(1) >= 0){\n            this.draw_overlay_bar(d3.select(\".swapped_svg\"), i, this.altered_chd_mat[i].slice(0,12).indexOf(1), this.get_color(0));\n        }\n      }\n    },\n    draw_chord_overlay(){\n      for (let i=0; i<this.original_chd_mat.length; i++){\n        let chd = this.original_chd_mat[i];\n        let root = chd.slice(0,12).indexOf(1);\n        for (let j=0; j<12; j++){\n          if (chd[12+j] == 1){\n              this.draw_overlay_bar(d3.select(\".original_svg\"), i, j, this.get_color((j-root)%12));\n          }\n          if (this.altered_chd_mat[i][12+j] == 1){\n              this.draw_overlay_bar(d3.select(\".swapped_svg\"), i, j, this.get_color((j-this.altered_chd_mat[i].slice(0,12).indexOf(1))%12));\n          }\n        }\n      }\n    },\n    update_overlay(){\n      this.clear_overlay()\n      if (this.chord_overlay){\n        this.draw_chord_overlay()\n      }\n      else if (this.root_overlay){\n        this.draw_root_overlay()\n      }\n    },\n    root_on_click(){\n      if (this.root_overlay){\n        this.root_overlay = false\n      }\n      else {\n        this.root_overlay = true\n      }\n      this.update_overlay()\n    },\n    chord_on_click(){\n      if (this.chord_overlay){\n        this.chord_overlay = false\n      }\n      else {\n        this.chord_overlay = true\n      }\n      this.update_overlay()\n    },\n\n    // Place barlines / original player\n    draw_barlines_original(){\n      d3.selectAll(\".barline_original\").remove().exit()\n      let top_rect = document.getElementById(\"time1\").getBoundingClientRect();\n      let bottom_rect = document.getElementById(\"original_prog0\").getBoundingClientRect();\n\n      let l1 = top_rect.left + window.pageXOffset || document.documentElement.scrollLeft\n      let l2 = top_rect.right + window.pageXOffset || document.documentElement.scrollLeft\n      let t = top_rect.top + window.pageYOffset || document.documentElement.scrollTop\n      let b = bottom_rect.bottom + window.pageYOffset || document.documentElement.scrollTop\n\n      for (let i=1; i<4; i++){\n          d3.selectAll(\"#original_barline\")\n          .append('rect')\n          .attr('x', l1 + i*4*(l2-l1))\n          .attr('y', t)\n          .attr('width', 3)\n          .attr('height', b-t)\n          .attr('class', 'barline barline_original')\n      }\n    },\n    draw_barlines_altered(){\n      d3.selectAll(\".barline_altered\").remove().exit()\n\n      let top_rect = document.getElementById(\"time_altered1\").getBoundingClientRect();\n      let bottom_rect = document.getElementById(\"altered10\").getBoundingClientRect();\n\n      let l1 = top_rect.left + window.pageXOffset || document.documentElement.scrollLeft\n      let l2 = top_rect.right + window.pageXOffset || document.documentElement.scrollLeft\n      let t = top_rect.top + window.pageYOffset || document.documentElement.scrollTop\n      let b = bottom_rect.bottom + window.pageYOffset || document.documentElement.scrollTop\n\n      for (let i=1; i<4; i++){\n          d3.selectAll(\"#altered_barline\")\n          .append('rect')\n          .attr('x', l1 + i*4*(l2-l1))\n          .attr('y', t)\n          .attr('width', 3)\n          .attr('height', b-t)\n          .attr('class', 'barline barline_altered')\n        }\n    },\n    place_player_original(){\n      let top_rect = document.getElementById(\"time16\").getBoundingClientRect();\n      let bottom_rect = document.getElementById(\"original_prog15\").getBoundingClientRect();\n\n      let l2 = top_rect.right + window.pageXOffset || document.documentElement.scrollLeft\n      let t = top_rect.top + window.pageYOffset || document.documentElement.scrollTop\n      let b = bottom_rect.bottom + window.pageYOffset || document.documentElement.scrollTop\n\n      d3.select(\"#original_player\")\n      .style(\"position\",\"absolute\")\n      .style(\"left\",l2+\"px\")\n      .style(\"top\", (t+2*b)/3+\"px\")\n      .style(\"-webkit-transform\",\"scale(0.75)\")\n      .raise()\n    },\n    place_barlines_and_player(){\n      this.draw_barlines_original()\n      this.draw_barlines_altered(),\n      this.place_player_original()\n    }\n  },\n\n  mounted(){\n  this.get_data()\n  player.loadAllSamples().then(()=>{ \n      this.loaded = true\n      this.altered_noteseq.notes = []\n  })\n  \n  let This = this\n  player.callbackObject = {\n      run: (note) => {This.canvas_update_note(note)},\n        stop: () => {return}\n      };\n\n  // Barlines and player positioning\n  window.onresize = this.place_barlines_and_player\n  \n  // Keyboard shortcuts\n  document.addEventListener('keydown', (event) => {\n    let key = event.key\n    if (['r','R'].includes(key)){\n      this.player_reset()\n    }\n    if (['n','N'].includes(key)){\n      this.get_data()\n    }\n  })\n\n  }\n\n\n}\n\n\n</script>\n\n<style>\n/* General / Misc */\n#main_app{\n  transform-origin: top left;\n  -webkit-transform: scale(0.6);\n  position: relative;\n  left: 100px;\n}\n\n.right{\n    position: relative;\n    left: 100px;\n}\n\n.popover{\n  max-width: 100% !important;\n}\n\n/* Prog Table */\n.prog_table{\n    width: 1900px !important;\n}\n\n.prog_head{\n    text-align: center;\n    vertical-align: text-top;\n    width:100px;\n    font-weight: bold;\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n\n.prog_repos{\n    position: relative;\n    top: 5px;}\n\n.time_cell{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n    text-align: left;\n    width: 100px;\n}\n\n.time_cell_active{\n    background-color: #80b8f5 !important\n}\n\n.table_cell{\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n    text-align: left;\n    width: 100px;\n}\n\n.table_cell_active{\n    background-color: #80b8f5 !important;\n    animation-name: table_cell_active_ani;\n    animation-duration: 1s;\n}\n\n/* Barlines //////////////////////////////////////////////////////////////////////////////// */\n.barline_svg{\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 1600px;\n    height: 1000px;\n    pointer-events: none;\n}\n\n.barline{\n    fill: black;\n    opacity: 0.1;\n}\n\n/* Piano Roll Overlay //////////////////////////////////////////////////////////////////// */\ncanvas{\n    display: block;\n}\n\n.svg{\n    position: relative;\n    top: -280px;\n    width: 1600px;\n    height: 280px;\n}\n\n.up{\n    position:relative;\n    top: -280px\n}\n\n/* Bpm slider ////////////////////////////////////////////////////////////////////////////////// */\n#bpm_slider{\n    position: relative;\n    top: 15px;\n    -webkit-appearance: none;\n    width: 300px;\n    height: 10px;\n    background: #d3d3d3;\n    outline: none;\n    opacity: 0.7;\n    -webkit-transition: .2s;\n    transition: opacity .2s;\n}\n\n#bpm_slider:hover {\n    opacity: 1;\n  }\n  \n#bpm_slider::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 25px;\n    height: 25px;\n    background: #80b8f5;\n    cursor: pointer;\n    stroke-width: 0px;\n}\n  \n#bpm_slider::-moz-range-thumb {\n    width: 25px;\n    height: 25px;\n    background: #80b8f5;\n    cursor: pointer;\n    stroke-width: 0px;\n}\n\n#slider_container{\n    height: 50px;\n}\n\n</style>\n","<template>\n  <div>\n\n\n  <!-- Current chord display -->\n    <p>Current chord:</p>\n    <p id=current_chord_text v-bind:class=\"{'text_major':current_chord_type=='M', 'text_minor':current_chord_type=='m', 'text_dom':current_chord_type=='D'}\"> {{ current_chord_text }} </p>\n\n\n  <!-- Root selector -->\n    <table id=\"root_table\" class=\"table table-bordered table-fixed\">\n      <tbody>\n        <tr>\n          <td v-for=\"i in 12\" v-bind:key=\"i\" v-bind:id=\"'root_'+i\" \n            v-on:click=\"root_on_click(i-1, $event)\" \n            v-on:contextmenu.prevent=\"root_on_rightclick(i-1, $event)\"\n            v-on:click.middle=\"root_on_middleclick(i-1, $event)\" \n            v-bind:class=\"{'root_cell':true, \n                            'root_black':[1,3,6,8,10].includes(i-1),\n                            'major':current_chord_type=='M'&&current_chord_root==i-1, \n                            'minor':current_chord_type=='m'&&current_chord_root==i-1,\n                            'dom':current_chord_type=='D'&&current_chord_root==i-1\n                            }\" >\n            {{roots[i-1]}}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'InterfaceFixed',\n\n  data: function(){\n    return{\n      // 'Constants'\n      roots: ['C','C#','D','D#','E',\"F\",'F#','G','G#','A','A#','B'],\n\n      // Current selection\n      current_chord_root: \"0\",\n      current_chord_type: \"M\",\n      current_chord_interval: 3\n    }\n  },\n\n  computed: {\n    current_chord_text: function(){\n      if (this.current_chord_interval == 3){\n        if (this.current_chord_type == \"M\"){\n          return this.roots[this.current_chord_root]\n        }\n        return this.roots[this.current_chord_root] + this.current_chord_type\n      }\n      if (this.current_chord_type == \"D\"){\n        return this.roots[this.current_chord_root] + this.current_chord_interval\n      }\n      if (this.current_chord_type == \"M\"){\n        return this.roots[this.current_chord_root] + \"maj\" + this.current_chord_interval\n      }\n      return this.roots[this.current_chord_root] + this.current_chord_type + this.current_chord_interval\n    }\n  },\n\n  methods: {\n    root_on_click(root_idx, event){\n      this.current_chord_root = root_idx\n      this.current_chord_type = \"M\"\n      if (event.altKey){\n        this.current_chord_interval = 7\n      }\n      else{\n        this.current_chord_interval = 3\n      }\n      if (event.shiftKey && event.movementX){\n        this.current_chord_type = \"D\"\n        this.current_chord_interval = 7\n      }\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.current_chord_text)\n    },\n    root_on_rightclick(root_idx, event){\n      this.current_chord_root = root_idx\n      this.current_chord_type = \"m\"\n      this.current_chord_interval = 3\n      if (event.altKey){\n        this.current_chord_interval = 7\n      }\n      else{\n        this.current_chord_interval = 3\n      }\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.current_chord_text)\n    },\n    root_on_middleclick(root_idx){\n      this.current_chord_root = root_idx\n      this.current_chord_type = \"D\"\n      this.current_chord_interval = 7\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.current_chord_text)\n    },\n    keyboard_functions(event){ \n      let key = event.key\n      // Major\n      if (['!','@','#','$','%','^','&','*','(',')','_','+'].includes(key)){\n          event.preventDefault()\n          let idx = ['!','@','#','$','%','^','&','*','(',')','_','+'].indexOf(key)\n          this.root_on_click(idx, event)\n      }\n      // Major (Mac)\n      else if (['','','','','','','','','','','',''].includes(key)){\n          event.preventDefault()\n          let idx = ['','','','','','','','','','','',''].indexOf(key)\n          this.root_on_click(idx, event)\n      }\n      else if (['','','','','','','','','','',''].includes(key)){\n          event.preventDefault()\n          let idx = ['','','','','','','','','','',''].indexOf(key)\n          this.root_on_click(idx, event)\n      }\n      // Minor\n      else if (['1','2','3','4','5','6','7','8','9','0','-','='].includes(key) && event.ctrlKey){\n          event.preventDefault()\n          let idx = ['1','2','3','4','5','6','7','8','9','0','-','='].indexOf(key)\n          this.root_on_rightclick(idx, event)\n      }\n      else if (['1','2','3','4','5','6','7','8','9','0','-','='].includes(key) && event.altKey){\n          event.preventDefault()\n          let idx = ['1','2','3','4','5','6','7','8','9','0','-','='].indexOf(key)\n          this.root_on_middleclick(idx, event)\n      }\n    }\n  },\n\n  mounted(){\n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keyboard_functions)\n  },\n  \n  beforeUnmount() {\n    document.removeEventListener('keydown', this.keyboard_functions);\n  }\n\n}\n</script>\n\n<style scoped>\n\n/* Current chord text ////////////////////////////////////////////////////////////////////*/\n#current_chord_text{\n    font-size: 100px;\n    text-anchor: middle;\n}\n\n.text_major{\n    color:#2990ff;\n}\n\n.text_minor{\n    color:#295bff;\n}\n.text_dom{\n  color: #ff9797;\n}\n\n\n/* Root Table /////////////////////////////////////////////////////////////////////////////*/\n#root_table{\n    width: 720px !important;\n}\n\n.root_cell{\n    width: 60px;\n    text-anchor: middle;\n    text-align: center;\n    vertical-align: middle !important;\n    -webkit-user-select: none;         \n    -moz-user-select: none; \n    -ms-user-select: none; \n    user-select: none; \n}\n.root_cell:hover{\n    background-color: #80b8f5;\n}\n\n.root_black{\n    background-color: #aaaaaa;\n}\n\n.major{\n    background-color: #29b1ff;\n}\n.major:hover{\n    background-color: #00a2ff;\n}\n\n.minor{\n    background-color: #436efc;\n}\n.minor:hover{\n    background-color: #295bff;\n}\n\n.dom{\n    background-color: #ff9797;\n}\n.dom:hover{\n    background-color: #ff7575;\n}\n\n</style>\n","import { render } from \"./InterfaceFixed.vue?vue&type=template&id=35e3bdbc&scoped=true\"\nimport script from \"./InterfaceFixed.vue?vue&type=script&lang=js\"\nexport * from \"./InterfaceFixed.vue?vue&type=script&lang=js\"\n\nimport \"./InterfaceFixed.vue?vue&type=style&index=0&id=35e3bdbc&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-35e3bdbc\"\n\nexport default script","<template>\n  <div>\n    <svg id=\"dial_svg\"></svg>\n  </div>\n</template>\n\n<script>\nconst d3 = require(\"d3\")\nconst { Note, Scale } = require(\"@tonaljs/tonal\")\nconsole.log(Note,Scale)\n\nexport default {\n  name: 'InterfaceMovable',\n\n  props:{\n    interface_key: String,\n    roots: Array\n  },\n\n  data: function(){\n    return{\n      // 'Constants'\n      major_scale: [0,2,4,5,7,9,11],\n\n      // Current selection\n      current_chord_root: \"0\",\n      current_chord_type: \"M\",\n      current_chord_interval: 3,\n\n      // Dial\n      dial_r_outer: 100,\n      degree_text: ['I','ii','iii','IV','V','vi','vii'],\n\n      // Keyboard\n      alt: false,\n      ctrl: false,\n      shift: false,\n      s: false\n    }\n  },\n\n  computed: {\n    // Dial\n    interface_key_idx: function(){\n      return this.roots.indexOf(this.interface_key)\n    },\n\n    dial_r_center: function(){\n      return this.dial_r_outer/2\n    },\n\n    dial_r_degrees: function(){\n      return this.dial_r_outer * 1.5\n    },\n\n    // Interfacing\n    scale_roots: function(){\n      return Scale.get(this.interface_key + \" major\").notes\n    }\n  },\n\n  methods: {\n    // Dial\n    outer_text: function(interface_key){\n      let scale_notes = Scale.get(interface_key + \" major\").notes\n\n      for (let i=0; i<3; i++){\n        scale_notes[[1,2,5][i]] += \"m\"\n      }\n      scale_notes[6] += \"dim\"\n      return scale_notes\n    },\n    draw_dial(outer_text){\n      d3.selectAll('g').remove().exit()\n      let g = d3.select(\"#dial_svg\").append('g').attr('class', 'g').attr(\"transform\", \"translate(\"+(this.dial_r_degrees+5)+\",\"+(this.dial_r_degrees+5)+\")\");\n      let This = this\n      // Outer Ring & degree (roman numerals)\n      for (let i=0; i < outer_text.length; i++){\n        let arc = d3.arc()\n        .innerRadius(this.dial_r_center)\n        .outerRadius(this.dial_r_outer)\n        .startAngle(2*i*Math.PI / outer_text.length)\n        .endAngle(2*(i+1)*Math.PI / outer_text.length)\n    \n        g.append(\"path\")\n            .attr(\"d\", arc)\n            .attr(\"id\", 'outer_path'+i)\n            .attr(\"class\", \"outer_path\")\n            .on(\"click\", function(){This.outer_on_click(i)})\n            .on(\"contextmenu\", function(e){\n              e.preventDefault()\n              This.outer_on_click(i)\n            })\n            .on(\"mouseover\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n            })\n            .on(\"mouseout\", function(){\n                d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n            })\n        \n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_center)/2*Math.cos(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_center)/2*Math.sin(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"class\", \"outer_text\")\n        .attr(\"id\", \"outer_text\"+i)\n        .text(outer_text[i])\n        .on(\"click\", function(){This.outer_on_click(i)})\n        .on(\"contextmenu\", function(e){\n          e.preventDefault()\n          This.outer_on_click(i)\n        })\n        .on(\"mouseover\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",true)\n        })\n        .on(\"mouseout\", function(){\n            d3.select(\"#outer_path\"+i).classed(\"outer_path_mouseover\",false)\n        })\n\n        g.append(\"text\") \n        .attr(\"dx\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.cos(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"dy\", (this.dial_r_outer+this.dial_r_degrees)/2*Math.sin(2*i*Math.PI / outer_text.length + (-0.5+1/7)*Math.PI))\n        .attr(\"class\", \"outer_text\")\n        .text(this.degree_text[i])\n    }\n\n    g.append('circle')\n        .attr('x',0)\n        .attr('y',0)\n        .attr('r',this.dial_r_center)\n        .attr(\"class\", \"center_path\")\n        \n\n    g.append(\"text\") \n        .attr(\"class\", \"center_text\")\n        .attr(\"id\",\"center_text\")\n        .text(\"\")\n    },\n    get_current_chord_text: function(root){\n      if (this.current_chord_interval == 3){\n        if (this.current_chord_type == \"M\"){\n          return root\n        }\n        return root + this.current_chord_type\n      }\n      if (this.current_chord_type == \"D\"){\n        return root + this.current_chord_interval\n      }\n      if (this.current_chord_type == \"M\"){\n        return root + \"maj\" + this.current_chord_interval\n      }\n      return root + this.current_chord_type + this.current_chord_interval\n    },\n    update_center_text(text){\n      let center_text = d3.select(\"#center_text\")\n      center_text.text(text)\n\n      center_text.classed('text_major', false)\n      center_text.classed('text_minor', false)\n      center_text.classed('text_dom', false)\n      if (this.current_chord_type == \"M\"){\n        d3.select(\"#center_text\").classed('text_major', true)\n      }\n      if (this.current_chord_type == \"m\"){\n        center_text.classed('text_minor', true)\n      }\n      if (this.current_chord_type == \"D\"){\n        center_text.classed('text_dom', true)\n      }\n    },\n    outer_on_click(i){\n      // Interfacing\n      this.current_chord_root = (this.major_scale[i] + this.roots.indexOf(this.interface_key)) % 12\n      let scale_root_text = this.scale_roots[i]\n      if (this.s){\n        this.current_chord_root = (this.current_chord_root + 7) % 12\n        scale_root_text = this.scale_roots[(i+4)%7]\n        if (i == 6){\n          if (scale_root_text.length == 2 && scale_root_text.charAt(1) == \"b\"){\n            scale_root_text = scale_root_text.charAt(0)\n          }\n          else {\n            scale_root_text += '#'\n          }\n        }\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n      }\n      if (this.alt){\n        this.current_chord_interval = 7\n        this.current_chord_type = \"D\"\n        if (this.shift){\n          this.current_chord_type = \"M\"\n        }\n        else if (this.ctrl){\n          console.log(\"CTRL\")\n          this.current_chord_type = \"m\"\n        }\n      }\n      else if (this.shift){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"M\"\n      }\n      else if (this.ctrl){\n        this.current_chord_interval = 3\n        this.current_chord_type = \"m\"\n      }\n      else if (! this.s){\n        // No key pressed\n        this.current_chord_interval = 3\n        if ([0,3,4].includes(i)){\n          this.current_chord_type = \"M\"\n        }\n        else{\n          this.current_chord_type = \"m\"\n        }\n      }\n      this.update_center_text(this.get_current_chord_text(scale_root_text))\n      this.$emit('update_current_chord', this.current_chord_root + this.current_chord_type + this.current_chord_interval, this.get_current_chord_text(scale_root_text))\n\n      // Visuals\n      for (let i=0; i<7; i++){\n        d3.select('#outer_path'+i).classed(\"outer_path_active\",false)\n      }\n      d3.select('#outer_path'+i).classed(\"outer_path_active\",true)\n    },\n    keydown_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = true\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = true\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = true\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = true\n      }\n      if (['1','2','3','4','5','6','7'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['1','2','3','4','5','6','7'].indexOf(key))\n      }\n      if (['!','@','#','$','%','^','&'].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['!','@','#','$','%','^','&'].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n      if (['','','','','','',''].includes(key)){\n        event.preventDefault()\n        this.outer_on_click(['','','','','','',''].indexOf(key))\n      }\n    },\n    keyup_functions(event){\n      let key = event.key\n      if (key == \"Alt\"){\n        event.preventDefault()\n        this.alt = false\n      }\n      if (key == \"Shift\"){\n        event.preventDefault()\n        this.shift = false\n      }\n      if (key == \"Control\"){\n        event.preventDefault()\n        this.ctrl = false\n      }\n      if (['S','s'].includes(key)){\n        event.preventDefault()\n        this.s = false\n      }\n    }\n  },\n\n  mounted(){\n    this.draw_dial(this.outer_text(this.interface_key))\n    \n    // Handle keyboard inputs\n    document.addEventListener('keydown', this.keydown_functions)\n    document.addEventListener('keyup', this.keyup_functions)\n  },\n\n  beforeUnmount(){\n    document.removeEventListener('keydown', this.keydown_functions)\n    document.removeEventListener('keyup', this.keyup_functions)\n  }\n\n}\n</script>\n\n<style>\n/* Dial /////////////////////////////////////*/\n#dial_svg{\n    width: 400px;\n    height: 400px;\n}\n\n.outer_path{\n    stroke: black;\n    fill: white;\n}\n\n.outer_text{\n    stroke: black;\n    fill: black;\n    stroke-width: 0;\n    font-size: 15px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.outer_path_mouseover{\n    fill: #80b8f5;\n}\n\n.outer_path_active{\n    fill: #347dff;\n}\n\n.center_path{\n    stroke: black;\n    fill: white;\n}\n\n.center_text{\n    stroke-width: 0;\n    font-size: 25px;\n    user-select: none;\n    dominant-baseline: middle;\n    text-anchor: middle;\n}\n\n.text_major{\n    fill:#3b9aff;\n}\n\n.text_minor{\n    fill:#0069da;\n}\n.text_dom{\n  fill: #ff9797;\n}\n</style>\n","import { render } from \"./InterfaceMovable.vue?vue&type=template&id=654abbb4\"\nimport script from \"./InterfaceMovable.vue?vue&type=script&lang=js\"\nexport * from \"./InterfaceMovable.vue?vue&type=script&lang=js\"\n\nimport \"./InterfaceMovable.vue?vue&type=style&index=0&id=654abbb4&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=61e17dfa\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=61e17dfa&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InterfaceFixed.vue?vue&type=style&index=0&id=35e3bdbc&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InterfaceMovable.vue?vue&type=style&index=0&id=654abbb4&lang=css\""],"sourceRoot":""}